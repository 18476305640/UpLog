/*
SQLyog Ultimate v12.08 (64 bit)
MySQL - 5.7.22 : Database - uplog
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`uplog` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `uplog`;

/*Table structure for table `comment` */

DROP TABLE IF EXISTS `comment`;

CREATE TABLE `comment` (
  `log_id` int(11) NOT NULL,
  `up_id` int(11) NOT NULL,
  `comment_content` varchar(400) DEFAULT NULL,
  `comment_date` date NOT NULL,
  `comment_id` int(20) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`comment_id`),
  KEY `FK_发表` (`up_id`),
  KEY `FK_属于` (`log_id`),
  CONSTRAINT `FK_发表` FOREIGN KEY (`up_id`) REFERENCES `up` (`up_id`),
  CONSTRAINT `FK_属于` FOREIGN KEY (`log_id`) REFERENCES `log` (`log_id`)
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=utf8 COMMENT='评论表';

/*Data for the table `comment` */

insert  into `comment`(`log_id`,`up_id`,`comment_content`,`comment_date`,`comment_id`) values (98,1,'感谢你宝贵的意见，我们会认真对待的！','2021-01-10',6),(85,1,'真强大','2021-01-10',8),(98,2,'很好！','2021-01-10',10),(87,1,'很好','2021-01-11',11),(98,1,'666','2021-01-11',12),(254,13,'确实','2021-01-13',14),(254,1,'6666','2021-01-15',15),(258,1,'212','2021-01-16',17),(254,1,'测试举报！','2021-01-16',18),(85,1,'学','2021-01-17',19),(98,1,'举报测试！','2021-01-18',21),(98,1,'开始','2021-01-23',22),(277,1,'有更多好的机场也可以在评论区分享哦~','2022-08-13',23),(280,122,'你好，感谢你的教程~','2022-09-01',24),(281,122,'你好','2022-09-01',25),(281,123,'11','2022-09-02',26),(287,1,'非常好看','2022-09-08',27);

/*Table structure for table `log` */

DROP TABLE IF EXISTS `log`;

CREATE TABLE `log` (
  `log_id` int(11) NOT NULL AUTO_INCREMENT,
  `up_id` int(11) NOT NULL,
  `log_title` varchar(100) NOT NULL,
  `log_content` longtext,
  `log_date` datetime NOT NULL,
  `log_top` int(11) DEFAULT NULL,
  `log_bottom` int(11) DEFAULT NULL,
  `log_update_date` date DEFAULT NULL,
  `log_state` float NOT NULL DEFAULT '0',
  `log_read` bigint(20) NOT NULL DEFAULT '0' COMMENT '阅读量',
  PRIMARY KEY (`log_id`),
  KEY `FK_拥有` (`up_id`),
  CONSTRAINT `FK_拥有` FOREIGN KEY (`up_id`) REFERENCES `up` (`up_id`)
) ENGINE=InnoDB AUTO_INCREMENT=288 DEFAULT CHARSET=utf8 COMMENT='帖子表';

/*Data for the table `log` */

insert  into `log`(`log_id`,`up_id`,`log_title`,`log_content`,`log_date`,`log_top`,`log_bottom`,`log_update_date`,`log_state`,`log_read`) values (84,1,'C#简单学生信息管理系统（C#课程设计）','<p>!!1</p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p style=\"line-height: 16px;\"><img style=\"vertical-align: middle; margin-right: 2px;\" src=\"/js/ueditor/dialogs/attachment/fileTypeImages/icon_doc.gif\"/><a style=\"font-size:12px; color:#0066cc;\" href=\"/fileUpload/file/20220725/1658761279517075735.docx\" title=\"庄杰-java后端开发实习生 打印.docx\">庄杰-java后端开发实习生 打印.docx</a></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><br style=\"white-space: normal;\"/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><br style=\"white-space: normal;\"/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><br style=\"white-space: normal;\"/></p><p><br/></p>','2021-01-09 20:48:13',1,1,'2022-07-25',1,0),(85,1,'仿面具公园源码面具公园app搭建简单教程','<p><span style=\"color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">可能是2020年兴起的陌生人社交APP，越来越多的人开始投身社交市场，准备做社交APP。 估计都是看到面具这个app是真赚钱了吧 ，刚好我前段时间也在朋友那里花了15000大洋买了一套类似于面具公园的源码，这里简单的跟大家分享下</span></p>','2021-01-09 20:50:12',1,0,'2021-01-09',1,0),(86,1,'Vue + Spring Boot 项目实战（一）：项目简介','<p><span style=\"color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">之前写了一些关于 Java EE 的文章，主要是理论性质的，目的是帮助大家快速了解 Java EE 的核心内容，早日爬出这个陈旧又绕不开的坑，进入 Java Web 开发的新天地。当然只有理论是不够的，有很多细节需要在实践中理解，所以我决定做一个实践教程。</span></p>','2021-01-09 20:50:42',1,0,'2021-01-09',1,0),(87,1,'学习Java的9张思维导图','<p><span style=\"color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">我的目标是根据这个教程，可以帮助&nbsp;</span><span style=\"box-sizing: border-box; outline: 0px; font-weight: 700; overflow-wrap: break-word; color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">新入行的或是刚开始学习相关技术</span><span style=\"color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">&nbsp;的小伙伴们把一个完整的项目还原出来，建立起对前后端分离式 Web 开发的整体认知。</span></p>','2021-01-09 20:51:40',1,13,'2021-01-09',1,0),(91,1,'基于Opencv的口罩佩戴识别系统','<p>疫情之下，有人选择负重前行，有人在年假与工作中毅然选择后者。感谢“疫”路有你，祝愿祖国繁荣昌盛，国泰民安！</p>','2021-01-09 20:54:35',1,0,'2021-01-09',1,0),(92,1,'自学编程的 6 个致命误区','<p><span style=\"color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">嗨，小伙伴们大家好，我是沉默王二。本篇文章来和大家聊聊自学编程中的一些误区——这是我在 B 站上看了羊哥的一期视频后有感而发的文章。因为确实有很多读者也曾私信问过我这些方面的问题，很有代表性，所以我就结合自己的亲身体会来谈一谈，希望对小伙伴们有所启发。</span></p>','2021-01-09 20:56:07',1,NULL,'2021-01-09',1,0),(93,1,'Java高质量面试总结','<p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul style=\"list-style-type: none;\" class=\" list-paddingleft-2\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><span style=\"color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">一般都是由浅到深去问,思路是:</span></p><ul class=\" list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>先考察基础是否过关,因为基础知识决定了一个技术人员发展的上限</p></li></ul><p><br/></p><p><br/></p>','2021-01-09 20:57:09',1,NULL,'2022-07-26',1,0),(94,1,'Java全套视频教程免费下载','<p><span style=\"color: rgb(25, 31, 37); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; background-color: rgb(255, 255, 255);\">你是否一直苦于Java学习资料太多太杂，没有能力辨别哪套视频教程最适合自己？你是否既想自学又想快速提升？你是否期望快速入门，系统学习？？</span></p>','2021-01-09 20:57:35',1,2,'2021-01-09',-1,0),(95,1,'大四学生如何求Java工作？','<p><span style=\"color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">有读者给我留言：大四的学生如何求一份Java的工作？并且还特别强调了他非科班和文凭不出众的事实背景。我想这个问题具有代表性，所以写一些个人的建议，希望能帮到一些人。</span></p>','2021-01-09 20:57:55',1,1,'2021-01-09',1,0),(96,1,'35款帮助你加薪的IDEA神器插件！','<p><span style=\"color: rgb(85, 86, 102); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(238, 240, 244);\">全栈必备，作为一个全能的程序员 ，用鼠标，太伤自尊了，他就可以帮到你</span><br/><code style=\"box-sizing: border-box; outline: 0px; font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; line-height: 22px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 2px; padding: 2px 4px; overflow-wrap: break-word; font-variant-ligatures: common-ligatures; white-space: normal;\">AceJump</code><span style=\"color: rgb(85, 86, 102); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(238, 240, 244);\">其实是一款能够代替鼠标的软件，只要安装了这款插件，可以在代码中跳转到任意位置。按快捷键进入 AceJump 模式后（默认是 Ctrl+J），再按任一个字符，插件就会在屏幕中这个字符的所有出现位置都打上标签，你只要再按一下标签的字符，就能把光标移到该位置上。换言之，你要移动光标时，眼睛一直看着目标位置就行了，根本不用管光标的当前位置。</span></p>','2021-01-09 20:58:21',1,NULL,'2021-01-09',1,0),(97,1,'官方','<p>发布了最新版本！</p>','2021-01-09 22:17:11',1,22,'2021-01-09',-1,0),(98,2,'给官方的建议贴','<p>你好，我是一名在校大学生...</p>','2021-01-10 01:02:33',1,2,'2021-01-10',1,0),(100,1,'过去的榜首','相爱不一定能走到最后....','2020-12-30 10:13:26',1,NULL,NULL,-1,0),(254,13,'猿主简介','<p>它是个逗逼...</p>','2021-01-13 17:13:36',1,0,'2021-01-13',-1,0),(256,1,'测试通过','<p>测试通过</p>','2021-01-16 22:06:01',1,NULL,'2021-01-16',-1,0),(257,1,'212','<p>2121</p>','2021-01-16 22:19:14',1,NULL,'2021-01-16',-1,0),(258,1,'212','<p>2122</p>','2021-01-16 22:19:31',1,NULL,'2021-01-16',-1,0),(259,1,'开心','<p>开心</p>','2021-01-18 14:08:55',1,NULL,'2021-01-18',-1,0),(260,1,'测试通过','<p>212&gt;</p><p>&gt;</p><p>&gt;</p>','2021-01-18 14:31:38',1,NULL,'2022-09-09',-1,0),(268,1,'新政治理论 ','<h3>毛泽东思想</h3><h4>1.1土地革命开辟了</h4><p>农村包围城市，武装夺取政权的革命道路（井冈山）</p><h4>1.2工农武装割据的提出</h4><p>提出“工农武装割据”的思想，初步形成农村包围城市的革命理论</p><p>提出”工农武装割据“的思想，初步形成新民主义革命道路理论</p><h4>1.3 毛泽东思想初步形成的标志</h4><p>毛泽东在《星星之火，可以燎原》中提出了&quot;农村包围城市，武装夺取政权&quot;的革命理论，标志着毛泽东思想的初步形成。</p><h4>1.4 毛泽东思想形成的实践基础</h4><p>中国共产党领导人民进行革命和建设的成功实践</p><h4>1.5红色政权能够存在的原因</h4><p>发展不平衡，革命的发展，相当力量的红军，党的正确政策</p><h4>1.6 毛泽东思想成熟的标志</h4><p>新民主主义革命理论的系统阐述</p><h4>1.7 毛泽东思想的确立为党的指导思想</h4><p>1945年党的七大</p><p>《在晋绥干部 议上的讲话》 《论人民民主专政》《论十大关系》 《关于正确处 人民 部矛盾的问题》</p><h4>1.8 毛泽东思想的内涵</h4><p>中国的马克思主义，被实践证明的正确理论，中国共产党的智慧结晶。</p><h4>1.9 毛泽东的思想的主要内容</h4><p>革命与建设，党内党外，国内国外。</p><p><strong>新民主主义</strong>革命理论（标志着毛泽东思想达到成熟）、</p><p><strong>社会主义</strong>革命和建设理论、</p><p><strong>革命军队建设</strong>和<strong>军事战略</strong>的理论、</p><p><strong>政策和策略</strong>的理论、</p><p><strong>思想政治</strong>工作和文件工作的理论、</p><p><strong>党的建设</strong>理论、</p><p><strong>国际战略</strong>和外交工作的理论</p><h4>2.0 毛泽东活的灵魂</h4><p>——是党进行革命、建设和改革的出发点、根本点和立足点</p><p>实事求是：各理论的精髓、领导 方法</p><p>群众路线：区别于其他一切政党的根本标志，坚持全心全意为人民服务的根本宗旨</p><p>独立自主：相信自己+自己的事情外人别插手+独立自主的和平外资、反对霸权</p><h4>2.1 新民主主义理论的提出</h4><p>《中国革命和中国共产党》</p><h4>2.2 革命的对象与动力</h4><p>革命的对象：帝国主义（首要对象）、封建主义（主要障碍）、 官僚资本主义</p><p>革命的动力：工人、农民、小资产阶级、民族资产阶级</p><h4>2.3 具有两面性的的阶级</h4><p>民族资产阶级</p><h4>2.4 革命的领导力量</h4><p>无产阶级</p><h4>2.5 领导权问题</h4><p>是中心问题与核心问题</p><h4>2.6 如何取得领导权</h4><p>领导权的实现：(条件)率同盟者斗争并取得胜利，并给于物质福利、政治教育;</p><pre>（关键）建立以工农联盟为基础的广泛的统一战线;\r\n\r\n（基本策略）保持党在&nbsp;上&nbsp;政治上&nbsp;组织上的独立性;\r\n\r\n(坚强支柱)&nbsp;革命武装力量\r\n\r\n&nbsp;&nbsp;（根本保证）&nbsp;党的建设</pre><h4>2.7 无阶阶级的特点</h4><p>分布集中，富有组织纪律性，多是破产农民</p><h4>2.8 新民主主义革命的性质</h4><p>资产阶级民主主义革命</p><h4>2.9 革命的前途</h4><p>社会主义</p><h4>3.0 毛泽东思想的基本纲领</h4><p>政治纲领：推翻帝国主义、封建主义统治，建立工人阶级领导的、以工农联盟为基础的、和革命阶级联合专政的新民主主义共和国 。</p><p>经济纲领：没收封建地主阶级的土地归农民所有， 没收官僚资产阶级垄断资本归国家所有（双重性质），保护民族工商业。</p><p>文化纲领：就是无产阶级 的人民 众的反帝反封建的文化 ，即民族的的众的文化。</p><h4>3.1 &nbsp;新民主主义革命的基本内容</h4><ol class=\" list-paddingleft-2\"><li><p>土地革命是民主革命的基本内容</p></li><li><p>武装斗争是中国革命的主要形式，是农村根据地建设和土地革命的强有力保证；</p></li><li><p>农村革命根据地是中国革命的战略阵 ，是进行武装斗争和开展土地革命的依托。</p></li></ol><p>在中国共产党的领导下，实现三者的密切结合和有机统一</p><h4>3.2 革命的三大法宝</h4><p>统一战线</p><p>武装斗争</p><p>党的建设</p><h4>3.3 橄榄型，两头小中间大</h4><p>无产阶级和地主大资产阶级是两头，最广大的是农民，城市小资产阶级以及其他的中间阶级</p><h4>3.4 毛泽东时期党的建设</h4><p>中国共产党要领导革命取得胜利,必须不断加强党的思想建设(首位)、组织建设和作风建设</p><h4>3.5 党的优良作风</h4><p>理论联系实际，密切联系群众，批评和自我评论相结合</p><h4>3.6 党的建设的问题</h4><p>党的建设问题（两个）： &nbsp;提高能力、提高拒腐防腐</p><h4>3.7 过渡时期</h4><p>新民主主义社会（1949-1956）是一个过渡的时期，其中既有资本主义因素也有社会主义因素，表现在五种经济成分共存。</p><h4>3.8 社会主义改造的目的</h4><p>消灭两种矛盾：</p><p>工人阶级与资产阶级、社会主义和资主义两条道路的矛盾</p><h4>4.0 1949年党的七届二中全会</h4><p>提出两个转变</p><p>1、农业国-工业国</p><p>2、新民主主义国家-社会主义国家</p><h4>4.1 社会改造基本完成</h4><p>1953年，毛泽东在会议上正式提出</p><h4>4.2 &nbsp;中国工业化道路的问题</h4><p>重工业、轻工业和农业的发展问题</p><h4>4.3 发展国民经济的总方针</h4><p>以农业为基础、工业为指导、以农轻重为序。</p><h4>4.3 党过渡时期的总路线和总任务</h4><p>一化三改</p><h4>4.4 一化三改的对象</h4><p>社会主义工业化（主体）</p><p>个体农业、手工业、资本主义工商业的社会主义改造（两翼）</p><h4>4.5 &nbsp;党在过渡时期的总路线和总任务的总依据</h4><p>理论依据： 马克思思格斯论述向社会主义过渡时，转变所有 制的手段有暴力没收、和平赎买两种方法</p><p>现实根据：新中国经济文化落后，要有一个长时期的社会主义改造过程</p><h4>4.6 在过渡时期的主要矛盾</h4><p>人民对建立先进的工业国的要求同落后的农业国的现实之间的矛盾</p><p>人民对经济文化迅速发展的需要同当前经济文化不能满足人民需要的状况之间的矛盾</p><h4>4.7 社会主义改造完成的主要矛盾</h4><p>社会主义改造完成后，无产阶级同资产阶级之间矛盾已经基本解决了，居于主导地位的矛盾是大量人民内部矛盾</p><h4>4.8 人民内部矛盾的解决方针</h4><pre>政治思想领域&nbsp;“团结——批评——团结”</pre><p>物质利益，分配方面 统筹兼顾，适当安排</p><p>人民群众和政府相关 民主集中制</p><p>科学文化领域 百花齐放、百家争鸣</p><pre>民族之间&nbsp;民族平等、团结互助</pre><h4>4.9中华人民共和国建立初期的国营经济</h4><p>没收官僚资本来建立国营经济</p><h4>5.0 农业、手工业、私人资本的改造</h4><p>农业、手工业：过渡是“半社会主义性质<strong>合作社经济</strong>”</p><p>私人资本： 过渡是“<strong>国家资本主义经济</strong>”</p><h4>5.1 能使用和平赎买的原因</h4><p>民族资产阶级具有两面性(革命性与动摇性)</p><p>中国共产党与民族资产阶级长期保持着统一战线的关系</p><p>私人资本主义在政治上、经济上对社会主义的依赖</p><h4>5.2 使用和平赎买的方法有利之处</h4><pre>①.&nbsp;有利于发挥私营工商业在国计民生方面的积极作用，促进国民经济的发展。</pre><p>②. 有利于争取和团结民族资产阶级。</p><p>③. 有利于团结各民主党派和备界爱国民主人士，巩固和发展统一战线。</p><p>④ .有利于发挥民族资产阶级中大多数人的知识、才能、技术专长和管理经验。</p><pre>⑤.&nbsp;有利于争取和团结那些原来同资产阶级相联系的知识分子为社会主义建设服务。</pre><h4>5.3对资本主义工商业社会改造基本完成的标志</h4><p>全行业的公私合营</p><h4>5.4社会改造的经验</h4><p>采取积极引导、逐步过渡的方式\r\n坚持社会主义工业化与社会主义改造同时并举\r\n用和平的方式进行改造</p><h4>5.5 社会主义建设道路初步探索的意义</h4><p>是马克思列宁主义在中国正确运用和创造性发展的结果\r\n促进了生产力的发展\r\n为中国特色社会地主义的创新和发展提供了重要条件\r\n为当代中国 一切发展奠定了制度基础</p><h4>5.6 社会主义在中国确立的标志</h4><p>剥削阶级与被剥削阶级被消灭</p><p>社会主义基本制度在我国的初步确立</p><p>我国进入了社会主义初级阶段</p><p>接下来的主要任务是集中力量发展生产力</p><h4>5.7 《历史决议》总结了毛泽东思想的意义</h4><p>第一次明确提出我国正处于社会主义初级阶段\r\n中国革命和建设的科学指南（中特只有建设）\r\n中国共产党和人民的宝贵精神财富</p><h4>5.8 社会主义初级阶段的主要矛盾</h4><p>人民日益增长的物质文化需要同落后的社会生产之间的矛盾</p><h4>5.9 关于革命论</h4><p>一次革命论、 二次革命论</p><p>（只看联系） （只看区别）</p><p>（ 一起打 ） （先资后社）</p><h4>6.0 革命的骨干力量</h4><p>人民军队</p><h4>6.1 政权的取得</h4><p>八七会议：政权是由枪杆中取得的</p><h4>6.2毛泽东：第二次结合</h4><p>第一次是革命，第二次是建设</p><h4>6.3 论实是求是</h4><p>深入了解事物原本的面貌，深刻把握我国国情，在实践的基础上进行理论创新。</p><h4>6.4 认清一切革命</h4><p>基本依据是认清中国的国情</p><h4>6.5 “俄国十月革命”的胜利</h4><p>改变了整个世界历史的方向，划分了整个世界历史的时代，开辟了世界无产阶级社会主义革命的新纪元，标志着人类历史开始进入了由资本主义向社会主义转变的进程。</p><h4>6.5开始进入新民主主义革命</h4><p>五四运动的爆发</p><h4>6.6中国革命的两步走</h4><p>第一步：新民主主义革命任务</p><p>第二步：社会主义革命任务</p><h4>6.7新民主主义革命的总路线</h4><p>《在晋绥干部会议上的讲话》</p><h4>6.8革命的首要问题</h4><p>分清敌友，好统一战线！</p><h4>6.9走农村包围城市的，武装夺取政权道路的要求</h4><p>必须处理好土地革命、武装斗争、农村革命根据地建设三者之间的关系</p><h3>邓小平理论</h3><h4>10.1 邓小平时期的核心问题</h4><p>和平是东西问题、发展是南北问题（东西南北问题）; &nbsp;而发展是核心问题</p><h4>10.2邓小平思想形成的历史依据</h4><p>社会主义建设经验教训</p><h4>10.3邓小平思想形成的现实依据</h4><p>改革开放和现代化建设的实践</p><h4>10.4停止使用“以阶级斗争为纲”的口号</h4><p>1978 十一届三中全会，进入改革开放新时期，把全党的工作重点转移到社会主义现代化建设上来。</p><p>#《解放思想，实事求是，团结一致向前看》)</p><p>#提出了改革开放，是通过对毛汉泽东思想路线的拨乱反正中提出的伟大构想</p><h4>10.5邓小平理论的形成</h4><p>&quot;走自己的道路，建设有中国特色的社会主义&quot;是邓小平在十二大开幕词， 从此，“中国特色社会主义”成为我们党的全部理论和实践创建的主题。</p><h4>10.6邓小平理论形成轮廓阶段</h4><p>党的十三大，比较系统地论述了我国社会主义初级阶段理论</p><p>&quot;一个中心，两个基本点&quot;</p><p>&quot;三步走&quot; 战略：温饱-小康水平-基本实现现代化</p><h4>10.7邓小平理论开始走向成熟</h4><p>党的十四大，概括了中国特色社会主义理论的主要内容。</p><p>南方谈话，邓小平理论开始走向成熟</p><h4>10.8写入党章与载入宪法</h4><p>十五写入党章</p><p>1999载入宪法</p><h4>10.9社会主义的本质</h4><p>解放生产力，发展生产力，消灭剥削，消除两极分化，最终达到共同富裕（生产关系）</p><h4>10.10两条根本原则</h4><p><strong>两条根本原则： <strong><strong>坚持公有制又完善和发展公有制</strong></strong>，社会主义公有制经济为主体，二是共同富裕(优越性)</strong></p><h4>10.11如何搞清楚什么是社会主义，怎样建设社会主义的关键</h4><p>要在社会主义的基本制度下进一步认清社会主义本质</p><h4>10.12抓住机遇，发展自己</h4><p>关键是发展经济</p><h4>10.13邓小平活的灵魂</h4><p>解放思想，实事求是是邓小平活的灵魂（精髓）</p><h4>10.14第一次把“社会主义初级阶段”作为国情来把握</h4><p>社会主义本身是共产主义的初级阶段，而我们中国又处在社会主义的初级阶段，就是不发达的阶段</p><h4>10.15 社会主义初级阶段特指</h4><p>我国在生产力落后、商品经济不发达的条件下建设社会主义必然要经历的特定阶段</p><h4>10.16 社会主义初级阶段的论断</h4><p>包括两层含义：</p><ol class=\" list-paddingleft-2\"><li><p>我国已经进入 ，必须坚持而不能离开社会主义（定性）</p></li><li><p>我国的 还处在不发达的阶段，必须正视而不能超越社会主义初级阶段（定量）</p></li></ol><h4>10.17 &quot;一个中心，两个基本点&quot;</h4><p>领导和团结全国各族人民, 以经济建设为中心（兴国之要）、坚持四项基本原则（立国之本）、坚持改革开放（强国之路），自力更生，艰苦创业，把我国建设为富强，民主，文明的社会主义现代化</p><h4>10.18 如何坚持“一个中心，两个基本点”</h4><p>1）围绕<strong>经济建设这一中心</strong></p><p>2）坚持<strong>四项基本原则</strong></p><p>3）党的基本是党和国家的生命线，人民的幸福线</p><h4>10.19 社会主义的根本任务问题</h4><p>&quot;以经济建设为中心&quot;回答了这个问题</p><h4>10.20社会主义初级阶段我国人民的奋斗目标</h4><p>建成富强民主文明的社会主义现代化国家</p><h4>10.21 社会发展根本决定性因素</h4><p>生产力</p><h4>10.22社主义的根本任务</h4><p>发展生产力</p><h4>10.23 社会主义发展的动力</h4><p>改革开放是社会主义发展的<strong>直接动力</strong>，而<strong>根本动力</strong>是社会主义的基本矛盾运动</p><h4>10.24改革开放初期，社会主义的矛盾</h4><p>人民日益增长的物质文化 需要再同落后的社会生产之间的矛盾</p><h4>10.25改革开放是新时期最鲜明的特点</h4><p>改革开放使中国人民逐步富起来</p><h4>10.26市场经济</h4><p>市场经济:只是一种手段,没有制度属性</p><p>社会主义市场经济:有制度属性,既有社会主义制度特征,又有市场经济一般特征</p><h4>10.27社会主义市场经济独有特征</h4><p>①所有制-公有制为主体多种所有制共同发展;</p><p>②按劳分配为主体,多种分配制度并存;</p><p>③宏观调控</p><h4>10.28 &quot;两手抓&quot;两手都要硬&quot;</h4><p>一手物质文明 、一手精神文明</p><h4>10.29邓小平理论的内涵</h4><p>是马克思列宁主义基本原理与当代中国实际和时代特征相结合的产物</p><p>是马克思列宁主义、毛泽东思想的继承和发展</p><p>是全党全国人民集体智慧的结晶</p><h4>10.30 邓小平理论的历史地位</h4><p>1）马史思列宁主义、毛泽东思想的继承与发展</p><p>2）中国特色社会主义理论体系的开篇之余</p><p>3）改革开放和社会地主义现代化建设的科学指南</p><h4>10.31中国的问题的关键在于党</h4><h3>三个代表</h3><h4>20.1 三个代表形成的现实依据</h4><p>世情、国情、党情的新变化</p><h4>20.2 直接关系到党和国家的前途命运</h4><p>“江泽民指出，建设一个什么样的党，怎样建设党”</p><h4>20.3 三个代表的<strong>形成条件：</strong></h4><p>1）在对冷战结束后国际局势科学判断的基础上形成的</p><p>2）在科学判断党的历史方位和总结历史经验的基础上提出来的</p><p>3）在建设中国特色社会主义伟大实践的基础上形成的</p><h4>20.4全面阐述了&quot;三个代表&quot;重要思想的科学内涵和基本内容</h4><p>庆祝中国共产党成立80周年大会</p><h4>20.5三个代表写入党章</h4><p>十六大</p><h4>20.6三个代表的核心观点</h4><p>中国共产党代表中国的<strong>先进生产力</strong>的发展要求、<strong>先进文化</strong>前进的方向、 代表<strong>最广大人民</strong>的根本利益</p><h4>20.7 三个代表的主要内容</h4><p>1）党执政兴国的第一要务是发展</p><p>2）建立社会主义市场经济体制</p><p>3）全面建设小康社会</p><p>4）建成社会主义政治文明</p><h4>20.8依法治国</h4><p>广大人民群众在党的领导下（主体），依照宪法和法律规定（所依之法）、管理国家事务（客体），逐步实现社会主义民主的制度化、法律化</p><h4>20.9 三个代表的意义</h4><p>1、中特理论体系的接续发展</p><p>2）加强和改进党建设，推进中国特色社会主义事业的强大理论武器</p><h4>20.10 “本基源”</h4><p>&quot;本&quot;，&quot;基&quot;，&quot;源&quot; 说到底是？ 人民群众的支持和拥护</p><h3>科学发展观</h3><h4>30.1科学发展观</h4><p>第一要义是发展、核心立场是以人为本、基本要求是全面协调可持续、根本方法是统筹兼顾</p><p>30.2<strong>重要支撑</strong></p><p>科技进步和创新</p><h4>30.3 重大决策</h4><p>实施创新驱动发展战略是重大决策</p><p><br/></p>','2022-03-06 21:17:22',1,NULL,'2022-09-09',-1,0),(272,1,'Vue教程','<h3>[<em>1</em>] Vue的简介</h3><ul class=\" list-paddingleft-2\"><li><p>Vue 是一套用来动态构建用户界面的渐进式JavaScript框架</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>构建用户界面：把数据通过某种办法变成用户界面</p></li><li><p>渐进式：Vue可以自底向上逐层的应用，简单应用只需要一个轻量小巧的核心库，复杂应用可以引入各式各样的Vue插件</p></li></ul><li><p>作者：尤雨溪</p></li></ul><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16587173272631658717327053.png\" alt=\"\"/></p><h4>[<em>1.1</em>] Vue的特点</h4><ul class=\" list-paddingleft-2\"><li><p>遵循MVVM模式</p></li><li><p>编码简洁，体积小，运行效率高，适合移动/PC端开发</p></li><li><p>它本身只关注 UI，可以引入其它第三方库开发项目</p></li><li><p>采用<strong>组件化</strong>模式，提高代码复用率、且让代码更好维护</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16587175256151658717525534.png\" alt=\"\"/></p></li><li><p><strong>声明式</strong>编码，让编码人员无需直接操作DOM，提高开发效率</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16587175488341658717548750.png\" alt=\"\"/></p></li><li><p>使用<strong>虚拟DOM**** <strong>和</strong> Diff算法</strong>，尽量复用DOM节点</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16587182314601658718231307.png\" alt=\"\"/></p></li></ul><h4>[<em>1.2</em>] Vue与其它框架</h4><ul class=\" list-paddingleft-2\"><li><p>借鉴 angular 的 模板 和 数据绑定 技术</p></li><li><p>借鉴 react 的 组件化 和 虚拟DOM 技术</p></li></ul><h4>[<em>1.3</em>] Vue周边库</h4><ul class=\" list-paddingleft-2\"><li><p>vue-cli：vue 脚手架</p></li><li><p>vue-resource(axios)：ajax 请求</p></li><li><p>vue-router：路由</p></li><li><p>vuex：状态管理（它是 vue 的插件但是没有用 vue-xxx 的命名规则）</p></li><li><p>vue-lazyload：图片懒加载</p></li><li><p>vue-scroller：页面滑动相关</p></li><li><p>mint-ui：基于 vue 的 UI 组件库（移动端）</p></li><li><p>element-ui：基于 vue 的 UI 组件库（PC 端）</p></li></ul><h3>[<em>2</em>] 初识Vue（Vue模板）</h3><p><strong>前置工作</strong></p><ol class=\" list-paddingleft-2\"><li><p>给浏览器安装 <a href=\"https://cn.vuejs.org/v2/guide/installation.html#Vue-Devtools\">Vue Devtools</a> 插件</p></li><li><p>标签引入Vue包</p></li><li><p>（可选）阻止vue在启动时生成生产提示Vue.config.productionTip = false</p></li></ol><p>**初识Vue （Vue模板） **</p><ol class=\" list-paddingleft-2\"><li><p>想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象</p></li><li><p>root 容器里的代码依然符合html规范，只不过混入了一些特殊的Vue语法</p></li><li><p>root 容器里的代码被称为Vue模板</p></li><li><p>Vue 实例与容器是一一对应的</p></li><li><p>真实开发中只有一个Vue实例，并且会配合着组件一起使用</p></li></ol><h3>[<em>3</em>] 数据绑定</h3><p>单向绑定v-bind数据只能从 data 流向页面<br/> 双向绑定v-model数据不仅能从 data 流向页面，还可以从页面流向 data</p><h4>[<em>3.1</em>] 单向绑定</h4><p>插值与v-bind:</p><p>插值：{{xxx}}中的 xxx 要写 js 表达式，且 xxx 可以自动读取到data中的所有属性，当然也可以是windows中的方法与变量 注意区分：js 表达式（有返回值） 和 js代码（语句）</p><p>v-bind: &nbsp;如果属性值想要动态地改变或说想要在标签中像插值一样动态地从Vue中获取数据动态地显示，那么就是用v-bind: ，可以简写:XXX（ 比如v-bind:href=&quot;url&quot; &nbsp;=&gt; :href=&quot;url&quot;）,表达双引号内写的是表达式。</p><pre>&lt;!DOCTYPE&nbsp;html&gt;&nbsp;&lt;html&gt;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;UTF-8&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;X-UA-Compatible&quot;&nbsp;content=&quot;IE=edge&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Document&lt;/title&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id=&quot;app&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;{{&nbsp;name&nbsp;}}&lt;/h1&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;:href=&quot;url&quot;&gt;点我跳转&gt;&gt;&nbsp;&lt;/a&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;Vue({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el:&nbsp;&quot;#app&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;小庄&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;&quot;https://baidu.com&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;&nbsp;&lt;/body&gt;&nbsp;&lt;/html&gt;</pre><p></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16587214669901658721466765.png\" alt=\"\"/></p><blockquote><p>一旦data中的数据发生变化，那么模板中用到该数据的地方也会自动更新</p></blockquote><h4>[<em>3.2</em>] 双向绑定</h4><p><code>v-model</code> 指令可以实现双向绑定，v-model应用在表单元素的<code>value</code> 属性上，不像v-bind可以用到任何标签的任何属性上。</p><p>v-model普通写法：<code>&lt;input v-model:value=&quot;name&quot; /&gt;</code></p><p>v-model简写形式：<code>&lt;input v-model=&quot;name&quot; /&gt;</code></p><pre>&lt;!DOCTYPE&nbsp;html&gt;&nbsp;&lt;html&gt;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;UTF-8&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;X-UA-Compatible&quot;&nbsp;content=&quot;IE=edge&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Document&lt;/title&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id=&quot;app&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;双向绑定：&lt;input&nbsp;v-model=&quot;name&quot;&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;双向绑定-简写：&lt;input&nbsp;v-model:value=&quot;name&quot;&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;Vue({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el:&nbsp;&quot;#app&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;小庄&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;&nbsp;&lt;/body&gt;&nbsp;&lt;/html&gt;</pre><p></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16587214936031658721493145.png\" alt=\"\"/></p><h3>[<em>4</em>] el与data的两种写法</h3><p>**<code>el</code>****有2种写法 &nbsp;**</p><ul class=\" list-paddingleft-2\"><li><p>创建Vue实例对象的时候配置el属性</p></li><li><p>先创建Vue实例，随后再通过vm.$mount(&#39;#root&#39;)指定el的值</p></li><li><p>演示：el的两种写法</p></li></ul><pre>&lt;!DOCTYPE&nbsp;html&gt;&nbsp;&lt;html&gt;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;UTF-8&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;X-UA-Compatible&quot;&nbsp;content=&quot;IE=edge&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Document&lt;/title&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id=&quot;app&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;{{name&nbsp;}}&lt;/h1&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;vm&nbsp;=&nbsp;new&nbsp;Vue({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//el:&nbsp;&quot;#app&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;小庄&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(()&nbsp;=&gt;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vm.$mount(&quot;#app&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;500)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;&nbsp;&lt;/body&gt;&nbsp;&lt;/html&gt;</pre><p></p><p>**<code>data</code>****有2种写法 &nbsp;**</p><ul class=\" list-paddingleft-2\"><li><p>对象式：data： { }</p></li><li><p>函数式：data() { return { } }</p><blockquote><p>如何选择：目前哪种写法都可以，以后到组件时，data必须使用函数，否则会报错<br/> 一个重要的原则<br/> 由Vue管理的函数，一定<strong>不要写箭头函数</strong>，否则 this 就不再是Vue实例了</p></blockquote></li><li><p>演示：data的两种写法</p></li></ul><pre>&lt;!DOCTYPE&nbsp;html&gt;&nbsp;&lt;html&gt;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;UTF-8&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;X-UA-Compatible&quot;&nbsp;content=&quot;IE=edge&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Document&lt;/title&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id=&quot;app&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;{{name&nbsp;}}&lt;/h1&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;vm&nbsp;=&nbsp;new&nbsp;Vue({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el:&nbsp;&quot;#app&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;data:&nbsp;{&nbsp;//第一种&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;小庄&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;function&nbsp;()&nbsp;{&nbsp;//第二种：只要涉及组件的开发必须使用这一种，且不能使用前头函数！！&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;小庄&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;&nbsp;&lt;/body&gt;&nbsp;&lt;/html&gt;</pre><p></p><h3>[<em>5</em>] MVVM模型</h3><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16587324025451658732402317.png\" alt=\"\"/></p><p>MVVM模型</p><ul class=\" list-paddingleft-2\"><li><p>M：模型 Model，data中的数据</p></li><li><p>V：视图 View，模板代码</p></li><li><p>VM：视图模型 ViewModel，Vue实例</p></li></ul><h3>[<em>+</em>] Vue中的数据代理</h3><p>数据代理更像是创建快捷方式的一种行为或说软链接</p><p><code>Object.defineProperty(...)</code>：下面解析，对person中的age进行数据代理，即<code>person.age =&gt; number</code> &nbsp;我们可以在该defineProperty内写<code>get</code> 与<code>set</code>方法，当我们进行<code>person.age = 18</code> 时，如果我们没有写set方法，这样操作是无意义的，如果我们写了，进行赋值时在set方法中就会被调用，然后只需number = value即可实现绑定赋值。</p><pre>let&nbsp;number&nbsp;=&nbsp;18&nbsp;let&nbsp;person&nbsp;=&nbsp;{&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;张三&#39;,&nbsp;&nbsp;&nbsp;sex:&nbsp;&#39;男&#39;,&nbsp;}&nbsp;Object.defineProperty(person,&nbsp;&#39;age&#39;,&nbsp;{&nbsp;&nbsp;&nbsp;//&nbsp;value:18,&nbsp;&nbsp;&nbsp;//&nbsp;enumerable:true,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;控制属性是否可以枚举，默认值是false&nbsp;&nbsp;&nbsp;//&nbsp;writable:true,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;控制属性是否可以被修改，默认值是false&nbsp;&nbsp;&nbsp;//&nbsp;configurable:true&nbsp;&nbsp;//&nbsp;控制属性是否可以被删除，默认值是false&nbsp;&nbsp;&nbsp;//&nbsp;当有人读取person的age属性时，get函数(getter)就会被调用，且返回值就是age的值&nbsp;&nbsp;&nbsp;get()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;有人读取age属性了&#39;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;number&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;//&nbsp;当有人修改person的age属性时，set函数(setter)就会被调用，且会收到修改的具体值&nbsp;&nbsp;&nbsp;set(value)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;有人修改了age属性，且值是&#39;,&nbsp;value)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;=&nbsp;value&nbsp;&nbsp;&nbsp;}&nbsp;})&nbsp;//&nbsp;console.log(Object.keys(person))&nbsp;console.log(person)</pre><p></p><p>我们声明的data，将之创建快捷方式到vm._data; data中的属性 =&gt; vm.&lt;data中的属性&gt;。</p><p>发现：我们可以在插值（<code>{{}}</code>）中使用vm中的属性和原型中的属性。如果我们不把data中的属性放在vm上，然后我们需要在DOM模板上<code>{{ _data.&lt;属性名&gt;}}</code> &nbsp;而不是<code>{{ 属性名 }}</code></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16587335373741658733537201.png\" alt=\"\"/></p><h3>[<em>6</em>] methods 方法的声明</h3><ol class=\" list-paddingleft-2\"><li><p>使用<strong>v-on:xxx</strong>或@xxx绑定事件，其中 xxx 是事件名</p></li><li><p>事件的回调方法是 methods对象中的方法，在methods中声明的方法最终会在vm上</p></li><li><p>methods中配置的函数，不要用箭头函数，否则 this 就不是vm了</p></li><li><p>methods中配置的函数，都是被 Vue所管理的函数，this 的指向是<code>vm</code>或<code>组件实例对象</code></p></li></ol><pre>&lt;!DOCTYPE&nbsp;html&gt;&nbsp;&lt;html&gt;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;UTF-8&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;X-UA-Compatible&quot;&nbsp;content=&quot;IE=edge&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Document&lt;/title&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id=&quot;app&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button&nbsp;v-on:click=&quot;showMsg()&quot;&gt;开始会话&lt;/button&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;vm&nbsp;=&nbsp;new&nbsp;Vue({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el:&nbsp;&quot;#app&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;function&nbsp;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;大聪明&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMsg()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(this.name&nbsp;+&nbsp;&quot;，吃饭了吗？&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;&nbsp;&lt;/body&gt;&nbsp;&lt;/html&gt;</pre><p></p><h3>[<em>7</em>] 事件</h3><p>说到<code>事件</code>,那么就要提到<code>event</code>了，事件触发后，如何获取呢？</p><p>我们只需要<code>&lt;button v-on:click=&quot;showMsg($event)&quot;&gt;开始会话&lt;/button&gt;</code> ，即使用<code>$event</code> 作为参数传入即可~</p><h4>[<em>7.1</em>] 事件修饰符</h4><ol class=\" list-paddingleft-2\"><li><p>prevent 阻止默认事件（常用）</p></li><ul class=\" list-paddingleft-2\"><li><p>演示：<code>v-on:click.prevent=&quot;...&quot;</code></p></li></ul></ol><pre>&lt;!DOCTYPE&nbsp;html&gt;&nbsp;&lt;html&gt;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;UTF-8&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;X-UA-Compatible&quot;&nbsp;content=&quot;IE=edge&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Document&lt;/title&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id=&quot;app&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;https://www.baidu.com&quot;&nbsp;v-on:click.prevent=&quot;showMsg()&quot;&gt;默认事件&lt;/a&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;vm&nbsp;=&nbsp;new&nbsp;Vue({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el:&nbsp;&quot;#app&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;function&nbsp;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMsg(e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;大聪明，干饭了吗？&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;我吃了，你呢？&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;&nbsp;&lt;/body&gt;&nbsp;&lt;/html&gt;</pre><p></p><ol class=\" list-paddingleft-2\"><li><p>stop 阻止事件冒泡（常用）</p></li><ul class=\" list-paddingleft-2\"><li><p>演示: <code>v-on:click.stop=&quot;...&quot;</code></p></li></ul></ol><pre>&lt;!DOCTYPE&nbsp;html&gt;&nbsp;&lt;html&gt;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;UTF-8&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;X-UA-Compatible&quot;&nbsp;content=&quot;IE=edge&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Document&lt;/title&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id=&quot;app&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;v-on:click=&quot;response()&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;v-on:click.stop=&quot;showMsg()&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;大聪明&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;vm&nbsp;=&nbsp;new&nbsp;Vue({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el:&nbsp;&quot;#app&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;function&nbsp;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMsg(e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;大聪明，干饭了吗？&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;我吃了，你呢？&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.box&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;200px;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;100px;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding:&nbsp;20px;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;blue;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.box&gt;div&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;100%;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;100%;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;aqua;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/style&gt;&nbsp;&lt;/body&gt;&nbsp;&lt;/html&gt;</pre><p></p><ol class=\" list-paddingleft-2\"><li><p>once 事件只触发一次（常用）</p></li><ul class=\" list-paddingleft-2\"><li><p>演示：<code>v-on:click.once==&quot;...&quot;</code></p></li></ul></ol><pre>&lt;!DOCTYPE&nbsp;html&gt;&nbsp;&lt;html&gt;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;UTF-8&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;X-UA-Compatible&quot;&nbsp;content=&quot;IE=edge&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Document&lt;/title&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id=&quot;app&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button&nbsp;v-on:click.once=&quot;showMsg()&quot;&gt;默认事件&lt;/button&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;vm&nbsp;=&nbsp;new&nbsp;Vue({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el:&nbsp;&quot;#app&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;function&nbsp;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMsg(e)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;大聪明，干饭了吗？&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;我吃了，你呢？&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;&nbsp;&lt;/body&gt;&nbsp;&lt;/html&gt;</pre><p></p><ol class=\" list-paddingleft-2\"><li><p>capture 使用事件的捕获模式</p></li><li><p>self 只有event.target是当前操作的元素时才触发事件</p></li><li><p>passive 事件的默认行为立即执行，无需等待事件回调执行完毕</p></li></ol><h4>[<em>7.2</em>] 键盘事件</h4><blockquote><p>键盘上的每个按键都有自己的<code>名称</code>和<code>编码</code>，例如：Enter（13）。而Vue还对一些常用按键起了别名方便使用</p></blockquote><p><strong>Vue中常用的按键别名</strong> 回车enter<br/> 删除delete捕获“删除”和“退格”键<br/> 退出esc<br/> 空格space<br/> 换行tab特殊，必须配合keydown去使用<br/> 上up<br/> 下down<br/> 左left<br/> 右right</p><p><strong>Vue未提供别名的按键：</strong></p><ul class=\" list-paddingleft-2\"><li><p>可以使用按键原始的key 值（比如tab、enter）去绑定，但注意要转为kebab-case（多单词小写短横线写法）,比如Caps键，key值为<code>CapsLock </code> 就要转为<code>caps-lock</code> ，使用时<code>v-on:keyup.caps-lock=&quot;...&quot;</code></p></li><li><p>也可以直接使用<code>keyCode</code>来代替,比如Caps键的keyCode为20,我们也可以这样<code>v-on:keyup.20=&quot;...&quot;</code> , 和 <code>v-on:keyup.caps-lock=&quot;...&quot;</code> 是一样的。</p></li></ul><p><strong>系统修饰键</strong>（用法特殊）：ctrl、alt、shift、meta（meta就是win键）</p><ul class=\" list-paddingleft-2\"><li><p>按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发<br/> 指定 ctr+y 使用 @keyup.ctr.y=&quot;...&quot; &nbsp;，如果直接 @keyup.ctr=&quot;...&quot;是没效果的。</p><p>注：特殊修饰键的 @keyup与@keydown可能有区别</p></li></ul><blockquote><p>Vue.config.keyCodes.自定义键名 = 键码，可以去定制按键别名</p></blockquote><h3>[<em>8</em>] 计算属性</h3><p><strong>性能区别：</strong></p><p>计算属性完全可以使用方法替换，而计算属性又可以在DOM模板中代替，但这不符合Vue的风格要求，但如果使用方法，是没有缓存机制的，即只要我们DOM刷新 ，在DOM中使用n次，就会调用n次。</p><p>而如果使用计算属性，有缓存机制，只有计算属性依赖的属性变化了，才会重新计算。</p><p><strong>使用区别：</strong></p><p>函数：</p><pre>全名：{{&nbsp;fullName()&nbsp;}}&nbsp;&lt;br&nbsp;/&gt;&nbsp;全名：{{&nbsp;fullName()&nbsp;}}&nbsp;&lt;br&nbsp;/&gt;&nbsp;全名：{{&nbsp;fullName()&nbsp;}}&nbsp;&lt;br&nbsp;/&gt;</pre><p></p><p>计算属性：跟data属性的用法一样</p><pre>全名：{{&nbsp;fullName&nbsp;}}&nbsp;&lt;br&nbsp;/&gt;&nbsp;全名：{{&nbsp;fullName&nbsp;}}&nbsp;&lt;br&nbsp;/&gt;&nbsp;全名：{{&nbsp;fullName&nbsp;}}&nbsp;&lt;br&nbsp;/&gt;</pre><p></p><p><strong>使用方法：</strong></p><pre>&lt;!DOCTYPE&nbsp;html&gt;&nbsp;&lt;html&gt;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;UTF-8&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;X-UA-Compatible&quot;&nbsp;content=&quot;IE=edge&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Document&lt;/title&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id=&quot;app&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;姓：&lt;input&nbsp;v-model:value=&quot;firstName&quot;&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名：&lt;input&nbsp;v-model:value=&quot;lastName&quot;&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全名：{{&nbsp;fullName&nbsp;}}&nbsp;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全名：{{&nbsp;fullName&nbsp;}}&nbsp;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全名：{{&nbsp;fullName&nbsp;}}&nbsp;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;vm&nbsp;=&nbsp;new&nbsp;Vue({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el:&nbsp;&quot;#app&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstName:&nbsp;&#39;zhuang&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastName:&nbsp;&#39;jie&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test:&nbsp;&quot;&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;computed:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//简写：如果确定不写set，那么就可以用简写&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fullName()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;fullName计算属性函数被调用了~&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this.firstName&nbsp;+&nbsp;&quot;-&quot;&nbsp;+&nbsp;this.lastName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传统写法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;fullName:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this.firstName&nbsp;+&nbsp;&quot;-&quot;&nbsp;+&nbsp;this.lastName;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(value)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.firstName&nbsp;=&nbsp;value.split(&quot;-&quot;)[0]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.lastName&nbsp;=&nbsp;value.split(&quot;-&quot;)[1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;&nbsp;&lt;/body&gt;&nbsp;&lt;/html&gt;</pre><p><br/></p>','2022-07-25 23:03:05',1,NULL,'2022-07-25',1,0),(275,1,'linux su命令错误 无法执行 /bin.zsh: 没有那个文件或目录','<p style=\"margin: 13px auto; padding: 0px; font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; letter-spacing: 0.015em; font-feature-settings: &quot;tnum&quot;; font-variant-numeric: tabular-nums; font-variant-east-asian: normal; line-height: 1.8; word-break: break-word; color: rgb(35, 38, 59); white-space: normal; background-color: rgba(255, 255, 255, 0.9);\">sudo vi /etc/passwd</p><p style=\"margin: 13px auto; padding: 0px; font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; letter-spacing: 0.015em; font-feature-settings: &quot;tnum&quot;; font-variant-numeric: tabular-nums; font-variant-east-asian: normal; line-height: 1.8; word-break: break-word; color: rgb(35, 38, 59); white-space: normal; background-color: rgba(255, 255, 255, 0.9);\"><span style=\"letter-spacing: 0.015em;\"><img src=\"/fileUpload/image/20220728/1658984733911016467.png\"/></span></p><p style=\"margin: 13px auto; padding: 0px; font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; letter-spacing: 0.015em; font-feature-settings: &quot;tnum&quot;; font-variant-numeric: tabular-nums; font-variant-east-asian: normal; line-height: 1.8; word-break: break-word; color: rgb(35, 38, 59); white-space: normal; background-color: rgba(255, 255, 255, 0.9);\"><span style=\"letter-spacing: 0.015em;\">&nbsp;改为&nbsp;&nbsp;</span><span style=\"letter-spacing: 0.015em; margin: 0px; padding: 0px; color: rgb(255, 0, 0);\">bash</span></p><p><br/></p>','2022-07-28 13:05:37',2,0,'2022-07-28',1,0),(276,1,'江湖全都是高手','<p>微服务架构图</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16579568498541657956849135.png\" alt=\"\"/></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16579569800931657956979894.png\" alt=\"\"/></p><h3>[<em>1</em>] 环境的搭建</h3><h4>[<em>1.1</em>] linux</h4><p>ip: 192.168.87.101</p><p>配置源：</p><pre>#&nbsp;备份原yum源\r\n\r\nmv&nbsp;/etc/yum.repos.d/CentOS-Base.repo&nbsp;/etc/yum.repos.d/CentOS-Base.repo.backup\r\n#&nbsp;使用新yum源\r\ncurl&nbsp;-o&nbsp;/etc/yum.repos.d/CentOS-Base.repo&nbsp;http://mirrors.163.com/.help/CentOS7-Base-163.repo\r\n#&nbsp;生成缓存\r\nyum&nbsp;makecache</pre><pre>关闭防火墙</pre><pre>#1、查看防火墙状态\r\nfirewall-cmd&nbsp;--state\r\n#2、停止firewall\r\nsystemctl&nbsp;stop&nbsp;firewalld.service\r\n#3、禁止firewall开机启动\r\nsystemctl&nbsp;disable&nbsp;firewalld.service</pre><p>虚拟机docker的安装：</p><pre>#卸载系统之前的docker&nbsp;\r\nsudo&nbsp;yum&nbsp;remove&nbsp;docker&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-client&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-client-latest&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-common&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-latest&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-latest-logrotate&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-logrotate&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-engine\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\nsudo&nbsp;yum&nbsp;install&nbsp;-y&nbsp;yum-utils\r\n\r\n#&nbsp;配置镜像\r\nsudo&nbsp;yum-config-manager&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;--add-repo&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;https://download.docker.com/linux/centos/docker-ce.repo\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\nsudo&nbsp;yum&nbsp;install&nbsp;docker-ce&nbsp;docker-ce-cli&nbsp;containerd.io\r\n\r\nsudo&nbsp;systemctl&nbsp;start&nbsp;docker\r\n#&nbsp;设置开机自启动\r\nsudo&nbsp;systemctl&nbsp;enable&nbsp;docker\r\n\r\ndocker&nbsp;-v\r\n#&nbsp;配置镜像加速\r\nsudo&nbsp;mkdir&nbsp;-p&nbsp;/etc/docker\r\nsudo&nbsp;tee&nbsp;/etc/docker/daemon.json&nbsp;&lt;&lt;-&#39;EOF&#39;\r\n{\r\n&nbsp;&nbsp;&quot;registry-mirrors&quot;:&nbsp;[&quot;https://chqac97z.mirror.aliyuncs.com&quot;]\r\n}\r\nEOF\r\n\r\nsudo&nbsp;systemctl&nbsp;daemon-reload\r\nsudo&nbsp;systemctl&nbsp;restart&nbsp;docker</pre><h4>[<em>1.2</em>] docker中安装mysql</h4><pre>sudo&nbsp;docker&nbsp;pull&nbsp;mysql:5.7\r\n\r\n#&nbsp;--name指定容器名字&nbsp;-v目录挂载&nbsp;-p指定端口映射&nbsp;&nbsp;-e设置mysql参数&nbsp;-d后台运行\r\nsudo&nbsp;docker&nbsp;run&nbsp;-p&nbsp;3306:3306&nbsp;--name&nbsp;mysql&nbsp;\\\r\n-v&nbsp;/mydata/mysql/log:/var/log/mysql&nbsp;\\\r\n-v&nbsp;/mydata/mysql/data:/var/lib/mysql&nbsp;\\\r\n-v&nbsp;/mydata/mysql/conf:/etc/mysql&nbsp;\\\r\n-e&nbsp;MYSQL_ROOT_PASSWORD=3333&nbsp;\\\r\n-d&nbsp;mysql:5.7\r\n\r\n#查看docker中mysql的状态\r\ndocker&nbsp;ps&nbsp;-a\r\n\r\n\r\n#&nbsp;进入已启动的容器\r\ndocker&nbsp;exec&nbsp;-it&nbsp;mysql&nbsp;bin/bash\r\n#&nbsp;退出进入的容器\r\nexit;\r\n\r\n#因为有目录映射，所以我们可以直接在镜像外执行\r\nvi&nbsp;/mydata/mysql/conf/my.conf&nbsp;\r\n\r\n[client]\r\ndefault-character-set=utf8\r\n[mysql]\r\ndefault-character-set=utf8\r\n[mysqld]\r\ninit_connect=&#39;SET&nbsp;collation_connection&nbsp;=&nbsp;utf8_unicode_ci&#39;\r\ninit_connect=&#39;SET&nbsp;NAMES&nbsp;utf8&#39;\r\ncharacter-set-server=utf8\r\ncollation-server=utf8_unicode_ci\r\nskip-character-set-client-handshake\r\nskip-name-resolve\r\n\r\n\r\ndocker&nbsp;restart&nbsp;mysql</pre><p>设置docker启动时mysql启动</p><pre>docker&nbsp;update&nbsp;mysql&nbsp;--restart=always</pre><h4>[<em>1.3</em>] redis的安装</h4><p>如果直接挂载的话docker会以为挂载的是一个目录，所以我们先创建一个文件然后再挂载，在虚拟机中。</p><pre>#&nbsp;在虚拟机中\r\nmkdir&nbsp;-p&nbsp;/mydata/redis/conf\r\ntouch&nbsp;/mydata/redis/conf/redis.conf\r\n\r\ndocker&nbsp;pull&nbsp;redis\r\n\r\ndocker&nbsp;run&nbsp;-p&nbsp;6379:6379&nbsp;--name&nbsp;redis&nbsp;\\\r\n-v&nbsp;/mydata/redis/data:/data&nbsp;\\\r\n-v&nbsp;/mydata/redis/conf/redis.conf:/etc/redis/redis.conf&nbsp;\\\r\n-d&nbsp;redis&nbsp;redis-server&nbsp;/etc/redis/redis.conf\r\n\r\n#&nbsp;直接进去redis客户端。\r\ndocker&nbsp;exec&nbsp;-it&nbsp;redis&nbsp;redis-cli</pre><p>默认是不持久化的。在配置文件中输入appendonly yes，就可以aof持久化了。修改完docker restart redis，docker -it redis redis-cli</p><pre>vim&nbsp;/mydata/redis/conf/redis.conf\r\n#&nbsp;插入下面内容\r\nappendonly&nbsp;yes\r\n保存\r\n\r\ndocker&nbsp;restart&nbsp;redis</pre><p>设置docker启动时redis启动</p><pre>docker&nbsp;update&nbsp;redis&nbsp;--restart=always</pre><h4>[<em>1.4</em>] IDEA开发环境</h4><p><strong>maven</strong></p><p>在settings中配置阿里云镜像，配置jdk1.8。这个基本都配置过，不贴了</p><p>IDEA安装插件lombok，mybatisX。IDEA设置里配置好maven</p><p><strong>vsCode</strong></p><p>下载vsCode用于前端管理系统。在vsCode里安装插件。</p><ul class=\" list-paddingleft-2\"><li><p>Auto Close Tag</p></li><li><p>Auto Rename Tag</p></li><li><p>Chinese</p></li><li><p>ESlint</p></li><li><p>HTML CSS Support</p></li><li><p>HTML Snippets</p></li><li><p>JavaScript ES6</p></li><li><p>Live Server</p></li><li><p>open in brower</p></li><li><p>Vetur</p></li></ul><h3>[<em>2</em>] 后端项目的初始化</h3><p>（1）在github上创建一个仓库:</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583061844071658306183644.png\" alt=\"\"/></p><p>（2）在IDEA中New–Project from version control–git–复制刚才项目的地址。</p><p>（3）以订单模块为例，依次创建出以下服务模块</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583072710211658307270895.png\" alt=\"\"/></p><ul class=\" list-paddingleft-2\"><li><p>商品服务product</p></li><li><p>存储服务ware</p></li><li><p>订单服务order</p></li><li><p>优惠券服务coupon</p></li><li><p>用户服务member</p></li></ul><p>共同点：</p><ul class=\" list-paddingleft-2\"><li><p>导入web和openFeign</p></li><li><p>group：com.atguigu.gulimall</p></li><li><p>Artifact：gulimall-XXX</p></li><li><p>每一个服务，<a href=\"http://xn--com-k82e60c.atguigu.gulimall.XXX\">包名com.atguigu.gulimall.XXX</a>{product/order/ware/coupon/member}</p></li><li><p>模块名：gulimall-XXX</p></li></ul><p>（4）从某个项目粘贴个pom.xml粘贴到项目目录，修改为</p><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project&nbsp;xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&nbsp;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n&nbsp;&nbsp;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0&nbsp;https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n&nbsp;&nbsp;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n&nbsp;&nbsp;&lt;groupId&gt;com.atguigu.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&lt;artifactId&gt;gulimall&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&nbsp;&nbsp;&lt;name&gt;gulimall&lt;/name&gt;\r\n&nbsp;&nbsp;&lt;description&gt;聚合服务&lt;/description&gt;\r\n\r\n&nbsp;&nbsp;&lt;properties&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n&nbsp;&nbsp;&lt;/properties&gt;\r\n\r\n&nbsp;&nbsp;&lt;packaging&gt;pom&lt;/packaging&gt;\r\n\r\n&nbsp;&nbsp;&lt;modules&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-coupon&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-member&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-order&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-product&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-ware&lt;/module&gt;\r\n&nbsp;&nbsp;&lt;/modules&gt;\r\n\r\n&lt;/project&gt;</pre><p>（5）然后右击pom.xml ，选择 “添加为Maven项目”</p><p>在maven窗口刷新，并点击+号，找到刚才的pom.xml添加进来，发现多了个root。这样比如运行root的clean命令，其他项目也一起clean了。</p><p>（6）修改总项目的<code>.gitignore</code>，把小项目里的不必要提交的文件在提交的时候忽略掉。</p><pre>**/mvnw\r\n**/mvnw.cmd\r\n**/.mvn\r\n**/target/\r\n.idea\r\n**/.gitignore</pre><p>在IDEA左下角的git中version control/local Changes，点击刷新看Unversioned Files，可以看到变化，全选最后剩下21个文件。</p><h3>[<em>3</em>] 数据库</h3><p><a href=\"https://github.com/18476305640/gulimall/tree/dev/%E6%96%87%E4%BB%B6%E4%BB%93%E5%82%A8/sql%E6%96%87%E4%BB%B6\">https://github.com/18476305640/gulimall/tree/dev/文件仓储/sql文件</a></p><p>分别对应创建即可。</p><h3>[<em>4</em>] 人人开源-后台管理系统</h3><h4>[<em>4.1</em>] 后台</h4><p>在 <code>gulimall</code> 项目根目录下，</p><p>git clone <a href=\"https://gitee.com/renrenio/renren-fast.git\">https://gitee.com/renrenio/renren-fast.git</a></p><p>然后删掉克隆下来的项目的 <code>.git</code> 目录。</p><p>添加：在gulimall根目录下的pom.xml中加入一个model</p><p><code>&lt;module&gt;renren-fast&lt;/module&gt;</code></p><p>右击右上角的模块，选择好</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583650073221658365006670.png\" alt=\"\"/></p><p>加载好后，<code>renren-fast</code> 就成了我们gulimall的一个模块了。</p><p>进入renren-fast模块</p><p>修改：</p><p>renren-fast\\src\\main\\resources\\application-dev.yml</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583651546661658365154499.png\" alt=\"\"/></p><p>这个<code>gulimall_admin</code> 数据库的表，请转阅 <code>renren-fast → db</code></p><h4>[<em>4.2</em>] 前台</h4><p>克隆项目：</p><p>git clone <a href=\"https://gitee.com/renrenio/renren-fast-vue.git\">https://gitee.com/renrenio/renren-fast-vue.git</a></p><p>步入 <code>renren-fast-vue</code></p><p>删掉 <code>.git</code></p><p>cmd 执行</p><pre>#&nbsp;(可以转阅：https://github.com/renrenio/renren-fast-vue/wiki/Getting-started)\r\n#&nbsp;克隆项目\r\ngit&nbsp;clone&nbsp;https://github.com/daxiongYang/renren-fast-vue.git\r\n\r\n#&nbsp;安装依赖\r\n#&nbsp;1\r\nnpm&nbsp;install&nbsp;-g&nbsp;cnpm&nbsp;--registry=https://registry.npm.taobao.org\r\n#&nbsp;2\r\ncnpm&nbsp;install\r\n\r\n#&nbsp;启动服务\r\nnpm&nbsp;run&nbsp;dev</pre><p>启动好项目后，且后端项目也已经启动后，访问前台：</p><p><a href=\"http://localhost:8001/#/login\">http://localhost:8001/#/login</a></p><p>账号/密码：admin/admin 进入后台：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583656030111658365602884.png\" alt=\"\"/></p><h4>[<em>4.3</em>] 代码生成及测试</h4><p>在项目<code>gulimall</code> 根目录下执行克隆：</p><pre>git&nbsp;clone&nbsp;https://gitee.com/renrenio/renren-generator.git</pre><p>把里面的.git文件删除，同样配置好pom.xml</p><pre>&lt;modules&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-coupon&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-member&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-order&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-product&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-ware&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;renren-fast&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;renren-generator&lt;/module&gt;\r\n&lt;/modules&gt;</pre><p>在maven中刷新一下, 等待把<code>renren-generator</code> 加入到项目成为模块。</p><p>然后修改一下<code>renren-generator</code>的文件：</p><p><code>renren-generator\\src\\main\\resources\\application.yml</code></p><pre>url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_pms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\nusername:&nbsp;root\r\npassword:&nbsp;3333</pre><p><code>renren-generator\\src\\main\\resources\\generator.properties</code></p><pre>#&nbsp;主目录\r\nmainPath=com.zhuangjie\r\n#包名\r\npackage=com.zhuangjie.gulimall\r\n#模块名\r\nmoduleName=product\r\n#作者\r\nauthor=zhuangjie\r\n#email\r\nemail=2119299531@qq.com\r\n#表前缀(类名不会包含表前缀)&nbsp;#&nbsp;我们的pms数据库中的表的前缀都pms\r\n#&nbsp;如果写了表前缀，每一张表对于的javaBean就不会添加前缀了\r\ntablePrefix=pms_</pre><p><code>renren-generator\\src\\main\\resources\\template\\Controller.java.vm</code></p><p>注释掉这与下面两行匹配的行，因为他是shiro的东西</p><pre>//需要注释&nbsp;\r\nimport&nbsp;org.apache.shiro.authz.annotation.RequiresPermissions;\r\n\r\n//这样的需要注释&nbsp;，有好几行\r\n@RequiresPermissions(&quot;****${moduleName}:$****{pathName}:list&quot;)</pre><p>然后启动一下 renren-generator项目，访问：<a href=\"http://localhost/\">http://localhost/</a></p><p>生成代码：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584136423941658413642104.png\" alt=\"\"/></p><p>将压缩包中的<code>main</code> 目录替换到 <code>gulimall-product</code> 中，因为gulimall_pms与product对应</p><p>解决报错，将生成的代码粘在项目中后，会报红的，我们先在gulimall项目右击创建一个maven的子模块：<code>gulimall-common</code></p><p>让 <code>gulimall-product</code> 模块引用 <code>gulimall-common</code>模块。</p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.zhuangjie.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&lt;/dependency&gt;</pre><p>在gulimall-common→ pom.xml：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;mybatisPLUS--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.baomidou&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;3.3.2&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--简化实体类，用@Data代替getset方法--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;1.18.8&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;httpcomponent包。发送http请求&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;httpcore&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;4.4.13&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;2.6&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;</pre><p>此时还是有报错，将兄弟模块 <code>renren-fast</code> 的部分文件放在<code>gulimall-common</code> 中</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584168414681658416841162.png\" alt=\"\"/></p><p>解决报错的参与点：</p><p>1）看报错的类导入了的是什么包下的</p><p>2）没有的文件可以从renren-fast中找</p><p>3）这些模块的jdk版本要弄好</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584170953981658417095161.png\" alt=\"\"/></p><p><strong>测试,</strong></p><p>在gulimall-common → pom.xml中添加依赖</p><pre>&lt;!--&nbsp;数据库驱动&nbsp;https://mvnrepository.com/artifact/mysql/mysql-connector-java&nbsp;--&gt;\r\n&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;8.0.17&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;!--tomcat里一般都带--&gt;\r\n&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;2.5&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;</pre><p>在product项目的resources目录下新建application.yml</p><pre>spring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_pms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><blockquote><p>classpath 和 classpath* 区别：classpath：只会到你的class路径中查找找文件;classpath*：不仅包含class路径，还包括jar文件中(class路径)进行查找\r\nclasspath*`的使用：当项目中有多个classpath路径，并同时加载多个classpath路径下（此种情况多数不会遇到）的文件，就发挥了作用，如果不加``，则表示仅仅加载第一个classpath路径。</p></blockquote><p>然后在product主启动类上加上注解**@MapperScan()**</p><pre>@MapperScan(&quot;com.zhuangjie.gulimall.product.dao&quot;)\r\n@SpringBootApplication\r\npublic&nbsp;class&nbsp;ProductApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(ProductApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p>然后去测试，先通过下面方法给数据库添加内容</p><pre>@SpringBootTest\r\nclass&nbsp;ProductApplicationTests&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Autowired\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BrandService&nbsp;brandService;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Test\r\n&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;contextLoads()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BrandEntity&nbsp;brandEntity&nbsp;=&nbsp;new&nbsp;BrandEntity();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brandEntity.setName(&quot;华为&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brandEntity.setDescript(&quot;手机、笔记本、路由器~&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brandService.save(brandEntity);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><h4>[<em>4.4</em>] 继续生成其它模块的代码</h4><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584649376471658464937542.png\" alt=\"\"/></p><ul class=\" list-paddingleft-2\"><li><p>以<strong>coupon</strong> 模块为例，</p><p>修改代码生成器模块 &nbsp;<code>renren-generator</code></p><p>application.yml：只展示要修改的行</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584551474431658455146608.png\" alt=\"\"/></p><p>generator.properties:</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584552274491658455226966.png\" alt=\"\"/></p><p>启动代码生成器，选择全部的表（让所有的表放在一页，全选）生成，将生成的<code>main</code> 文件夹覆盖到表对应模块中，因为<code>gulimall_sms</code>数据库对应的是<code>coupon</code>模块，所以覆盖在coupon的main。</p><p>删掉 &nbsp;main→resources → src 文件夹</p><p>覆盖完后，会有错误，编辑覆盖的模块coupon模块 的pom.xml 文件</p><p>加入公共依赖</p></li></ul><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.zhuangjie.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&nbsp;&nbsp;&lt;/dependency&gt;</pre><p>继续编辑该模块的主启动类 <code>CouponApplication.class</code></p><p>加入 @MapperScan() 注解。</p><pre>@MapperScan(&quot;com.zhuangjie.gulimall.coupon.dao&quot;)\r\n@SpringBootApplication\r\npublic&nbsp;class&nbsp;CouponApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(CouponApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p>向模块的resources中加入一个配置文件<code>application.yml</code></p><pre>spring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_sms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><p>在另一个配置文件 <code>application.properties</code> 文件修改端口：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584575652291658457565047.png\" alt=\"\"/></p><p>然后启动测试：<a href=\"http://localhost:7000/coupon/coupon/list\">http://localhost:7000/coupon/coupon/list</a></p><p>其它模块与coupon一样的流程不一致的地方请参与上面的表格，分别操作其它gulimall-XXX模块</p><h3>[<em>5</em>] SpringCloud Alibaba</h3><p><a href=\"https://github.com/alibaba/spring-cloud-alibaba/blob/2.2.x/README-zh.md\">https://github.com/alibaba/spring-cloud-alibaba/blob/2.2.x/README-zh.md</a></p><h4>[<em>5.1</em>] 搭建nacos服务</h4><p>在linux上安装：</p><pre>wget&nbsp;https://github.com/alibaba/nacos/releases/download/2.1.0/nacos-server-2.1.0.tar.gz\r\ntar&nbsp;-xvf&nbsp;nacos-server-2.1.0.tar.gz\r\nmv&nbsp;nacos&nbsp;/usr/local/\r\ncd&nbsp;/usr/local/nacos/bin\r\n./startup.sh&nbsp;-m&nbsp;standalone&nbsp;#单体启动\r\ntailf&nbsp;&nbsp;/usr/local/nacos/logs/start.out</pre><p>启动成功后，访问：<a href=\"http://192.168.87.101:8848/nacos\">http://192.168.87.101:8848/nacos</a></p><p>账号/密码：nacos/nacos</p><h4>[<em>5.2</em>] 注册中心 &amp;&amp; Feign</h4><p>在 <code>gulimall-common</code> 模块的pom.xml中加入依赖：</p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;\r\n&lt;/dependency&gt;</pre><p>在<code>gulimall-coupon</code> 与<code>gulimall-member</code> 模块的application.yml中加入这两行配置：</p><pre>#注册中心服务器地址\r\nspring.cloud.nacos.discovery.server-addr=192.168.87.101:8848&nbsp;&nbsp;\r\n\r\n#该服务的名称\r\nspring.application.name=gulimall-coupon</pre><p>开启服务发现 <code>@EnableDiscoveryClient </code></p><pre>@EnableDiscoveryClient&nbsp;//开启服务发现&nbsp;-&nbsp;nacos\r\n@MapperScan(&quot;com.zhuangjie.gulimall.coupon.dao&quot;)\r\n@SpringBootApplication\r\npublic&nbsp;class&nbsp;CouponApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(CouponApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p>访问 <a href=\"http://192.168.87.101:8848/nacos\">http://192.168.87.101:8848/nacos</a> 找到 <code>服务管理 → 服务列表</code> 中就可以找到注册进来的服务</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584841387211658484138629.png\" alt=\"\"/></p><p>Feign服务调用</p><p>下面演示的member（会员）模块调用 coupon（优惠卷）</p><p>在调用模块member中，加入以下依赖：(我们之前在member的pom.xml已经引用过了（微服务）)</p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n&lt;/dependency&gt;</pre><p>在被调用 coupon模块→ CouponController.java 中加入一从此方法：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;//提供其它模块使用feign调用\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/member/list&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;membercoupons(){&nbsp;&nbsp;&nbsp;&nbsp;//全系统的所有返回都返回R\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;应该去数据库查用户对于的优惠券，但这个我们简化了，不去数据库查了，构造了一个优惠券给他返回\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CouponEntity&nbsp;couponEntity&nbsp;=&nbsp;new&nbsp;CouponEntity();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;couponEntity.setCouponName(&quot;满100-10&quot;);//优惠券的名字\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;coupons&quot;,Arrays.asList(couponEntity));\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>在调用方 创建一个<code>feign</code> 目录（与controller同级）,里面创建一个类：</p><p>CouponFeignService.java: 作用如下注解</p><pre>package&nbsp;com.zhuangjie.gulimall.member.feign;\r\n\r\nimport&nbsp;com.zhuangjie.common.utils.R;\r\nimport&nbsp;org.springframework.cloud.openfeign.FeignClient;\r\nimport&nbsp;org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n@FeignClient(&quot;gulimall-coupon&quot;)&nbsp;//告诉Feign调用注册中心的哪个服务\r\npublic&nbsp;interface&nbsp;CouponFeignService&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//告诉Feign调用该服务的哪个API\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/coupon/coupon/member/list&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;membercoupons();\r\n}</pre><p>在调用方的启动类上加注解<code>@EnableFeignClients()</code></p><pre>@EnableFeignClients(basePackages=&quot;com.zhuangjie.gulimall.member.feign&quot;)//扫描接口方法注解\r\n@EnableDiscoveryClient&nbsp;//开启服务发现&nbsp;-&nbsp;nacos\r\n@MapperScan(&quot;com.zhuangjie.gulimall.member.dao&quot;)\r\n@SpringBootApplication\r\npublic&nbsp;class&nbsp;MemberApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(MemberApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p>然后我们在调用 方member的控制层写一个测试请求：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Autowired\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;CouponFeignService&nbsp;couponFeignService;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/getCoupons&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;list(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;R&nbsp;membercoupons&nbsp;=&nbsp;couponFeignService.membercoupons();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;coupons&nbsp;=&nbsp;membercoupons.get(&quot;coupons&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;coupons&quot;,coupons).put(&quot;message&quot;,&quot;远程调用成功~&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>测试：分别启动<code>coupon</code> 与<code>member</code>两个模块</p><p>然后访问调用方控制层：<a href=\"http://localhost:8000/member/member/getCoupons\">http://localhost:8000/member/member/getCoupons</a></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584853900601658485389723.png\" alt=\"\"/></p><h4>[<em>5.3</em>] 配置中心</h4><p><code>gulimall-common</code>模块中加上依赖</p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;\r\n&nbsp;&lt;/dependency&gt;</pre><p>在<code>coupons</code>项目中创建/src/main/resources/<code>bootstrap.properties</code> ，这个文件是springboot里规定的，他优先级别application.properties高：</p><pre>#&nbsp;改名字，对应nacos里的配置文件名\r\nspring.application.name=gulimall-coupon\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848</pre><p>默认会读取nacos配置中心中的<code>应用名.properties</code> 作为模块的配置：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584951362261658495135556.png\" alt=\"\"/></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584952312231658495230261.png\" alt=\"\"/></p><p>我们在<code>gulimall-coupon</code> 模块中，就可以使用<code>@Value(&quot;${}&quot;)</code>读取到了</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${user.name}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${user.age}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Integer&nbsp;age;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//配置中心测试\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/test&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;test(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;name&quot;,name).put(&quot;age&quot;,age);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>如果想动态地获取nacos配置中心的改变，就可以在类上加<code>@RefreshScope</code></p><pre>@RefreshScope&nbsp;//加入后就可以动态地获取nacos中的配置了，即nacos中的配置修改了，程序也快速地拿到修改后的值\r\n@RestController\r\n@RequestMapping(&quot;coupon/coupon&quot;)\r\npublic&nbsp;class&nbsp;CouponController&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${user.name}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${user.age}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Integer&nbsp;age;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//配置中心测试\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/test&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;test(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;name&quot;,name).put(&quot;age&quot;,age);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><h4>[<em>5.4</em>] 配置中心进阶</h4><p>在nacos浏览器中还可以配置：</p><ul class=\" list-paddingleft-2\"><li><p>命名空间：用作配置隔离。（一般每个微服务一个命名空间，或者 将开发环境如，ev,test,prod 作为命名空间）</p></li><li><p>配置集：一组相关或不相关配置项的集合，即一个配置文件就是一个配置集。</p></li><li><p>配置集ID：类似于配置文件名，即Data ID</p></li><li><p>配置分组：默认所有的配置集都属于<code>DEFAULT_GROUP</code>。双十一，618的优惠策略改分组即可</p></li></ul><p>现<code>coupon</code> 模块的配置如下，我们要将这些配置放在nacos配置中心上</p><pre>server:\r\n&nbsp;&nbsp;port:&nbsp;7000\r\nspring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_sms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848&nbsp;&nbsp;#将该服务注册到nacos中\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;gulimall-coupon&nbsp;&nbsp;#应用名称，在nacos注册中心服务组名\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><p>现在开始操作</p><p>bootstrap.properties：</p><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-coupon\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev\r\n\r\n#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev分组中获取mybatis.yml配置\r\nspring.cloud.nacos.config.extension-configs[0].data-id=mybatis.yml\r\nspring.cloud.nacos.config.extension-configs[0].group=dev</pre><p>创建一个<code>gulimall-coupon</code> 分组：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585430055751658543005211.png\" alt=\"\"/></p><p>分别创建两个配置文件：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585430687351658543068532.png\" alt=\"\"/></p><p>gulimall-coupon.properties:</p><pre>#&nbsp;注册中心服务器地址\r\nspring.cloud.nacos.discovery.server-addr=192.168.87.101:8848</pre><p>mybatis.yml:</p><pre>spring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_sms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><p>启动项目后，从输出的内容也可以看出加载了nacos config哪些配置</p><pre>2022-07-23&nbsp;10:31:04.085&nbsp;&nbsp;INFO&nbsp;9048&nbsp;---&nbsp;[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main]&nbsp;b.c.PropertySourceBootstrapConfiguration&nbsp;:&nbsp;Located&nbsp;property&nbsp;source:&nbsp;[BootstrapPropertySource&nbsp;{name=&#39;bootstrapProperties-gulimall-coupon.properties,dev&#39;},&nbsp;BootstrapPropertySource&nbsp;{name=&#39;bootstrapProperties-gulimall-coupon,dev&#39;},&nbsp;BootstrapPropertySource&nbsp;{name=&#39;bootstrapProperties-mybatis.yml,dev&#39;}]</pre><h3>[<em>6</em>] gateway网关</h3><p><strong>1）创建“gulimall-gateway”</strong></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585624496261658562448864.png\" alt=\"\"/></p><p><strong>2）确保有“gulimall-common”依赖和“spring-cloud-starter-gateway”依赖</strong></p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.bigdata.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n&lt;/dependency&gt;</pre><p><strong>3）在主启动类上加上“@EnableDiscoveryClient”注解</strong></p><p>这是服务发现 注册中心的注解</p><p><strong>4）在项目的application.properties 中加入</strong></p><pre>server.port=80\r\n#&nbsp;应用名称\r\nspring.application.name=gulimall-gateway</pre><p><strong>5）在Nacos中创建“gulimall-gateway”命名空间，同时在该命名空间中创建“gulimall-gateway.properties”</strong></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585626884511658562688141.png\" alt=\"\"/></p><p><strong>gulimall-gateway.properties</strong>：</p><pre>#&nbsp;注册中心服务器地址\r\nspring.cloud.nacos.discovery.server-addr=192.168.87.101:8848</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585636186511658563618312.png\" alt=\"\"/></p><p><strong>6）创建“bootstrap.properties”文件，添加如下配置，指明配置中心地址和所属命名空间</strong></p><p>（默认是会从nacos配置中心命名空间gulimall-gateway中DEFAULT_GROUP组中获取gulimall-gateway.properties配置）</p><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-gateway\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\n#spring.cloud.nacos.config.group=dev</pre><p><strong>7）启动“gulimall-gateway”</strong></p><p>启动报错：</p><pre>Description:\r\n\r\nFailed&nbsp;to&nbsp;configure&nbsp;a&nbsp;DataSource:&nbsp;&#39;url&#39;&nbsp;attribute&nbsp;is&nbsp;not&nbsp;specified&nbsp;and&nbsp;no&nbsp;embedded&nbsp;datasource&nbsp;could&nbsp;be&nbsp;configured.\r\n\r\nReason:&nbsp;Failed&nbsp;to&nbsp;determine&nbsp;a&nbsp;suitable&nbsp;driver&nbsp;class</pre><p>解决方法：在“com.bigdata.gulimall.gulimallgateway.GulimallGatewayApplication”中排除和数据源相关的配置（也可以在引入的gulimall-common中排除掉mybatis-plus-boot-starter依赖）</p><pre>@SpringBootApplication(exclude&nbsp;=&nbsp;{DataSourceAutoConfiguration.class})</pre><p>重新启动</p><p>访问：<a href=\"http://192.168.87.101:8848/nacos\">http://192.168.87.101:8848/nacos</a>，查看到该服务已经注册到了Nacos中</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585630254911658563025140.png\" alt=\"\"/></p><h4>[<em>6.1</em>] 案例</h4><p>现在想要实现针对于“<a href=\"http://localhost/hello?url=baidu%E2%80%9D%EF%BC%8C%E8%BD%AC%E5%8F%91%E5%88%B0%E2%80%9Chttps://www.baidu.com%E2%80%9D%EF%BC%8C%E9%92%88%E5%AF%B9%E4%BA%8E%E2%80%9Chttp://localhost/hello?url=qq%E2%80%9D%E7%9A%84%E8%AF%B7%E6%B1%82%EF%BC%8C%E8%BD%AC%E5%8F%91%E5%88%B0%E2%80%9Chttps://www.qq.com/%E2%80%9D\">http://localhost/hello?url=baidu”，转发到“https://www.baidu.com”，针对于“http://localhost/hello?url=qq”的请求，转发到“https://www.qq.com/”</a></p><p><strong>1）在nacos的gulimall-gateway命名空间添加“route.yml”配置集</strong></p><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;baidu_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;https://www.baidu.com\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Query=url,&nbsp;baidu\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;qq_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;https://www.qq.com/\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Query=url,&nbsp;qq</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585638261571658563825859.png\" alt=\"\"/></p><p><strong>2）在项目的bootstrap.properties上<strong><strong>追加</strong></strong>：</strong></p><pre>#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev分组中获取mybatis.yml配置\r\nspring.cloud.nacos.config.extension-configs[0].data-id=route.yml</pre><p><strong>3）启动“gulimall-gateway”</strong></p><p><strong>4）测试</strong></p><p>访问：<a href=\"http://localhost/hello?url=baidu\">http://localhost/hello?url=baidu</a></p><p>访问：<a href=\"http://localhost/hello?url=qq\">http://localhost/hello?url=qq</a></p><h3>[<em>7</em>] 商品分类</h3><h4>[<em>7.1</em>] 创建API：递归树形结构数据获取</h4><ol class=\" list-paddingleft-2\"><li><p>打开<code>gulimall-pms</code>数据库，执行SQL，来源：</p><p><a href=\"https://github.com/18476305640/gulimall/blob/dev/%E6%96%87%E4%BB%B6%E4%BB%93%E5%82%A8/sql%E6%96%87%E4%BB%B6/data/pms_catelog.sql\">https://github.com/18476305640/gulimall/blob/dev/文件仓储/sql文件/data/pms_catelog.sql</a></p></li><li><p>我们配置nacos注册中心与nacos config的配置，因为我们在<code>gulimall-common</code>模块写了nacos config的配置，所以需要配置，否则启动时报错。</p><p>打开<code>gulimall-product</code> 模块的<code>application.properties</code> 配置文件：</p><p>追加：</p></li></ol><pre>#注册中心服务器地址\r\nspring.cloud.nacos.discovery.server-addr=192.168.87.101:8848</pre><pre>在`gulimall-product`&nbsp;主启动类中，加入注解：</pre><pre>@EnableDiscoveryClient&nbsp;//开启服务发现&nbsp;-&nbsp;nacos</pre><pre>创建`bootstrap.properties`</pre><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-product\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev</pre><pre>开始编写API（在gulimall-product模块）：\r\n\r\n1、controller/CategoryController.java</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;查出所有分类以及子分类，以树形结构组装起来\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/list/tree&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;list(@RequestParam&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;params){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;CategoryEntity&gt;&nbsp;entities&nbsp;=&nbsp;&nbsp;categoryService.listWithTree();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;data&quot;,&nbsp;entities);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>&gt;&nbsp;生成service层接口的抽象方法和service层impl的方法\r\n\r\n2、service/impl/CategoryServiceImpl.java</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;//菜单树\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;List&lt;CategoryEntity&gt;&nbsp;listWithTree()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;==&gt;&quot;+baseMapper);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//1、查出所有分类\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;CategoryEntity&gt;&nbsp;entities&nbsp;=&nbsp;baseMapper.selectList(null);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//2、组装父子的树形结构\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;CategoryEntity&gt;&nbsp;levelMenus&nbsp;&nbsp;=&nbsp;entities.stream().filter(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;categoryEntity&nbsp;-&gt;&nbsp;categoryEntity.getParentCid()&nbsp;==&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).map(item&nbsp;-&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.setChildren(getChildrens(item,&nbsp;entities));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;item;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).sorted(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(item1,&nbsp;item2)&nbsp;-&gt;&nbsp;&nbsp;Optional.ofNullable(item1.getSort()).orElse(0)&nbsp;-&nbsp;Optional.ofNullable(item2.getSort()).orElse(0)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).collect(Collectors.toList());\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;levelMenus;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//递归查找所有菜单的子菜单\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;List&lt;CategoryEntity&gt;&nbsp;getChildrens(CategoryEntity&nbsp;root,&nbsp;List&lt;CategoryEntity&gt;&nbsp;all)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;CategoryEntity&gt;&nbsp;collect&nbsp;=&nbsp;all.stream().filter(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item&nbsp;-&gt;&nbsp;item.getParentCid().longValue()&nbsp;==&nbsp;root.getCatId().longValue()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).map(item&nbsp;-&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.setChildren(getChildrens(item,&nbsp;all));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;item;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).sorted(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(item1,&nbsp;item2)&nbsp;-&gt;&nbsp;&nbsp;Optional.ofNullable(item1.getSort()).orElse(0)&nbsp;-&nbsp;Optional.ofNullable(item2.getSort()).orElse(0)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).collect(Collectors.toList());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;collect=&gt;&quot;+collect);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;collect;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>API接口编写完毕，测试：[http://localhost:10000/product/category/list/tree](http://localhost:10000/product/category/list/tree)\r\n\r\n（推荐json查看插件：SON&nbsp;Beautifier&nbsp;&amp;&nbsp;Editor）\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16598754029391659875402702.png)</pre><h4>[<em>7.2</em>] 将renren-fast模块接入gateway网关中</h4><ol class=\" list-paddingleft-2\"><li><p>想要接入gateway网关中，首先renren-fast得注册到nacos注册中心中，进行服务发现。</p><p><a href=\"https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E\">版本兼容&gt;&gt;</a></p><p>根据<code>gulimall-common</code> 中的<code>spring-cloud-alibaba-dependencies</code> 可知 <strong>Spring Cloud Alibaba</strong>的版本，从而可以知道要使用的springcloud，springboot的版本，我们就可以在修改模块的springcloud与springboot的版本</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599254130291659925412514.png\" alt=\"\"/></p><p>然后再修改<code>renren-fast</code> 首先renren-fast使用的springboot版本（看README.md文件的技术选型）不能超过我们<code>gulimall-common</code> 对应的springboot版本（2.2.5.RELEASE），如果renren-fast的版本高于（如果高很多）那就要考虑选择低一点版本的<code>renren-fast</code>了，如果最后选择的renren-fast版本的springboot是<code>2.1</code> 那我们可以修改为<code>gulimall-common</code> 对应的springboot版本（2.2.5.RELEASE）。</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599261925201659926192341.png\" alt=\"\"/></p><p>接着加入<code>gulimall-common</code></p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.zhuangjie.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;</pre><pre>在`renren-fast`主启动类上加入注解：</pre><pre>@EnableDiscoveryClient</pre><pre>配置nacos&nbsp;注册中心,&nbsp;在`renren-fast`\r\n\r\napplication.yml</pre><pre>spring:&nbsp;\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;renren-fast\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848</pre><pre>配置nacos&nbsp;config,&nbsp;加入配置文件`bootstrap.properties`</pre><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=renren-fast\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev</pre><pre>在nacos中创建一个命名空间`namespace`&nbsp;&nbsp;为&nbsp;renren-fast\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599266517531659926651432.png)\r\n\r\n然后启动&nbsp;`renren-fast`&nbsp;,&nbsp;启动成功后（如果失败，删掉.idea目录，然后关闭项目，再打开，重新加载pom.xml,再[配置模块一下JDK](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599267732991659926772820.png)），查看nacos&nbsp;web中是否有`renren-fast`这个服务\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599268442921659926843757.png)</pre><ol class=\" list-paddingleft-2\"><li><p>在gateway网关中配置renren-fast</p><p>修改后台管理系统前端 （renren-fast-vue）的 <code>static/config/index.js</code>里的url</p></li></ol><pre>&nbsp;window.SITE_CONFIG[&#39;baseUrl&#39;]&nbsp;=&nbsp;&#39;http://localhost/api&#39;;\r\n//&nbsp;意思是说本vue项目中要请求的资源url都发给88/api，那么我们就让网关端口为88，然后匹配到/api请求即可，\r\n//&nbsp;网关可以通过过滤器处理url后指定给某个微服务\r\n//&nbsp;renren-fast服务已经注册到了nacos中</pre><pre>然后利用网关，将&nbsp;&nbsp;http://localhost/api/**&nbsp;转为&nbsp;http://localhost/renren-fast/**\r\n\r\n配置网关</pre><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;admin_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://renren-fast\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\\{segment}</pre><pre>访问&nbsp;&nbsp;[http://localhost:8001/#/login](http://localhost:8001/#/login)\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599305864151659930586176.png)\r\n\r\n出现了CORS跨域请求问题。[关于跨域&gt;&gt;](https://www.cnblogs.com/zhuangjie/p/16562919.html)</pre><ol class=\" list-paddingleft-2\"><li><p>解决跨域请求</p><p>创建与主启动类同级的<code>config/GulimallCorsConfiguration.java</code></p></li></ol><pre>package&nbsp;com.zhuangjie.gulimall.gateway.config;\r\n\r\nimport&nbsp;org.springframework.context.annotation.Bean;\r\nimport&nbsp;org.springframework.context.annotation.Configuration;\r\nimport&nbsp;org.springframework.web.cors.CorsConfiguration;\r\nimport&nbsp;org.springframework.web.cors.reactive.CorsWebFilter;\r\nimport&nbsp;org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;\r\n\r\n@Configuration\r\npublic&nbsp;class&nbsp;GulimallCorsConfiguration&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Bean\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;CorsWebFilter&nbsp;corsWebFilter()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;基于url跨域，选择reactive包下的\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UrlBasedCorsConfigurationSource&nbsp;source=new&nbsp;UrlBasedCorsConfigurationSource();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;跨域配置信息\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CorsConfiguration&nbsp;corsConfiguration&nbsp;=&nbsp;new&nbsp;CorsConfiguration();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;允许跨域的头\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corsConfiguration.addAllowedHeader(&quot;*&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;允许跨域的请求方式\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corsConfiguration.addAllowedMethod(&quot;*&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;允许跨域的请求来源\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corsConfiguration.addAllowedOrigin(&quot;*&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;是否允许携带cookie跨域\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corsConfiguration.setAllowCredentials(true);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;任意url都要进行跨域配置\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source.registerCorsConfiguration(&quot;/**&quot;,corsConfiguration);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;CorsWebFilter(source);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><pre>发现状态码是200，经翻译：\r\n\r\n已拦截跨源请求：同源策略禁止读取位于&nbsp;[http://localhost:88/api/sys/login](http://localhost:88/api/sys/login)&nbsp;的远程资源。\r\n\r\n（原因：不允许有多个&nbsp;‘Access-Control-Allow-Origin’&nbsp;CORS&nbsp;头）\r\n\r\n多个头也是不可以的。\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599309808991659930980461.png)\r\n\r\n那为什么会有多个相同的头呢，那是因为`renren-fast`&nbsp;&nbsp;&nbsp;这个模块已经解决过跨域了，接入gateway网关后，解决跨域应统一放在gateway模块中。所以应注释掉`renren-fast`中的解决跨域代码：\r\n\r\nrenren-fast模块中`src/main/java/io/renren/config/CorsConfig.java`</pre><pre>package&nbsp;io.renren.config;\r\n\r\nimport&nbsp;org.springframework.context.annotation.Configuration;\r\nimport&nbsp;org.springframework.web.servlet.config.annotation.CorsRegistry;\r\nimport&nbsp;org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\n@Configuration\r\npublic&nbsp;class&nbsp;CorsConfig&nbsp;implements&nbsp;WebMvcConfigurer&nbsp;{\r\n\r\n//&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n//&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;addCorsMappings(CorsRegistry&nbsp;registry)&nbsp;{\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;registry.addMapping(&quot;/**&quot;)\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.allowedOrigins(&quot;*&quot;)\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.allowCredentials(true)\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.allowedMethods(&quot;GET&quot;,&nbsp;&quot;POST&quot;,&nbsp;&quot;PUT&quot;,&nbsp;&quot;DELETE&quot;,&nbsp;&quot;OPTIONS&quot;)\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.maxAge(3600);\r\n//&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><pre>再重新启动`renren-fast`&nbsp;,然后访问前端`renren-fast-vue`&nbsp;,登录：\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599322774471659932277075.png)</pre><h4>[<em>7.3</em>] 展示三级分类</h4><p>在前面，我们已经创建好了树形结构数据的分类数据API，启动<code>gulimall-product</code> ，访问<a href=\"http://localhost:10000/product/category/list/tree\">http://localhost:10000/product/category/list/tree</a> , 就可以读取到。但我们要放在页面中显示。</p><p><strong>前端准备工作：</strong></p><p>创建一个目录为<code>商品系统</code></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599420264951659942026071.png\" alt=\"\"/></p><p>新增一个菜单名为<code>分类维护</code> 放在&quot;商品系统&quot; 下</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599421743011659942173467.png\" alt=\"\"/></p><p>刷新页面，得到：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599423672931659942357685.png\" alt=\"\"/></p><p>创建菜单<code>分类维护</code>对应的.vue , 固定创建：<code>src\\views\\modules\\product\\category.vue</code> 文件：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;分类维护-内容显示\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><p>保存，然后再刷新页面：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599427982221659942797834.png\" alt=\"\"/></p><p>我们需要请求后端，获取数据来显示，修改<code>src\\views\\modules\\product\\category.vue</code> 文件：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;分类维护-内容显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&gt;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//看其它模块知道的怎么发送请求\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;}).then((data)&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><blockquote><p><code>&lt;el-tree&gt;</code>标签来自：<a href=\"https://element.eleme.cn/#/zh-CN/component/tree\">https://element.eleme.cn/#/zh-CN/component/tree</a></p></blockquote><p>重新刷新，查看分类维护菜单，控制台，请求出错：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599430013941659943000971.png\" alt=\"\"/></p><p>这是因为我们gateway网关的问题，当前我们路由配置如下：</p><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;admin_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://renren-fast\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\\{segment}</pre><p>请求会跑到<code>renren-fast</code> 模块中，那肯定是不对的，我们需要新增一个路由规则：</p><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;product_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://gulimall-product\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/product/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/$\\{segment}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;admin_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://renren-fast\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\\{segment}</pre><blockquote><p>准备要把<code>/api/product/**</code> 放在<code>/api/**</code> 前面，这是非常重要的，否则就路由到了<code>/api/**</code> 中了。</p></blockquote><p>确保，<code>gulimall-product</code> 模块已经配置注册中心中 和配置nacos配置中心。</p><p>1、</p><ul class=\" list-paddingleft-2\"><li><p>application.yml：在这里配置了注册中心</p></li></ul><pre>server:\r\n&nbsp;&nbsp;port:&nbsp;10000\r\nspring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_pms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#nacos&nbsp;注册中心\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;gulimall-product\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><p>2、</p><ul class=\" list-paddingleft-2\"><li><p>bootstrap.properties：在这里配置了配置中心</p></li></ul><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-product\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev</pre><p>3、在主启动类添加注解：（开启服务发现）</p><pre>@EnableDiscoveryClient&nbsp;//开启服务发现&nbsp;-&nbsp;nacos</pre><p>再次访问前面的<code>分类维护</code>菜单：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599443310551659944330650.png\" alt=\"\"/></p><p>修改前端 <code>src\\views\\modules\\product\\category.vue</code> 文件：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&gt;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;}).then(({data})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><p>刷新页面，就能显示分类数据了：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599445932931659944592413.png\" alt=\"\"/></p><h4>[<em>7.4</em>] 三级分类的删除</h4><ol class=\" list-paddingleft-2\"><li><p>创建API接口</p><p>gulimall-product 模块的<code> CategoryController.java</code>中</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;删除\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/delete&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;delete(@RequestBody&nbsp;Long[]&nbsp;ids){\r\n&nbsp;&nbsp;&nbsp;&nbsp;categoryService.removeMenuByIds(Arrays.asList(ids));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>随后生成&nbsp;&nbsp;&nbsp;service接口方法removeMenuByIds&nbsp;，和创建service&nbsp;impl的实现方法。\r\n\r\n`CategoryServiceImpl.java`</pre><pre>&nbsp;@Override\r\npublic&nbsp;void&nbsp;removeMenuByIds(List&lt;Long&gt;&nbsp;ids)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;baseMapper.deleteBatchIds(ids);\r\n}</pre><pre>设置逻辑删除-mybatis-plus的逻辑删除：[官网说明&gt;&gt;](https://baomidou.com/pages/6b03c5)</pre><pre>mybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logic-delete-value:&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logic-not-delete-value:&nbsp;0</pre><pre>修改product.entity.CategoryEntity实体类，添加上@TableLogic，表明使用逻辑删除：</pre><pre>/**\r\n&nbsp;&nbsp;&nbsp;*&nbsp;是否显示[0-不显示，1显示]\r\n&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;@TableLogic(value&nbsp;=&nbsp;&quot;1&quot;,delval&nbsp;=&nbsp;&quot;0&quot;)\r\n&nbsp;&nbsp;private&nbsp;Integer&nbsp;showStatus;</pre><pre>开启debug模式：</pre><pre>logging:\r\n&nbsp;&nbsp;level:\r\n&nbsp;&nbsp;&nbsp;&nbsp;com.zhuangjie.gulimall:&nbsp;debug</pre><pre>然后请求&nbsp;删除接口：</pre><pre>###\r\nPOST&nbsp;http://localhost/api/product/category/delete&nbsp;HTTP/1.1\r\nContent-Type:&nbsp;application/json\r\n\r\n[1000]</pre><pre>查看控制台输出：</pre><pre>2022-08-09&nbsp;09:38:04.997&nbsp;DEBUG&nbsp;1780&nbsp;---&nbsp;[io-10000-exec-6]&nbsp;c.z.g.p.dao.CategoryDao.deleteBatchIds&nbsp;&nbsp;&nbsp;:&nbsp;==&gt;&nbsp;&nbsp;Preparing:&nbsp;UPDATE&nbsp;pms_category&nbsp;SET&nbsp;show_status=0&nbsp;WHERE&nbsp;cat_id&nbsp;IN&nbsp;(&nbsp;?&nbsp;)&nbsp;AND&nbsp;show_status=1&nbsp;\r\n2022-08-09&nbsp;09:38:05.018&nbsp;DEBUG&nbsp;1780&nbsp;---&nbsp;[io-10000-exec-6]&nbsp;c.z.g.p.dao.CategoryDao.deleteBatchIds&nbsp;&nbsp;&nbsp;:&nbsp;==&gt;&nbsp;Parameters:&nbsp;183(Long)\r\n2022-08-09&nbsp;09:38:05.025&nbsp;DEBUG&nbsp;1780&nbsp;---&nbsp;[io-10000-exec-6]&nbsp;c.z.g.p.dao.CategoryDao.deleteBatchIds&nbsp;&nbsp;&nbsp;:&nbsp;&lt;==&nbsp;&nbsp;&nbsp;&nbsp;Updates:&nbsp;1</pre><pre>发现删除操作，其实是update更新操作，且在数据库中，刚要删除的项的逻辑删除字段`showStatus`&nbsp;已修改为0（表示删除）</pre><ol class=\" list-paddingleft-2\"><li><p>前台 <code>renren-fast-vue</code></p><p><code>src\\views\\modules\\product\\category.vue</code></p></li></ol><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-key=&quot;catId&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&nbsp;&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append()&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&quot;提示&quot;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&quot;确定&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&quot;取消&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&quot;warning&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><pre>1、是如何解决点击节点，自动展开的问题的？\r\n\r\n解：在&lt;el-tree&gt;&nbsp;标签中加入&nbsp;`:expand-on-click-node=&quot;false&quot;`\r\n\r\n2、如何让每个节点有一个多选框的？\r\n\r\n解：在&lt;el-tree&gt;&nbsp;标签中加入&nbsp;`show-checkbox`\r\n\r\n3、如何让节点有添加与删除的按钮\r\n\r\n解：在&lt;el-tree&gt;&nbsp;标签内填充插槽：</pre><pre>&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&lt;/span&gt;</pre><pre>4、是如何实现第1、2层显示添加，无子节点的显示删除？\r\n\r\n解：在Append的&lt;el-button&gt;内加入`v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&nbsp;&quot;`&nbsp;在Delete的&lt;el-button&gt;内加入`v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;`\r\n\r\n5、是如何实现删除后刷新，还是显示被删除的父节点？\r\n\r\n解：给&lt;el-tree&gt;标签添加属性`:default-expanded-keys=&quot;expandedKey&quot;&nbsp;`&nbsp;其中数据`expandedKey`在删除成功后更新为删除节点的父节点，删除后会默认展示该节点。</pre><pre>this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]</pre><h4>[<em>7.5</em>] 三级分类修改</h4><ol class=\" list-paddingleft-2\"><li><p>前台</p><p><code>src\\views\\modules\\product\\category.vue</code> ：</p></li></ol><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;&nbsp;node-key=&quot;catId&quot;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-dialog&nbsp;title=&quot;添加&quot;&nbsp;:visible.sync=&quot;dialogVisible&quot;&nbsp;width=&quot;30%&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;ref=&quot;form&quot;&nbsp;:model=&quot;category&quot;&nbsp;@submit.native.prevent=&quot;addCategory&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;dialogVisible&nbsp;=&nbsp;false&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;addCategory&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//添加弹框,默认不显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogVisible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&quot;&quot;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//绑定好添加的category的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.parentCid&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.catLevel&nbsp;=&nbsp;data.catLevel&nbsp;+&nbsp;1\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;addCategory()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/save&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&quot;提示&quot;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&quot;确定&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&quot;取消&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&quot;warning&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><pre>1、如何实现点击`Append`&nbsp;弹出输入框，输入分类名后，整理成一个完整的category对象呢？\r\n\r\n答：添加一个对话框</pre><pre>&lt;el-dialog&nbsp;title=&quot;添加&quot;&nbsp;:visible.sync=&quot;dialogVisible&quot;&nbsp;width=&quot;30%&quot;&gt;\r\n&nbsp;&nbsp;&lt;el-form&nbsp;ref=&quot;form&quot;&nbsp;:model=&quot;category&quot;&nbsp;@submit.native.prevent=&quot;addCategory&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;dialogVisible&nbsp;=&nbsp;false&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;addCategory&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&lt;/span&gt;\r\n&lt;/el-dialog&gt;</pre><pre>在data添加一个数据&nbsp;`category`&nbsp;这是发给后端添加的对象</pre><pre>data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&quot;&quot;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},</pre><pre>`&lt;el-dialog&gt;`&nbsp;标签下的`&lt;el-form&gt;`&nbsp;标签绑定到category对象，完成category.name的绑定。且当我们点`Append`&nbsp;时触发的函数`append(data)`函数中，将category.parentCid与category.catLevel绑定完成与更新默认展开的expandedKey。保证我们在按`确定`的时候category对象数据已整理完成，然后在点确定的`addCategory`函数中完成数据添加的请求操作，在添加完成的回调中，关闭对话弹窗与刷新数据。</pre><ol class=\" list-paddingleft-2\"><li><p>后端API</p><p>后端已经有了，逆向代码生成的api， <code>/product/category/save</code></p></li></ol><h4>[<em>7.6</em>] 三级分类编辑</h4><ol class=\" list-paddingleft-2\"><li><p>前台代码<code>src\\views\\modules\\product\\category.vue</code> ：</p></li></ol><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;&nbsp;node-key=&quot;catId&quot;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;edit(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-dialog&nbsp;:title=&quot;dialogTitle==&#39;add&#39;?&#39;添加&#39;:&#39;编辑&#39;&nbsp;&quot;&nbsp;:visible.sync=&quot;dialogVisible&quot;&nbsp;width=&quot;30%&quot;&nbsp;:show-close=&quot;false&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;ref=&quot;form&quot;&nbsp;:model=&quot;category&quot;&nbsp;@submit.native.prevent=&quot;addCategory&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类图标&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.icon&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;计量单位&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.productUnit&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;unSumbit()&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;sumbitController()&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//添加弹框,默认不显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogVisible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&quot;&quot;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultCategory:&nbsp;{&nbsp;name:&nbsp;&quot;&quot;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogTitle:&nbsp;&#39;&#39;&nbsp;//add&nbsp;edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;unSumbit()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;unSumbit&nbsp;&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;this.defaultCategory\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;sumbitController()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dialogTitle&nbsp;==&nbsp;&#39;add&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if(this.dialogTitle&nbsp;==&nbsp;&#39;edit&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.editCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//绑定好添加的category的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.parentCid&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.catLevel&nbsp;=&nbsp;data.catLevel&nbsp;+&nbsp;1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//修改弹框标题\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;add&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;addCategory()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;category:&quot;,&nbsp;this.category);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/save&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;edit(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;edit&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.parentCid]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/category/info/${data.catId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//进行数据回显\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;data.category;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开对话弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;editCategory()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;编辑成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&quot;提示&quot;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&quot;确定&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&quot;取消&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&quot;warning&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><pre>书写解析：\r\n\r\n1、编辑与添加用的都是同一个对话框，怎么控制？\r\n\r\n&nbsp;&nbsp;我们需要加一个控制`dialogTitle`变量,当是add时添加，edit时编辑，且分别在点击Append与点击Edit时进行维护该数据。我们点击提交时，利用该`dialogTitle`变量分别导向不同的处理函数。\r\n\r\n2、编辑与添加用的都是同一个数据变量`category`，怎么控制不乱？\r\n\r\n&nbsp;&nbsp;我们需要在操作的前后进行数据合理化操作，如在点击Append时，就应该将category改变为一个默认值，为了方便我们可以定义一个`defaultCategory`data数据，直接`this.category&nbsp;=&nbsp;this.defaultCategory`即可。</pre><ol class=\" list-paddingleft-2\"><li><p>后台代码：</p><p>需要的API：</p></li><ol class=\" list-paddingleft-2\" style=\"list-style-type: lower-alpha;\"><li><p>根据category的catId查询完整数据，已经生成，不用我们编写</p></li><li><p>传入category对象进行修改 &nbsp; ，已经生成，不用我们编写</p></li></ol></ol><h4>[<em>7.7</em>] 三级分类：修改顺序</h4><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660118302236%E5%8A%A8%E7%94%BB.apng\" alt=\"\"/></p><p>前台代码<code>src\\views\\modules\\product\\category.vue</code> ：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;drop-control&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;dropData.isDrop&nbsp;?&nbsp;&quot;可拖拽&quot;&nbsp;:&nbsp;&quot;不可拖拽&quot;&nbsp;}}：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-model=&quot;dropData.isDrop&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;active-color=&quot;#13ce66&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inactive-color=&quot;#909399&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;round&nbsp;v-show=&quot;dropData.isDrop&quot;&nbsp;size=&quot;mini&quot;&nbsp;:disabled=&quot;dropData.action.length&nbsp;==&nbsp;0&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;saveCategorys&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;点击保存&lt;/el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:data=&quot;data&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:props=&quot;defaultProps&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@node-click=&quot;handleNodeClick&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-key=&quot;catId&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:draggable=&quot;dropData.isDrop&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:allow-drop=&quot;isDrag&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@node-drop=&quot;droped&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;text&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=&quot;mini&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;edit(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;text&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=&quot;mini&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-dialog\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:title=&quot;dialogTitle&nbsp;==&nbsp;&#39;add&#39;&nbsp;?&nbsp;&#39;添加&#39;&nbsp;:&nbsp;&#39;编辑&#39;&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:visible.sync=&quot;dialogVisible&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width=&quot;30%&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:show-close=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref=&quot;form&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:model=&quot;category&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@submit.native.prevent=&quot;addCategory&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类图标&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.icon&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;计量单位&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.productUnit&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;unSumbit()&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;sumbitController()&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;添加弹框,默认不显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogVisible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&#39;&#39;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultCategory:&nbsp;{&nbsp;name:&nbsp;&#39;&#39;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogTitle:&nbsp;&#39;&#39;,&nbsp;//&nbsp;add&nbsp;edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dropData:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action:&nbsp;[],&nbsp;&nbsp;&nbsp;//&nbsp;保存拖拽的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isDrop:&nbsp;false&nbsp;//&nbsp;是否可拖拽\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;确保拖拽后的树深度&nbsp;&lt;=3\r\n&nbsp;&nbsp;&nbsp;&nbsp;isDrag&nbsp;(draggingNode,&nbsp;dropNode,&nbsp;type)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;默认展开,第一个值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(draggingNode.parent)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[&nbsp;draggingNode.parent.data.catId&nbsp;]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;Drag=&gt;&quot;,&nbsp;draggingNode,&nbsp;dropNode,&nbsp;type)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;draggingLevel&nbsp;=&nbsp;this.countNodeLevel(draggingNode)&nbsp;-&nbsp;draggingNode.level&nbsp;+&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;dropLevel&nbsp;=&nbsp;dropNode.level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;拖的node深度：&quot;,&nbsp;draggingLevel,&nbsp;dropLevel)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(type&nbsp;===&nbsp;&#39;inner&#39;&nbsp;&amp;&amp;&nbsp;draggingLevel&nbsp;+&nbsp;dropLevel&nbsp;&lt;=&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((type&nbsp;===&nbsp;&#39;prev&#39;&nbsp;||&nbsp;type&nbsp;===&nbsp;&#39;next&#39;)&nbsp;&amp;&amp;&nbsp;draggingLevel&nbsp;+&nbsp;dropNode.parent.level&nbsp;&lt;=&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;拖拽成功放置后的回调\r\n&nbsp;&nbsp;&nbsp;&nbsp;droped&nbsp;(draggingNode,&nbsp;dropNode,&nbsp;type)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;计算出要修改的，把要保存的数据，push到全局数组中\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;let&nbsp;parseChildren&nbsp;=&nbsp;draggingNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(draggingNode,&nbsp;dropNode,&nbsp;type)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;parent&nbsp;=&nbsp;null&nbsp;//&nbsp;父节点\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这里存放本次成功拖拽要修改的category数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;updateCategorys&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取父节点,&nbsp;最上面有个root节点，是数据根的父节点\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(type&nbsp;===&nbsp;&#39;inner&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent&nbsp;=&nbsp;dropNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent&nbsp;=&nbsp;dropNode.parent\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;默认展开,第二个值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey.push(parent.data.catId)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取所有子孙节点要修改的category数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;parent.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【1】如果是拖拽的节点，它的sort,parentCid,level都将改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(parent.childNodes[i].data.catId&nbsp;===&nbsp;draggingNode.data.catId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push({&nbsp;catId:&nbsp;parent.childNodes[i].data.catId,&nbsp;sort:&nbsp;i,&nbsp;parentCid:&nbsp;(parent.data.catId&nbsp;===&nbsp;undefined&nbsp;?&nbsp;0&nbsp;:&nbsp;parent.data.catId),&nbsp;catLevel:&nbsp;parent.level&nbsp;+&nbsp;1&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【2】&nbsp;拖拽节点的子孙节点的level将改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push(...this.collectChildrenUpdateData(parent.childNodes[i]))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【3】如果是拖拽节点的上下节点，sort会改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push({catId:&nbsp;parent.childNodes[i].data.catId,&nbsp;sort:&nbsp;i})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;将本次收集要修改的category数据push到全局容器中\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dropData.action.push(...updateCategorys)\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;droped函数使用，用于收集子节点的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;collectChildrenUpdateData&nbsp;(rootNode)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;收集拖拽节点的子孙节点category子集对象-容器\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;collectNode&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;递归获取\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;rootNode.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collectNode.push({&nbsp;catId:&nbsp;rootNode.childNodes[i].data.catId,&nbsp;catLevel:&nbsp;rootNode.level&nbsp;+&nbsp;1&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collectNode.push(...this.collectChildrenUpdateData(rootNode.childNodes[i]))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;collectNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;保存拖拽的顺序修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;saveCategorys&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update/sort&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.dropData.action,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清空要保存的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dropData.action&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;查看指定节点的深度\r\n&nbsp;&nbsp;&nbsp;&nbsp;countNodeLevel&nbsp;(node)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;maxLevel&nbsp;=&nbsp;node.level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.childNodes.length&nbsp;&gt;&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;node.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.childNodes[i].level&nbsp;&gt;&nbsp;maxLevel)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLevel&nbsp;=&nbsp;node.childNodes[i].level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;childLevel&nbsp;=&nbsp;this.countNodeLevel(node.childNodes[i])\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(childLevel&nbsp;&gt;&nbsp;maxLevel)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLevel&nbsp;=&nbsp;childLevel\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;maxLevel\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick&nbsp;()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;unSumbit&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;unSumbit&nbsp;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;this.defaultCategory\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;sumbitController&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dialogTitle&nbsp;===&nbsp;&#39;add&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(this.dialogTitle&nbsp;===&nbsp;&#39;edit&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.editCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append&nbsp;(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;绑定好添加的category的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.parentCid&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.catLevel&nbsp;=&nbsp;data.catLevel&nbsp;+&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改弹框标题\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;add&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;打开输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;addCategory&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;category:&#39;,&nbsp;this.category)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/save&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;edit&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.parentCid]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/category/info/${data.catId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;进行数据回显\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;data.category\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;打开对话弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;editCategory&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;编辑成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove&nbsp;(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&#39;提示&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n.drop-control&nbsp;{\r\n&nbsp;&nbsp;display:&nbsp;flex;\r\n&nbsp;&nbsp;align-items:&nbsp;center;\r\n&nbsp;&nbsp;height:&nbsp;40px;\r\n}\r\n&lt;/style&gt;</pre><p>1、怎么收集要改变的category对象？</p><p>解：当放置成功后，会触发<code> @node-drop=&quot;droped&quot;</code> ，接收的函数droped会收到三个参数<code>draggingNode, dropNode, type</code> &nbsp; 依次是被拖拽节点对应的 Node、结束拖拽时最后进入的节点（父节点或兄弟节点）、被拖拽节点的放置位置（before、after、inner）。有这三个参数，我们就可以收集到要修改的数据了，</p><p>第一，收集拖拽成功后的兄弟节点，它们的sort可能改变了</p><p>第二，收集拖拽的节点，它的parentCid、sort、level改变了</p><p>第三，收集手提节点的子孙节点，它们的level改变了</p><p>2、收集好一次拖拽后的数据，怎么实现多批次保存？</p><p>将收集好的数据都push到一个新数组中，当点击保存时，再一起发请求修改。</p><p><strong>后台代码：</strong></p><p><code>gulimall-product</code>模块 CategoryController.java</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;批量修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/update/sort&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;updateSort(@RequestBody&nbsp;CategoryEntity[]&nbsp;categorys){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;后端正在批量修改中&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;categoryService.updateBatchById(Arrays.asList(categorys));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><h4>[<em>7.8</em>] 三级分类：批量删除</h4><p>前台代码<code>src\\views\\modules\\product\\category.vue</code> ：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;drop-control&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;dropData.isDrop&nbsp;?&nbsp;&quot;可拖拽&quot;&nbsp;:&nbsp;&quot;不可拖拽&quot;&nbsp;}}：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-model=&quot;dropData.isDrop&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;active-color=&quot;#13ce66&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inactive-color=&quot;#909399&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;round&nbsp;v-show=&quot;dropData.isDrop&quot;&nbsp;size=&quot;mini&quot;&nbsp;:disabled=&quot;dropData.action.length&nbsp;==&nbsp;0&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;saveCategorys&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;点击保存&lt;/el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:#c0c4cc&quot;&gt;&amp;nbsp;&amp;nbsp;|&amp;nbsp;&amp;nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;danger&quot;&nbsp;round&nbsp;&nbsp;size=&quot;mini&quot;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;deleteCategorys&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:disabled=&quot;isChecked&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;批量删除&lt;/el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:data=&quot;data&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:props=&quot;defaultProps&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@node-click=&quot;handleNodeClick&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-key=&quot;catId&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:draggable=&quot;dropData.isDrop&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:allow-drop=&quot;isDrag&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@node-drop=&quot;droped&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref=&quot;categoryTree&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;text&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=&quot;mini&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;edit(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;text&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=&quot;mini&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-dialog\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:title=&quot;dialogTitle&nbsp;==&nbsp;&#39;add&#39;&nbsp;?&nbsp;&#39;添加&#39;&nbsp;:&nbsp;&#39;编辑&#39;&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:visible.sync=&quot;dialogVisible&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width=&quot;30%&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:show-close=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref=&quot;form&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:model=&quot;category&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@submit.native.prevent=&quot;addCategory&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类图标&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.icon&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;计量单位&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.productUnit&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;unSumbit()&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;sumbitController()&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;添加弹框,默认不显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogVisible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&#39;&#39;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultCategory:&nbsp;{&nbsp;name:&nbsp;&#39;&#39;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogTitle:&nbsp;&#39;&#39;,&nbsp;//&nbsp;add&nbsp;edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dropData:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action:&nbsp;[],&nbsp;&nbsp;&nbsp;//&nbsp;保存拖拽的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isDrop:&nbsp;false&nbsp;//&nbsp;是否可拖拽\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isChecked:&nbsp;true\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;deleteCategorys&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;checkedData&nbsp;=&nbsp;this.$refs.categoryTree.getCheckedNodes()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;catIds&nbsp;=&nbsp;Array.from(checkedData,&nbsp;data&nbsp;=&gt;&nbsp;data.catId)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;catNames&nbsp;=&nbsp;Array.from(checkedData,&nbsp;data&nbsp;=&gt;&nbsp;data.name)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(catIds,&nbsp;catNames)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${catNames}】这些分类?`,&nbsp;&#39;批量删除&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(catIds,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;确保拖拽后的树深度&nbsp;&lt;=3\r\n&nbsp;&nbsp;&nbsp;&nbsp;isDrag&nbsp;(draggingNode,&nbsp;dropNode,&nbsp;type)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;默认展开,第一个值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(draggingNode.parent)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[&nbsp;draggingNode.parent.data.catId&nbsp;]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;Drag=&gt;&quot;,&nbsp;draggingNode,&nbsp;dropNode,&nbsp;type)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;draggingLevel&nbsp;=&nbsp;this.countNodeLevel(draggingNode)&nbsp;-&nbsp;draggingNode.level&nbsp;+&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;dropLevel&nbsp;=&nbsp;dropNode.level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;拖的node深度：&quot;,&nbsp;draggingLevel,&nbsp;dropLevel)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(type&nbsp;===&nbsp;&#39;inner&#39;&nbsp;&amp;&amp;&nbsp;draggingLevel&nbsp;+&nbsp;dropLevel&nbsp;&lt;=&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((type&nbsp;===&nbsp;&#39;prev&#39;&nbsp;||&nbsp;type&nbsp;===&nbsp;&#39;next&#39;)&nbsp;&amp;&amp;&nbsp;draggingLevel&nbsp;+&nbsp;dropNode.parent.level&nbsp;&lt;=&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;拖拽成功放置后的回调\r\n&nbsp;&nbsp;&nbsp;&nbsp;droped&nbsp;(draggingNode,&nbsp;dropNode,&nbsp;type)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;计算出要修改的，把要保存的数据，push到全局数组中\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;let&nbsp;parseChildren&nbsp;=&nbsp;draggingNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(draggingNode,&nbsp;dropNode,&nbsp;type)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;parent&nbsp;=&nbsp;null&nbsp;//&nbsp;父节点\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这里存放本次成功拖拽要修改的category数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;updateCategorys&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取父节点,&nbsp;最上面有个root节点，是数据根的父节点\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(type&nbsp;===&nbsp;&#39;inner&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent&nbsp;=&nbsp;dropNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent&nbsp;=&nbsp;dropNode.parent\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;默认展开,第二个值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey.push(parent.data.catId)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取所有子孙节点要修改的category数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;parent.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【1】如果是拖拽的节点，它的sort,parentCid,level都将改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(parent.childNodes[i].data.catId&nbsp;===&nbsp;draggingNode.data.catId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push({&nbsp;catId:&nbsp;parent.childNodes[i].data.catId,&nbsp;sort:&nbsp;i,&nbsp;parentCid:&nbsp;(parent.data.catId&nbsp;===&nbsp;undefined&nbsp;?&nbsp;0&nbsp;:&nbsp;parent.data.catId),&nbsp;catLevel:&nbsp;parent.level&nbsp;+&nbsp;1&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【2】&nbsp;拖拽节点的子孙节点的level将改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push(...this.collectChildrenUpdateData(parent.childNodes[i]))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【3】如果是拖拽节点的上下节点，sort会改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push({catId:&nbsp;parent.childNodes[i].data.catId,&nbsp;sort:&nbsp;i})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;将本次收集要修改的category数据push到全局容器中\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dropData.action.push(...updateCategorys)\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;droped函数使用，用于收集子节点的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;collectChildrenUpdateData&nbsp;(rootNode)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;收集拖拽节点的子孙节点category子集对象-容器\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;collectNode&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;递归获取\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;rootNode.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collectNode.push({&nbsp;catId:&nbsp;rootNode.childNodes[i].data.catId,&nbsp;catLevel:&nbsp;rootNode.level&nbsp;+&nbsp;1&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collectNode.push(...this.collectChildrenUpdateData(rootNode.childNodes[i]))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;collectNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;保存拖拽的顺序修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;saveCategorys&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update/sort&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.dropData.action,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清空要保存的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dropData.action&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;查看指定节点的深度\r\n&nbsp;&nbsp;&nbsp;&nbsp;countNodeLevel&nbsp;(node)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;maxLevel&nbsp;=&nbsp;node.level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.childNodes.length&nbsp;&gt;&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;node.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.childNodes[i].level&nbsp;&gt;&nbsp;maxLevel)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLevel&nbsp;=&nbsp;node.childNodes[i].level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;childLevel&nbsp;=&nbsp;this.countNodeLevel(node.childNodes[i])\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(childLevel&nbsp;&gt;&nbsp;maxLevel)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLevel&nbsp;=&nbsp;childLevel\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;maxLevel\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick&nbsp;()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;unSumbit&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;unSumbit&nbsp;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;this.defaultCategory\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;sumbitController&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dialogTitle&nbsp;===&nbsp;&#39;add&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(this.dialogTitle&nbsp;===&nbsp;&#39;edit&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.editCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append&nbsp;(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;绑定好添加的category的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.parentCid&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.catLevel&nbsp;=&nbsp;data.catLevel&nbsp;+&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改弹框标题\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;add&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;打开输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;addCategory&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;category:&#39;,&nbsp;this.category)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/save&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;edit&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.parentCid]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/category/info/${data.catId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;进行数据回显\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;data.category\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;打开对话弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;editCategory&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;编辑成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove&nbsp;(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&#39;提示&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;mounted&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;维护一个变量，让批量删除按键是否可用\r\n&nbsp;&nbsp;&nbsp;&nbsp;setInterval(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.isChecked&nbsp;=&nbsp;this.$refs.categoryTree.getCheckedNodes().length&nbsp;===&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;300)\r\n&nbsp;&nbsp;}\r\n\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n.drop-control&nbsp;{\r\n&nbsp;&nbsp;display:&nbsp;flex;\r\n&nbsp;&nbsp;align-items:&nbsp;center;\r\n&nbsp;&nbsp;height:&nbsp;40px;\r\n}\r\n&lt;/style&gt;</pre><p>1、如何获取选中分类的id呢？</p><p>使用<code>&lt;el-tree&gt;</code> 组件的内置方法 <code>getCheckedNodes()</code>即点击批量删除后：</p><pre>//&nbsp;获取选中的节点\r\nlet&nbsp;checkedData&nbsp;=&nbsp;this.$refs.categoryTree.getCheckedNodes()\r\n//&nbsp;获取里面的id形成一个数组\r\nlet&nbsp;catIds&nbsp;=&nbsp;Array.from(checkedData,&nbsp;data&nbsp;=&gt;&nbsp;data.catId)</pre><p>获取到这些category的catId就可以批量删除了。</p><p><strong>后端API</strong>：已经逆向生成了</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;删除\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/delete&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;delete(@RequestBody&nbsp;Long[]&nbsp;ids){\r\n&nbsp;&nbsp;&nbsp;&nbsp;categoryService.removeMenuByIds(Arrays.asList(ids));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><h3>[<em>8</em>] 品牌管理</h3><h4>[<em>8.1</em>] 前端代码生成与优化</h4><p>1、在后端模块的<code>renren-generator</code> 模块，修改配置：</p><p>application.properties：配置数据库名为<code>gulimall_pms</code></p><pre>#&nbsp;mysql\r\nspring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;com.alibaba.druid.pool.DruidDataSource\r\n&nbsp;&nbsp;&nbsp;&nbsp;#MySQL配置\r\n&nbsp;&nbsp;&nbsp;&nbsp;driverClassName:&nbsp;com.mysql.cj.jdbc.Driver\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_pms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333</pre><p>generator.properties：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601827533441660182752834.png\" alt=\"\"/></p><p>启动<code>renren-generator</code> 服务（是80端口，冲突需要修改）：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601829370261660182936503.png\" alt=\"\"/></p><p>得到下面这两个前端页面文件：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601830230241660183022722.png\" alt=\"\"/></p><p>打开<code>renren-fast-vue</code> 后台管理页面：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601831390201660183138340.png\" alt=\"\"/></p><p>得到：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601832081761660183208023.png\" alt=\"\"/></p><p>将上面逆向生成的两个文件：<code>brand.vue</code> 与<code>brand-add-or-update.vue</code> 放在<code>renren-fast-vue</code> 前端代码的<code>src\\views\\modules\\product</code> 下：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601833240221660183323389.png\" alt=\"\"/></p><p>代码优化：</p><p>brand.vue</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;mod-config&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;:inline=&quot;true&quot;&nbsp;:model=&quot;dataForm&quot;&nbsp;@keyup.enter.native=&quot;getDataList()&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.key&quot;&nbsp;placeholder=&quot;参数名&quot;&nbsp;clearable&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;getDataList()&quot;&gt;查询&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;pms:brand:save&#39;)&quot;&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;addOrUpdateHandle()&quot;&gt;新增&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;pms:brand:delete&#39;)&quot;&nbsp;type=&quot;danger&quot;&nbsp;@click=&quot;deleteHandle()&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:disabled=&quot;dataListSelections.length&nbsp;&lt;=&nbsp;0&quot;&gt;批量删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table&nbsp;:data=&quot;dataList&quot;&nbsp;border&nbsp;v-loading=&quot;dataListLoading&quot;&nbsp;@selection-change=&quot;selectionChangeHandle&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;width:&nbsp;100%;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;type=&quot;selection&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;50&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;brandId&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌id&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;name&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌名&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;logo&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌logo地址&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;descript&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;介绍&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;showStatus&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;显示状态&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;scope.row.showStatus&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&nbsp;@change=&quot;statusChanged(scope.row)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;firstLetter&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;检索首字母&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;sort&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;排序&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;fixed=&quot;right&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;150&quot;&nbsp;label=&quot;操作&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;addOrUpdateHandle(scope.row.brandId)&quot;&gt;修改&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;deleteHandle(scope.row.brandId)&quot;&gt;删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-pagination&nbsp;@size-change=&quot;sizeChangeHandle&quot;&nbsp;@current-change=&quot;currentChangeHandle&quot;&nbsp;:current-page=&quot;pageIndex&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:page-sizes=&quot;[10,&nbsp;20,&nbsp;50,&nbsp;100]&quot;&nbsp;:page-size=&quot;pageSize&quot;&nbsp;:total=&quot;totalPage&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layout=&quot;total,&nbsp;sizes,&nbsp;prev,&nbsp;pager,&nbsp;next,&nbsp;jumper&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-pagination&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;弹窗,&nbsp;新增&nbsp;/&nbsp;修改&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;add-or-update&nbsp;v-if=&quot;addOrUpdateVisible&quot;&nbsp;ref=&quot;addOrUpdate&quot;&nbsp;@refreshDataList=&quot;getDataList&quot;&gt;&lt;/add-or-update&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nimport&nbsp;AddOrUpdate&nbsp;from&nbsp;&#39;./brand-add-or-update&#39;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataForm:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;&#39;&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataList:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageIndex:&nbsp;1,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageSize:&nbsp;10,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;totalPage:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListLoading:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListSelections:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateVisible:&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;components:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;AddOrUpdate\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;activated&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;statusChanged&nbsp;(rowData)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/brand/update`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(rowData)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;状态修改成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;refreshDataList&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取数据列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;getDataList&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/brand/list&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;page&#39;:&nbsp;this.pageIndex,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;limit&#39;:&nbsp;this.pageSize,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;key&#39;:&nbsp;this.dataForm.key\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;data.page.list\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;data.page.totalCount\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;每页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;sizeChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageSize&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;当前页\r\n&nbsp;&nbsp;&nbsp;&nbsp;currentChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;多选\r\n&nbsp;&nbsp;&nbsp;&nbsp;selectionChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListSelections&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;新增&nbsp;/&nbsp;修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addOrUpdateVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs.addOrUpdate.init(id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;删除\r\n&nbsp;&nbsp;&nbsp;&nbsp;deleteHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ids&nbsp;=&nbsp;id&nbsp;?&nbsp;[id]&nbsp;:&nbsp;this.dataListSelections.map(item&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;item.brandId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`确定对[id=${ids.join(&#39;,&#39;)}]进行[${id&nbsp;?&nbsp;&#39;删除&#39;&nbsp;:&nbsp;&#39;批量删除&#39;}]操作?`,&nbsp;&#39;提示&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/brand/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;</pre><p>brand-add-or-update.vue：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;el-dialog&nbsp;:title=&quot;!dataForm.brandId&nbsp;?&nbsp;&#39;新增&#39;&nbsp;:&nbsp;&#39;修改&#39;&quot;&nbsp;:close-on-click-modal=&quot;false&quot;&nbsp;:visible.sync=&quot;visible&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;:model=&quot;dataForm&quot;&nbsp;:rules=&quot;dataRule&quot;&nbsp;ref=&quot;dataForm&quot;&nbsp;@keyup.enter.native=&quot;dataFormSubmit()&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label-width=&quot;140px&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;品牌名&quot;&nbsp;prop=&quot;name&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.name&quot;&nbsp;placeholder=&quot;品牌名&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;品牌logo地址&quot;&nbsp;prop=&quot;logo&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.logo&quot;&nbsp;placeholder=&quot;品牌logo地址&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;介绍&quot;&nbsp;prop=&quot;descript&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.descript&quot;&nbsp;placeholder=&quot;介绍&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;显示状态&quot;&nbsp;prop=&quot;showStatus&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.showStatus&quot;&nbsp;placeholder=&quot;显示状态[0-不显示；1-显示]&quot;&gt;&lt;/el-input&gt;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;dataForm.showStatus&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;检索首字母&quot;&nbsp;prop=&quot;firstLetter&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.firstLetter&quot;&nbsp;placeholder=&quot;检索首字母&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;排序&quot;&nbsp;prop=&quot;sort&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.sort&quot;&nbsp;placeholder=&quot;排序&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;visible&nbsp;=&nbsp;false&quot;&gt;取消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;dataFormSubmit()&quot;&gt;确定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataForm:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brandId:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logo:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;descript:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showStatus:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstLetter:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort:&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataRule:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;品牌名不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logo:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;品牌logo地址不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;descript:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;介绍不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showStatus:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;显示状态不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstLetter:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;检索首字母不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;排序不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;init&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.brandId&nbsp;=&nbsp;id&nbsp;||&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].resetFields()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dataForm.brandId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/brand/info/${this.dataForm.brandId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.name&nbsp;=&nbsp;data.brand.name\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.logo&nbsp;=&nbsp;data.brand.logo\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.descript&nbsp;=&nbsp;data.brand.descript\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.showStatus&nbsp;=&nbsp;data.brand.showStatus\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.firstLetter&nbsp;=&nbsp;data.brand.firstLetter\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.sort&nbsp;=&nbsp;data.brand.sort\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;表单提交\r\n&nbsp;&nbsp;&nbsp;&nbsp;dataFormSubmit&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].validate((valid)&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(valid)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/brand/${!this.dataForm.brandId&nbsp;?&nbsp;&#39;save&#39;&nbsp;:&nbsp;&#39;update&#39;}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;brandId&#39;:&nbsp;this.dataForm.brandId&nbsp;||&nbsp;undefined,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;name&#39;:&nbsp;this.dataForm.name,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;logo&#39;:&nbsp;this.dataForm.logo,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;descript&#39;:&nbsp;this.dataForm.descript,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;showStatus&#39;:&nbsp;this.dataForm.showStatus,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;firstLetter&#39;:&nbsp;this.dataForm.firstLetter,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;sort&#39;:&nbsp;this.dataForm.sort\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;refreshDataList&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;</pre><p>1、打开后台管理的品牌管理，刚开始时，加载不出来数据，是为什么？</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601838071471660183806750.png\" alt=\"\"/></p><p>解：生成的代码的请求路径不对，修改前：<code>/pms/brand/info/...</code> &nbsp;修改后 <code>/product/brand/info/...</code> ，一共需要修改四个地方，修改后，就好了。</p><p>2、怎么解决显示的问题？</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601840322261660184032062.png\" alt=\"\"/></p><p>解：调整宽度，与字的数量，下面是：<code>src\\views\\modules\\product\\brand-add-or-update.vue</code></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601841390211660184138141.png\" alt=\"\"/></p><p>3、点击修改时，怎么解决，发送的请求中的<code>showStatus</code> 属性是字符串（后端是数值类型）？</p><p>操作<code>src\\views\\modules\\product\\brand-add-or-update.vue</code> 文件，使用parseInt()进行转为数值类型。</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601850010211660185000163.png\" alt=\"\"/></p><p>4、怎么将表格显示的“显示状态”列，变为开关？</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601850680201660185067289.png\" alt=\"\"/></p><p>想要在列中将自定义的东西，要使用插槽（这里使用的是作用域插槽）。</p><p>通过查看element ui 的示例代码，可以知道</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601852920251660185291833.png\" alt=\"\"/></p><p>在文件：<code>src\\views\\modules\\product\\brand.vue</code></p><p>可以在<code>&lt;el-table-column&gt;</code>标签内加<code>template</code>就可以自定义内容：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;showStatus&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;显示状态&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;scope.row.showStatus&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601866195661660186619169.png\" alt=\"\"/></p><p>当状态改变时，我们可以发送请求修改数据：</p><p>修改上面所说的代码：</p><pre>&lt;el-switch&nbsp;v-model=&quot;scope.row.showStatus&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&nbsp;@change=&quot;statusChanged(scope.row)&quot;&gt;\r\n&lt;/el-switch&gt;</pre><p>开关改变时，将触发<code>statusChanged</code> 函数：</p><pre>statusChanged&nbsp;(rowData)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/brand/update&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(rowData,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;状态修改成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},</pre><p>5、怎么修改修改或新增表单中的showStatus列也变为开关？</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;介绍&quot;&nbsp;prop=&quot;descript&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.descript&quot;&nbsp;placeholder=&quot;介绍&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;显示状态&quot;&nbsp;prop=&quot;showStatus&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;dataForm.showStatus&quot;&nbsp;:active-value=&quot;1&quot;&nbsp;:inactive-value=&quot;0&quot;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601866660261660186665314.png\" alt=\"\"/></p><p>这样就完成替代了输入框，且功能一样。</p><p>6、怎么修复，新增时，500状态或提交的数据 sort是字符串？</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601870662091660187066056.png\" alt=\"\"/></p><p>在<code>brand-add-or-update.vue</code> 文件中修改请求的sort为数值。</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601869580261660186957221.png\" alt=\"\"/></p><h4>[<em>8.2</em>] 品牌logo上传：阿里 OSS准备工作</h4><p>创建一个容器——Bucket，推荐一个项目一个Bucket</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660202538240%E5%8A%A8%E7%94%BB.apng\" alt=\"\"/></p><p>创建一个子账号，因为要使用用于编程子账号的的<code>accessKeyId</code> 、<code>bucketName</code></p><p>演示动画：</p><p><a href=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660207011480%E5%8A%A8%E7%94%BB.apng\">https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660207011480动画.apng</a></p><p>获取到子用户的 <code>accessKeyId</code> 、<code>bucketName</code> 后，我们就可以进行测试上传了：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--阿里云OSS&nbsp;sdk--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;3.10.2&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;</pre><p>java测试代码：</p><pre>@Test\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;ossTest()&nbsp;throws&nbsp;FileNotFoundException&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;bucket&nbsp;的概览里\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;endpoint&nbsp;=&nbsp;&quot;https://oss-cn-shanghai.aliyuncs.com&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;accessKeyId&nbsp;=&nbsp;&quot;LTAI5tAyUdDxcCYZvSj8iVzh&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;accessKeySecret&nbsp;=&nbsp;&quot;MlcubNQqBXWxdAloToEIeyab9Hgexa&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;填写Bucket名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;bucketName&nbsp;=&nbsp;&quot;gulimall-zhuangjie-resource&quot;;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;要上传的文件路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;filePath=&nbsp;&quot;D:\\\\system\\\\图片\\\\IMG_0029.JPG&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;保存在bucket上的“文件名”&nbsp;或“路径/文件名”\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;objectName&nbsp;=&nbsp;&quot;2022-8-11/IMG_0029.JPG&quot;;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;创建OSSClient实例。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSS&nbsp;ossClient&nbsp;=&nbsp;new&nbsp;OSSClientBuilder().build(endpoint,&nbsp;accessKeyId,&nbsp;accessKeySecret);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;inputStream&nbsp;=&nbsp;new&nbsp;FileInputStream(filePath);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;创建PutObject请求。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ossClient.putObject(bucketName,&nbsp;objectName,&nbsp;inputStream);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;OSS上传文件失败：&quot;+e.getMessage());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;finally&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ossClient&nbsp;!=&nbsp;null)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ossClient.shutdown();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>上面对应的官网文档位置：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602076220221660207621825.png\" alt=\"\"/></p><h4>[<em>8.3</em>] 品牌logo上传： OSS正式集成到项目</h4><p>创建一个模块，用于集成所有第三方服务——<code>gulimall-third-party</code></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602089988071660208998556.png\" alt=\"\"/></p><ol class=\" list-paddingleft-2\"><li><p>依赖：</p><p>1、将下面，放在<code>dependencyManagement &gt; dependencies</code> 标签下, 因为在添加oss依赖时不用写版本了，进行了版本控制</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;2.2.0.RELEASE&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;type&gt;pom&lt;/type&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;scope&gt;import&lt;/scope&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;</pre><pre>2、添加&nbsp;Oss的依赖（1中进行了版本控制，这里就不用写版本号）</pre><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-alicloud-oss&lt;/artifactId&gt;\r\n&lt;/dependency&gt;</pre><pre>3、添加依赖</pre><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.zhuangjie.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&lt;/dependency&gt;</pre><pre>4、排除`gulimall-common`&nbsp;模块中的mybatis-plus自动配置或排除掉依赖，如果模块不配置相关的东西（数据库信息），启动时会报错。</pre><pre>@SpringBootApplication(exclude&nbsp;=&nbsp;{DataSourceAutoConfiguration.class})\r\npublic&nbsp;class&nbsp;GulimallThirdPartyApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(GulimallThirdPartyApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><pre>或</pre><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.atguigu.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;exclusions&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;exclusion&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.baomidou&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/exclusion&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/exclusions&gt;\r\n&lt;/dependency&gt;</pre><ol class=\" list-paddingleft-2\"><li><p>配置</p><p>普通配置 &amp; 配置nacos注册中心</p><p>application.yml：</p></li></ol><pre>server:\r\n&nbsp;&nbsp;port:&nbsp;30000\r\nspring:\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;gulimall-third-party\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848</pre><pre>bootstrap.properties：配置nacos配置中心</pre><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-third-party\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev</pre><ol class=\" list-paddingleft-2\"><li><p>配置开启注册中心</p><p><code>gulimall-third-party</code> 主启动类：加<code>@EnableDiscoveryClient</code> 注解</p></li></ol><pre>@EnableDiscoveryClient\r\n@SpringBootApplication(exclude&nbsp;=&nbsp;{DataSourceAutoConfiguration.class})\r\npublic&nbsp;class&nbsp;GulimallThirdPartyApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(GulimallThirdPartyApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><ol class=\" list-paddingleft-2\"><li><p>开始集成阿里OSS</p><p>application.yml：加入OSS配置信息</p></li></ol><pre>server:\r\n&nbsp;&nbsp;port:&nbsp;30000\r\nspring:\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;gulimall-third-party\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848\r\n&nbsp;&nbsp;&nbsp;&nbsp;alicloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#使用的是子用户的access-key、secret-key\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;access-key:&nbsp;LTAI5tAyUdDxcCYZvSj8iVzh\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secret-key:&nbsp;MlcubNQqBXWxdAloToEIeyab9Hgexa\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oss:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#区域用的是上海\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endpoint:&nbsp;oss-cn-shanghai.aliyuncs.com\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#默认没有这个属性，我们自己写的，是Bucket\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bucket:&nbsp;gulimall-zhuangjie-resource</pre><ol class=\" list-paddingleft-2\"><li><p>配置接口</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602170629331660217062688.png\" alt=\"\"/></p><p>所以我们需要编写一个接口，返回给客户端授权的policy，开始编写：</p><p>在<code>gulimall-third-party</code> 模块创建：gulimall-third-party/src/main/java/com/zhuangjie/gulimall/thirdparty/controller/OssController.java 文件：</p></li></ol><pre>package&nbsp;com.zhuangjie.gulimall.thirdparty.controller;\r\n\r\nimport&nbsp;com.alibaba.fastjson.JSONObject;\r\nimport&nbsp;com.aliyun.oss.OSSClient;\r\nimport&nbsp;com.aliyun.oss.common.utils.BinaryUtil;\r\nimport&nbsp;com.aliyun.oss.model.MatchMode;\r\nimport&nbsp;com.aliyun.oss.model.PolicyConditions;\r\nimport&nbsp;org.springframework.beans.factory.annotation.Value;\r\nimport&nbsp;org.springframework.web.bind.annotation.RequestMapping;\r\nimport&nbsp;org.springframework.web.bind.annotation.RestController;\r\n\r\nimport&nbsp;java.text.SimpleDateFormat;\r\nimport&nbsp;java.util.Date;\r\nimport&nbsp;java.util.LinkedHashMap;\r\nimport&nbsp;java.util.Map;\r\n@RestController\r\n@RequestMapping(&quot;/third-party&quot;)\r\npublic&nbsp;class&nbsp;OssController&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${spring.cloud.alicloud.access-key}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;accessId;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${spring.cloud.alicloud.secret-key}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;accessKey;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${spring.cloud.alicloud.oss.endpoint}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;endpoint;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${spring.cloud.alicloud.oss.bucket}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;bucket;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/oss/policy&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Map&lt;String,&nbsp;String&gt;&nbsp;policy()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;host&nbsp;=&nbsp;&quot;https://&quot;+bucket+&quot;.&quot;+endpoint;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;prefix_dir&nbsp;=&nbsp;new&nbsp;SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(new&nbsp;Date(System.currentTimeMillis()));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;dir&nbsp;=&nbsp;prefix_dir+&quot;/&quot;;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSSClient&nbsp;client&nbsp;=&nbsp;new&nbsp;OSSClient(endpoint,&nbsp;accessId,&nbsp;accessKey);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&lt;String,&nbsp;String&gt;&nbsp;respMap&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;expireTime&nbsp;=&nbsp;30;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;expireEndTime&nbsp;=&nbsp;System.currentTimeMillis()&nbsp;+&nbsp;expireTime&nbsp;*&nbsp;1000;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;expiration&nbsp;=&nbsp;new&nbsp;Date(expireEndTime);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PolicyConditions&nbsp;policyConds&nbsp;=&nbsp;new&nbsp;PolicyConditions();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;policyConds.addConditionItem(PolicyConditions.COND_CONTENT_LENGTH_RANGE,&nbsp;0,&nbsp;1048576000);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;policyConds.addConditionItem(MatchMode.StartWith,&nbsp;PolicyConditions.COND_KEY,&nbsp;dir);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;postPolicy&nbsp;=&nbsp;client.generatePostPolicy(expiration,&nbsp;policyConds);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;byte[]&nbsp;binaryData&nbsp;=&nbsp;postPolicy.getBytes(&quot;utf-8&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;encodedPolicy&nbsp;=&nbsp;BinaryUtil.toBase64String(binaryData);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;postSignature&nbsp;=&nbsp;client.calculatePostSignature(postPolicy);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap&nbsp;=&nbsp;new&nbsp;LinkedHashMap&lt;String,&nbsp;String&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;accessid&quot;,&nbsp;accessId);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;policy&quot;,&nbsp;encodedPolicy);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;signature&quot;,&nbsp;postSignature);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;dir&quot;,&nbsp;dir);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;host&quot;,&nbsp;host);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;expire&quot;,&nbsp;String.valueOf(expireEndTime&nbsp;/&nbsp;1000));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;respMap.put(&quot;expire&quot;,&nbsp;formatISO8601Date(expiration));\r\n\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jasonCallback&nbsp;=&nbsp;new&nbsp;JSONObject();\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jasonCallback.put(&quot;callbackUrl&quot;,&nbsp;callbackUrl);\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jasonCallback.put(&quot;callbackBody&quot;,\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;filename=${object}&amp;size=${size}&amp;mimeType=${mimeType}&amp;height=${imageInfo.height}&amp;width=${imageInfo.width}&quot;);\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jasonCallback.put(&quot;callbackBodyType&quot;,&nbsp;&quot;application/x-www-form-urlencoded&quot;);\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;base64CallbackBody&nbsp;=&nbsp;BinaryUtil.toBase64String(jasonCallback.toString().getBytes());\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;callback&quot;,&nbsp;base64CallbackBody);\r\n\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Assert.fail(e.getMessage());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(e.getMessage());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;respMap;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><pre>如何得知的这些？\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602172992411660217293045.png)\r\n\r\n点击&nbsp;Java→&nbsp;然后滚动查看：`应用服务器核心代码解析`</pre><ol class=\" list-paddingleft-2\"><li><p>给gateway网关配置路由到<code>gulimall-third-party</code></p><p><a href=\"http://localhost/api/third-party/oss/policy\">http://localhost/api/third-party/oss/policy</a></p><p>路由到→</p><p><a href=\"http://localhost:30000/third-party/oss/policy\">http://localhost:30000/third-party/oss/policy</a></p><p>gateway网关的路由配置：新增的配置的是<code>thirdparty_route</code> （第二个），注意顺序！！</p></li></ol><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;product_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://gulimall-product\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/product/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/$\\{segment}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;thirdparty_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://gulimall-third-party\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/third-party/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/$\\{segment}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;admin_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://renren-fast\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\\{segment}</pre><ol class=\" list-paddingleft-2\"><li><p>前台图片上传</p><p><a href=\"https://github.com/18476305640/fileBox/raw/master/%E6%9D%82%E9%A1%B9/upload.zip\">https://github.com/18476305640/fileBox/raw/master/杂项/upload.zip</a></p><p>下载前端图片上传组件文件, 将目录放在<code>components</code>目录：</p><p>multUpload.vue是多文件上传组件</p><p>singleUpload.vue 是单文件上传组件</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602298886211660229888093.png\" alt=\"\"/></p><p>在<code>brand-add-or-update.vue</code> ：在这里我们使用单文件上传组件</p></li></ol><pre>\r\n&nbsp;&lt;el-form-item&nbsp;label=&quot;品牌logo地址&quot;&nbsp;prop=&quot;logo&quot;&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;【3】使用组件--&gt;\r\n&nbsp;&nbsp;&lt;single-upload&nbsp;v-model=&quot;dataForm.logo&quot;&gt;&lt;/single-upload&gt;\r\n&lt;/el-form-item&gt;\r\n\r\n\r\nimport&nbsp;SingleUpload&nbsp;from&nbsp;&#39;@/components/upload/singleUpload&#39;&nbsp;//【1】导入组件\r\n...\r\n&nbsp;&nbsp;components:&nbsp;{&nbsp;SingleUpload&nbsp;},&nbsp;//【2】注册组件\r\n...</pre><pre>在页面上，就有了：\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602301454351660230145330.png)\r\n\r\n`singleUpload.vue`需要修改的地方：\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602303165221660230315649.png)\r\n\r\n想要图片不被CORS，需要在阿里云OSS上配置：\r\n\r\n&nbsp;&nbsp;动画演示：[https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660230750897动画.apng](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660230750897动画.apng)\r\n\r\n这里要显示为图片，还要这样优化：\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602316509761660231650572.png)\r\n\r\n`brand.vue`&nbsp;:</pre><pre>&lt;el-table-column&nbsp;prop=&quot;logo&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌logo地址&quot;&gt;\r\n&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;:src=&quot;scope.row.logo.indexOf(&#39;http&#39;)&nbsp;&gt;=&nbsp;0&nbsp;?&nbsp;scope.row.logo&nbsp;:&nbsp;defaultLogo&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;width:&nbsp;60px;&nbsp;height:&nbsp;60px&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&lt;/template&gt;\r\n&lt;/el-table-column&gt;</pre><h4>[<em>8.4</em>] 表单校验：前端</h4><p><code>src\\views\\modules\\product\\brand-add-or-update.vue</code></p><pre>...\r\n\r\n\r\ndataRule:&nbsp;{\r\n&nbsp;&nbsp;name:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;品牌名不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;logo:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;品牌logo地址不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;descript:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;介绍不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;showStatus:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;显示状态[0-不显示；1-显示]不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;firstLetter:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validator&nbsp;(rule,&nbsp;value,&nbsp;callback)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;===&nbsp;&#39;&#39;&nbsp;||&nbsp;!/^[a-zA-Z]$/.test(value))&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback(new&nbsp;Error(&#39;请输入一个英文字母作为首检索字母&#39;))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;sort:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validator&nbsp;(rule,&nbsp;value,&nbsp;callback)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;!==&nbsp;&#39;&#39;&nbsp;&amp;&amp;&nbsp;parseInt(value)&nbsp;+&nbsp;&#39;&#39;&nbsp;===&nbsp;value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback(new&nbsp;Error(&#39;请输入一个整数&#39;))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;]\r\n}\r\n\r\n\r\n\r\n....</pre><p><code>validator (rule, value, callback) {} </code>函数就是我们的自定义效验器，当不满足时</p><p><code> callback(new Error(&#39;请输入一个整数&#39;))</code></p><p>当满足时，直接</p><p><code> callback()</code></p><h4>[<em>8.5</em>] 表单数据检验：后端-JSR 303</h4><p>后端使用<code>JSR 303</code> 进行数据校验</p><ol class=\" list-paddingleft-2\"><li><p>Entity 中</p><p>①使用内置检验规则：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602724525801660272452292.png\" alt=\"\"/></p><p>示例：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602723282491660272328066.png\" alt=\"\"/></p><p>②自定义校验：使用@Pattern注解</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602719854661660271985048.png\" alt=\"\"/></p></li><li><p>在Controller</p><p>在前面加<code>@Valid</code> ，还可以在后面再加<code>BindingResult result</code> （作用时，自定义错误信息，如把信息简化放在R对象中）</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;保存\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/save&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;save(@Valid&nbsp;@RequestBody&nbsp;BrandEntity&nbsp;brand,&nbsp;BindingResult&nbsp;result){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(result.hasErrors())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashMap&lt;String,&nbsp;String&gt;&nbsp;map&nbsp;=&nbsp;new&nbsp;HashMap&lt;&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.getFieldErrors().forEach(item&nbsp;-&gt;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;field&nbsp;=&nbsp;item.getField();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;message&nbsp;=&nbsp;item.getDefaultMessage();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map.put(field,message);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.error(400,&quot;提交的数据不合法&quot;).put(&quot;data&quot;,map);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;brandService.save(brand);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><ol class=\" list-paddingleft-2\"><li><p>测试(以下logo、firstLetter不合法)</p></li></ol><pre>###\r\nPOST&nbsp;http://localhost/api/product/brand/save&nbsp;HTTP/1.1\r\nContent-Type:&nbsp;application/json\r\n\r\n{&quot;brandId&quot;:1235,&quot;name&quot;:&quot;小庄&quot;,&quot;logo&quot;:&quot;abchttps://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601832081761660183208023.png&quot;,&quot;descript&quot;:&quot;&quot;,&quot;showStatus&quot;:1,&quot;firstLetter&quot;:&quot;1&quot;,&quot;sort&quot;:1}</pre><pre>响应：</pre><pre>HTTP/1.1&nbsp;200&nbsp;OK\r\ntransfer-encoding:&nbsp;chunked\r\nVary:&nbsp;Origin,&nbsp;Access-Control-Request-Method,&nbsp;Access-Control-Request-Headers\r\nContent-Type:&nbsp;application/json\r\nDate:&nbsp;Fri,&nbsp;12&nbsp;Aug&nbsp;2022&nbsp;02:51:30&nbsp;GMT\r\nconnection:&nbsp;close\r\n\r\n{\r\n&nbsp;&nbsp;&quot;msg&quot;:&nbsp;&quot;提交的数据不合法&quot;,\r\n&nbsp;&nbsp;&quot;code&quot;:&nbsp;400,\r\n&nbsp;&nbsp;&quot;data&quot;:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;logo&quot;:&nbsp;&quot;logo必须是一个url地址&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;firstLetter&quot;:&nbsp;&quot;检索首字母只有一个字母&quot;\r\n&nbsp;&nbsp;}\r\n}</pre><h4>[<em>8.5</em>] 表单数据检验：后端-统一异常处理</h4><p>使用统一异常处理使统一数据校验的收集返回到前端</p><p>在<code>gulimall-common</code> 模块创建文件：<code>com.zhuangjie.common.exception.BizCodeEnum.java</code></p><p>(作用是，统一管理错误码与信息)</p><p>HTTP/1.1 200 OK</p><p>transfer-encoding: chunked</p><p>Vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers</p><p>Content-Type: application/json</p><p>Date: Fri, 12 Aug 2022 02:51:30 GMT</p><p>connection: close</p><p>{</p><p>&quot;msg&quot;: &quot;提交的数据不合法&quot;,</p><p>&quot;code&quot;: 400,</p><p>&quot;data&quot;: {</p><pre>&quot;logo&quot;:&nbsp;&quot;logo必须是一个url地址&quot;,\r\n\r\n&quot;firstLetter&quot;:&nbsp;&quot;检索首字母只有一个字母&quot;</pre><p>}</p><p>}</p><p>HTTP/1.1 200 OK</p><p>transfer-encoding: chunked</p><p>Vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers</p><p>Content-Type: application/json</p><p>Date: Fri, 12 Aug 2022 02:51:30 GMT</p><p>connection: close</p><p>{</p><p>&quot;msg&quot;: &quot;提交的数据不合法&quot;,</p><p>&quot;code&quot;: 400,</p><p>&quot;data&quot;: {</p><pre>&quot;logo&quot;:&nbsp;&quot;logo必须是一个url地址&quot;,\r\n\r\n&quot;firstLetter&quot;:&nbsp;&quot;检索首字母只有一个字母&quot;</pre><p>}</p><p>}</p><pre>package&nbsp;com.zhuangjie.common.exception;\r\n/***\r\n&nbsp;*&nbsp;错误码和错误信息定义类\r\n&nbsp;*&nbsp;1.&nbsp;错误码定义规则为5为数字\r\n&nbsp;*&nbsp;2.&nbsp;前两位表示业务场景，最后三位表示错误码。例如：100001。10:通用&nbsp;001:系统未知异常\r\n&nbsp;*&nbsp;3.&nbsp;维护错误码后需要维护错误描述，将他们定义为枚举形式\r\n&nbsp;*&nbsp;错误码列表：\r\n&nbsp;*&nbsp;&nbsp;10:&nbsp;通用\r\n&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;001：参数格式校验\r\n&nbsp;*&nbsp;&nbsp;11:&nbsp;商品\r\n&nbsp;*&nbsp;&nbsp;12:&nbsp;订单\r\n&nbsp;*&nbsp;&nbsp;13:&nbsp;购物车\r\n&nbsp;*&nbsp;&nbsp;14:&nbsp;物流\r\n&nbsp;*&nbsp;@author&nbsp;ZSY\r\n&nbsp;*/\r\npublic&nbsp;enum&nbsp;BizCodeEnum&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;系统未知异常\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;UNKNOWN_EXCEPTION(10000,&nbsp;&quot;系统未知异常&quot;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;参数校验错误\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;VALID_EXCEPTION(10001,&nbsp;&quot;参数格式校验失败&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;int&nbsp;code;\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;String&nbsp;message;\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BizCodeEnum(int&nbsp;code,String&nbsp;message)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.code&nbsp;=&nbsp;code;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.message&nbsp;=&nbsp;message;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;getCode()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this.code;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getMessage()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this.message;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p>在<code>gulimall-product</code>模块创建：<code>com.zhuangjie.gulimall.product.exception.MallExceptionControllerAdvice.java</code></p><p>统一处理了，数据校验失败的异常，对检验的异常的字段进行了列举。封装到data中。和全部异常统一处理。</p><p>怎么知道是什么异常，输出 e.getClass() 就可以知道，然后就可以单独处理</p><pre>package&nbsp;com.zhuangjie.gulimall.product.exception;\r\n\r\nimport&nbsp;com.zhuangjie.common.exception.BizCodeEnum;\r\nimport&nbsp;com.zhuangjie.common.utils.R;\r\nimport&nbsp;lombok.extern.slf4j.Slf4j;\r\nimport&nbsp;org.springframework.web.bind.MethodArgumentNotValidException;\r\nimport&nbsp;org.springframework.web.bind.annotation.ExceptionHandler;\r\nimport&nbsp;org.springframework.web.bind.annotation.RestControllerAdvice;\r\n\r\nimport&nbsp;java.util.HashMap;\r\n@Slf4j\r\n@RestControllerAdvice(basePackages&nbsp;=&nbsp;&quot;com.zhuangjie.gulimall.product.controller&quot;)\r\npublic&nbsp;class&nbsp;MallExceptionControllerAdvice&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;@ExceptionHandler(MethodArgumentNotValidException.class)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;handleValidException(MethodArgumentNotValidException&nbsp;e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;数据校验出现问题{}，异常类型：{}&quot;,e.getMessage(),e.getClass());&nbsp;//记录\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashMap&lt;String,&nbsp;String&gt;&nbsp;errMap&nbsp;=&nbsp;new&nbsp;HashMap&lt;&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.getBindingResult().getFieldErrors().forEach(item-&gt;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;field&nbsp;=&nbsp;item.getField();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;message&nbsp;=&nbsp;item.getDefaultMessage();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errMap.put(field,message);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;统一异常处理&quot;+e.getClass());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.error(BizCodeEnum.VALID_EXCEPTION.getCode(),BizCodeEnum.VALID_EXCEPTION.getMessage()).put(&quot;data&quot;,errMap);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;@ExceptionHandler(Exception.class)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;allException(Exception&nbsp;e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;出现问题{}，异常类型：{}&quot;,e.getMessage(),e.getClass());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.error(BizCodeEnum.UNKNOWN_EXCEPTION.getCode(),BizCodeEnum.UNKNOWN_EXCEPTION.getMessage());\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><h4>[<em>8.6</em>] 表单数据检验：后端-分组校验</h4><p>为什么需要分组校验？</p><p>新增时，id是不用传的，而更新时就必须要传，所以我们要进行分组。</p><ol class=\" list-paddingleft-2\"><li><p>创建分组</p><p>在<code>gulimall-product</code> 模块的<code>com.zhuangjie.gulimall.product.valid</code> 文件夹下创建两个接口：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602924732631660292472982.png\" alt=\"\"/></p><p>里面没有任何内容！</p></li><li><p>将分组应用到Entity</p><p>在<code>gulimall-product</code>模块中的entity &gt; BrandEntity.java</p><p>对<code>brandId</code> 字段作如何处理，多加一个<code>groups</code> ,表示在什么组下起作用</p></li></ol><pre>&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;*&nbsp;品牌id\r\n&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;@Null(message&nbsp;=&nbsp;&quot;新增时，不需要携带id&quot;,groups&nbsp;=&nbsp;AddGroup.class)\r\n&nbsp;&nbsp;@NotNull(message&nbsp;=&nbsp;&quot;更新时，必须携带id&quot;,groups&nbsp;=&nbsp;UpdateGroup.class)\r\n&nbsp;&nbsp;@TableId\r\n&nbsp;&nbsp;private&nbsp;Long&nbsp;brandId;</pre><ol class=\" list-paddingleft-2\"><li><p>将分组应用到Controller</p><p>BrandController.java：由之前 的<code>@Valid</code>变为<code>@Validated({XXXGroup.class})</code> ,表示使用哪个分组规则进行校验。</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;保存\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/save&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;save(@Validated({AddGroup.class})&nbsp;@RequestBody&nbsp;BrandEntity&nbsp;brand){\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;brandService.save(brand);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/update&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;update(@Validated({UpdateGroup.class})&nbsp;@RequestBody&nbsp;BrandEntity&nbsp;brand){\r\n&nbsp;&nbsp;&nbsp;&nbsp;brandService.updateById(brand);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>/**</p><ul class=\" list-paddingleft-2\"><li><p>保存</p></li></ul><p>*/</p><p>@RequestMapping(&quot;/save&quot;)</p><p>public R save(@Validated({AddGroup.class}) @RequestBody BrandEntity brand){</p><p>brandService.save(brand);</p><p>return R.ok();</p><p>}</p><p>/**</p><ul class=\" list-paddingleft-2\"><li><p>修改</p></li></ul><p>*/</p><p>@RequestMapping(&quot;/update&quot;)</p><p>public R update(@Validated({UpdateGroup.class}) @RequestBody BrandEntity brand){</p><p>brandService.updateById(brand);</p><p>return R.ok();</p><p>}</p><ol class=\" list-paddingleft-2\"><li><p>测试</p><p>比如我们在更新的时候不加brandId：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602927754401660292775324.png\" alt=\"\"/></p></li></ol><h4>[<em>8.7</em>] 表单数据检验：后端-自定义校验注解与校验器</h4><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603027607891660302760382.png\" alt=\"\"/></p><p>ListValue.java：自定义的注解与@URL那些是同级的</p><pre>package&nbsp;com.zhuangjie.gulimall.product.valid.examine;\r\n\r\nimport&nbsp;javax.validation.Constraint;\r\nimport&nbsp;javax.validation.Payload;\r\nimport&nbsp;java.lang.annotation.Documented;\r\nimport&nbsp;java.lang.annotation.Retention;\r\nimport&nbsp;java.lang.annotation.Target;\r\n\r\nimport&nbsp;static&nbsp;java.lang.annotation.ElementType.*;\r\nimport&nbsp;static&nbsp;java.lang.annotation.ElementType.TYPE_USE;\r\nimport&nbsp;static&nbsp;java.lang.annotation.RetentionPolicy.RUNTIME;\r\n\r\n@Documented\r\n@Constraint(validatedBy&nbsp;=&nbsp;{&nbsp;ListValueConstraintValidator.class&nbsp;})\r\n@Target({&nbsp;METHOD,&nbsp;FIELD,&nbsp;ANNOTATION_TYPE,&nbsp;CONSTRUCTOR,&nbsp;PARAMETER,&nbsp;TYPE_USE&nbsp;})\r\n@Retention(RUNTIME)\r\npublic&nbsp;@interface&nbsp;ListValue&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;message()&nbsp;default&nbsp;&quot;必须是指定的一些值&quot;;&nbsp;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;Class&lt;?&gt;[]&nbsp;groups()&nbsp;default&nbsp;{&nbsp;};\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;Class&lt;?&nbsp;extends&nbsp;Payload&gt;[]&nbsp;payload()&nbsp;default&nbsp;{&nbsp;};\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;int[]&nbsp;values()&nbsp;default&nbsp;{&nbsp;};\r\n}</pre><p>ListValueConstraintValidator.java: 自定义的校验器与上面的自定义注解ListValue对应！可以举一反三，创建新的自定义校验注解与校验器。</p><pre>package&nbsp;com.zhuangjie.gulimall.product.valid.examine;\r\n\r\nimport&nbsp;javax.validation.ConstraintValidator;\r\nimport&nbsp;javax.validation.ConstraintValidatorContext;\r\nimport&nbsp;java.util.HashSet;\r\nimport&nbsp;java.util.Set;\r\n\r\n/**\r\n&nbsp;*&nbsp;@author&nbsp;ZSY\r\n&nbsp;*/\r\npublic&nbsp;class&nbsp;ListValueConstraintValidator&nbsp;implements&nbsp;ConstraintValidator&lt;ListValue,&nbsp;Integer&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;Set&lt;Integer&gt;&nbsp;set&nbsp;=&nbsp;new&nbsp;HashSet&lt;&gt;();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;初始化方法\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;参数：自定义注解的详细信息\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;initialize(ListValue&nbsp;constraintAnnotation)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int[]&nbsp;values&nbsp;=&nbsp;constraintAnnotation.values();&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;val&nbsp;:&nbsp;values)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set.add(val);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;判断是否校验成功\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;value&nbsp;&nbsp;&nbsp;需要校验的值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;context\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;isValid(Integer&nbsp;value,&nbsp;ConstraintValidatorContext&nbsp;context)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;set.contains(value);&nbsp;//set是在使用时放在注解上的&nbsp;value才是要校验的值\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p>使用：使用与内置的注解别无二致</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603033647161660303364249.png\" alt=\"\"/></p><p>测试：里面对象的showStatus属性值为3，会出问题。</p><pre>###\r\nPOST&nbsp;http://localhost/api/product/brand/save&nbsp;HTTP/1.1\r\nContent-Type:&nbsp;application/json\r\n\r\n{&quot;name&quot;:&quot;小庄&quot;,&quot;logo&quot;:&quot;https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601832081761660183208023.png&quot;,&quot;descript&quot;:&quot;&quot;,&quot;showStatus&quot;:3,&quot;firstLetter&quot;:&quot;A&quot;,&quot;sort&quot;:0}</pre><p>响应</p><pre>HTTP/1.1&nbsp;200&nbsp;OK\r\ntransfer-encoding:&nbsp;chunked\r\nVary:&nbsp;Origin,&nbsp;Access-Control-Request-Method,&nbsp;Access-Control-Request-Headers\r\nContent-Type:&nbsp;application/json\r\nDate:&nbsp;Fri,&nbsp;12&nbsp;Aug&nbsp;2022&nbsp;11:27:30&nbsp;GMT\r\nconnection:&nbsp;close\r\n\r\n{\r\n&nbsp;&nbsp;&quot;msg&quot;:&nbsp;&quot;参数格式校验失败&quot;,\r\n&nbsp;&nbsp;&quot;code&quot;:&nbsp;10001,\r\n&nbsp;&nbsp;&quot;data&quot;:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;showStatus&quot;:&nbsp;&quot;必须是指定的一些值&quot;\r\n&nbsp;&nbsp;}\r\n}</pre><h3>[<em>9</em>] 属性分类</h3><h4>[<em>9.1</em>] 属性分类：SPU与SKU的说明</h4><p><code>SPU</code> ：商品自身固定的属性</p><pre>Standard&nbsp;Product&nbsp;Unit&nbsp;标准化产品单元：是商品信息聚合的最小单位，是一组可复用、易检索的标准化信息的集合，该集合描述了一个产品的特性。</pre><p>SPU: Standard Product Unit（标准产品单位）</p><pre>-&nbsp;SPU&nbsp;是商品信息聚合的最小单位，是一组可复用、易检索的标准化信息的集合，该集合描述了一个产品的特性。&nbsp;&nbsp;\r\n-&nbsp;通俗点讲，属性值、特性相同的商品就可以称为一个&nbsp;SPU。&nbsp;&nbsp;\r\n-&nbsp;例如：iPhone&nbsp;12就是一个&nbsp;SPU，与商家，与颜色、款式、套餐都无关。</pre><p><code>SKU</code> :能决定库存的基本单位</p><pre>Stock&nbsp;Keeping&nbsp;Unit&nbsp;库存量单位：即库存进出计量的基本单元，可以是以件、盒等为单位。SKU这是对于大型连锁超市&nbsp;DC&nbsp;(配送中心)物流管理的一个必要的方法。现在已经被引申为产品统一编号的简称，每种产品均对应有唯一的SKU号。</pre><p>SKU: Stock Keeping Unit(库存量单位)</p><pre>-&nbsp;SKU&nbsp;即库存进出计量的单位，&nbsp;可以是以件、盒、托盘等为单位。&nbsp;&nbsp;\r\n-&nbsp;SKU&nbsp;是物理上不可分割的最小存货单元。在使用时要根据不同业态，不同管理模式来处理。&nbsp;&nbsp;在服装、鞋类商品中使用最多最普遍。</pre><p>例如： iPhone 12 的颜色(深空灰等)，存储容量(64GB 256GB)。</p><blockquote><p>举例说明：</p></blockquote><pre>iPhoneX&nbsp;是&nbsp;SPU、MI8&nbsp;是&nbsp;SPU</pre><p>iPhoneX 64G 黑曜石是 SKU<br/>MI8 8+64G 黑色是 SKU</p><p>基础属性【规格参数】与销售属性<br/>每个分类下的商品共享规格参数与销售属性。知识有些商品不一定要用这个分类下全部的属性。</p><ul class=\" list-paddingleft-2\"><li><p>属性是以三级分类组织起来的；</p></li><li><p>规格参数中有些是可以提供检索的；</p></li><li><p>规格参数也是基本属性，他们具有自己的分组；</p></li><li><p>属性的分组也是以三级分类组织起来的；</p></li><li><p>属性名是确定的，但是值是每一个商品不同决定的；</p></li></ul><p>商品的基础属性是SPU的特性，商品的销售属性是SKU的特性。</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603152996891660315299288.png\" alt=\"\"/></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603153096251660315309540.png\" alt=\"\"/></p><h4>[<em>9.2</em>] 属性分类：前端页面</h4><ol class=\" list-paddingleft-2\"><li><p>之前我们都需要在后端管理创建目录/菜单 那些的，为了不麻烦，我们直接执行sql，修改数据。</p><p><a href=\"https://github.com/18476305640/gulimall/blob/dev/%E6%96%87%E4%BB%B6%E4%BB%93%E5%82%A8/sql%E6%96%87%E4%BB%B6/data/sys_menus.sql\">https://github.com/18476305640/gulimall/blob/dev/文件仓储/sql文件/data/sys_menus.sql</a></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603156122651660315612037.png\" alt=\"\"/></p><p>在上面的数据库中执行sql，然后就有了</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603156556491660315655560.png\" alt=\"\"/></p><p>现在我们要生成数据vue组件，即要使用<code>renren-generator</code>模块生成前端的代码：</p><p><a href=\"https://github.com/18476305640/fileBox/raw/master/%E6%9D%82%E9%A1%B9/renren_5.zip\">https://github.com/18476305640/fileBox/raw/master/杂项/renren_5.zip</a></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603160227511660316022386.png\" alt=\"\"/></p><p>得到这两个文件后，放在<code>src\\views\\modules\\product</code> 目录下：在<code>attgroup.vue</code> 组件的左边添加三级分类：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603161435001660316143386.png\" alt=\"\"/></p><p>那首先我们需要封装左边的组件category.vue，然后在<code>attgroup.vue</code>组成上注册category组件，然后放在<code>attgroup.vue</code>上：</p><p>创建组件：</p><p><code>src\\views\\modules\\common\\category.vue</code> ：没有之前三级分类的一些内容，只显示分类树即可。</p></li></ol><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&nbsp;:expand-on-click-node=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-key=&quot;catId&quot;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;&nbsp;ref=&quot;categoryTree&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick&nbsp;(data,&nbsp;node,&nbsp;vc)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(data,&nbsp;node,&nbsp;vc)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;tree-node-click&#39;,&nbsp;data,&nbsp;node,&nbsp;vc)\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n.drop-control&nbsp;{\r\n&nbsp;&nbsp;display:&nbsp;flex;\r\n&nbsp;&nbsp;align-items:&nbsp;center;\r\n&nbsp;&nbsp;height:&nbsp;40px;\r\n}\r\n&lt;/style&gt;</pre><pre>然后通过子传父，即当树的节点点击后，在触发的函数中，向父组件发送事件</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick&nbsp;(data,&nbsp;node,&nbsp;vc)&nbsp;{&nbsp;//子节点点击触发的函数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(data,&nbsp;node,&nbsp;vc)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;tree-node-click&#39;,&nbsp;data,&nbsp;node,&nbsp;vc)\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p><br/></p>','2022-08-05 21:36:03',1,1,'2022-08-16',-1,0),(277,1,'Clash教程','<h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">1、安装软件</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><strong>Windows/Mac/Linux&nbsp;:&nbsp;&nbsp;<a href=\"https://github.com/Fndroid/clash_for_windows_pkg/releases\" target=\"_blank\" data-mce-href=\"https://github.com/Fndroid/clash_for_windows_pkg/releases\">Class官方版（github）&gt;&gt;</a>&nbsp; &nbsp;&nbsp;&nbsp;# 想要汉化？&nbsp;&nbsp;<a href=\"https://github.com/ender-zhao/Clash-for-Windows_Chinese/releases\" target=\"_blank\" data-mce-href=\"https://github.com/ender-zhao/Clash-for-Windows_Chinese/releases\">汉化补丁 &amp;&amp; 教程&gt;&gt;</a></strong></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">or 安卓：<a href=\"https://github.com/Kr328/ClashForAndroid/releases/\" target=\"_blank\" data-mce-href=\"https://github.com/Kr328/ClashForAndroid/releases/\">安卓Clash&gt;&gt;</a></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">or 苹果：Shadowrocket软件&nbsp;（&nbsp;美版Appid+已拥有shadowrocket软件 购买：https://www.xiaohuojian8.com/p/2.html）</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">　　</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000541055283.png\" alt=\"\" width=\"526\" height=\"435\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202204/2160655-20220430134209593-1546554774.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;然后，直接安装。</p><h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">2、获取链接</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><strong>什么是机场？</strong>提供上wai网服务的，人家提供服务器，代理你的网络。</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><strong>注意事项：</strong>有些机场网站，打开可能需要wai网才能访问，那你需要借助“<a href=\"https://www.musclevpn.com/web-proxy/index.php\" target=\"_blank\" data-mce-href=\"https://www.musclevpn.com/web-proxy/index.php\">直接代理工具</a>(网页)”了</p><ul style=\"padding-left: 40px; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\" class=\" list-paddingleft-2\"><li><p><strong>一元机场</strong>（11元/年，每月100G）：https://一元机场.com&nbsp; &nbsp; &nbsp;感谢博主？<a href=\"https://xn--4gq62f52gdss.com/#/register?code=8JLgI6t9\" target=\"_blank\" data-mce-href=\"https://xn--4gq62f52gdss.com/#/register?code=8JLgI6t9\">从这里去注册&gt;&gt;</a></p></li><li><p><strong>猪猪机场</strong>（购买流量, 时间长到可以忽略，比较优惠）https://zhuzhu12.xyz&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 感谢博主？<a href=\"https://zhuzhu12.xyz/auth/register?code=WTcB\" target=\"_blank\" data-mce-href=\"https://zhuzhu12.xyz/auth/register?code=WTcB\">从这里去注册&gt;&gt;</a></p></li><li><p><strong>阿菠萝机场</strong>（速度快，价格优惠，3.99/月/120G）：https://xn--6p1awey07c.xyz/&nbsp; 感谢博主？<a href=\"https://xn--6p1awey07c.xyz/#/register?code=eTBaHNWK\" target=\"_blank\" data-mce-href=\"https://xn--6p1awey07c.xyz/#/register?code=eTBaHNWK\">从这里去注册&gt;&gt;</a></p></li></ul><p><a href=\"https://www.cnblogs.com/zhuangjie/p/16028473.html\" target=\"_blank\" data-mce-href=\"https://www.cnblogs.com/zhuangjie/p/16028473.html\"><strong>更多</strong>（进入后Ctrl+F搜索“机场”, 机场介绍可能已过期，具体请注册查看）&gt;&gt;</a></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">然后去<strong>注册=&gt; 登录网站=&gt; 购买订阅=&gt; 获取订阅链接<strong>（如果有多种订阅方式，请选择clash订阅）</strong></strong></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000601050110.png\" alt=\"\" width=\"774\" height=\"385\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202204/2160655-20220430134609491-92901192.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">3、导入订阅</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">打开刚才安装的软件（clash）</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000673070744.png\" alt=\"\" width=\"936\" height=\"664\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202204/2160655-20220430134720722-1537293044.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">然后在选择刚导入的一项。接着=&gt;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">全局：不管是国内不是国外的流量都代理</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">规则：规定了那些不需要代理</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000706094757.png\" alt=\"\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202207/2160655-20220717222707472-1824306734.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">选择“节点选择的方式”，接着设置一下订阅的更新时间（不设置，可能有一天用不了）=&gt;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;<img src=\"/fileUpload/image/20220908/1662642000775015578.png\" alt=\"\" width=\"971\" height=\"262\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202204/2160655-20220430143441658-463087469.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">4、开启代理</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000803077947.png\" alt=\"\" width=\"1042\" height=\"740\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202204/2160655-20220430134938302-1692461265.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">5、测试可用</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">浏览器打开谷歌：<a href=\"https://www.google.com/\" target=\"_blank\" data-mce-href=\"https://www.google.com\">https://www.google.com/&nbsp;&nbsp;</a></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">能打开就OK了。</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">6、解决无法上网的问题</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">方式一：启动clash软件 ，并设置为开机自启 &amp;&amp; 启动代理；</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">方式二：进行系统设置，搜索“代理”，然后：</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000834040553.png\" alt=\"\" width=\"1058\" height=\"720\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202204/2160655-20220430135139367-1380758816.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">7、可能会遇到的问题</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">（1）有些网站，打开 代理后，不能访问，这可能是网站的一些机制。此时你要关闭Clash代理。</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p><strong style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">本教程可就此结束~</strong></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">&nbsp;#、[进阶] 共享到局域网</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;局域网比如同一热点下的。</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">开启共享</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000867055433.png\" alt=\"\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202208/2160655-20220810231024024-1887605978.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;局域网中本机的ip</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000897093181.png\" alt=\"\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202208/2160655-20220810231214348-901044045.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;局域网的其它设备，设置代理（连上wifi后，wifi中配置代理），手机就可以上wai网了</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000927000149.png\" alt=\"\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202208/2160655-20220810231313066-880175291.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">#、[进阶] 想节省的内存？</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">须知：上网体验自然不如非轻量模式。</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000960043394.png\" alt=\"\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202205/2160655-20220510175017542-133624467.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><h2 style=\"font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: normal;\">&nbsp;#、[进阶] 不想使用系统的代理来进行上网？</h2><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">开启UWP或TUN模式。</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><strong>TUM模式：</strong></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><img src=\"/fileUpload/image/20220908/1662642000992064681.png\" alt=\"\" loading=\"lazy\" data-mce-src=\"https://img2022.cnblogs.com/blog/2160655/202205/2160655-20220510175340651-1060626719.png\" style=\"border: 0px; cursor: default; max-width: 100%; height: auto;\"/></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;TAP模式：推荐使用TUM，TAP上官网自行学习。<a href=\"https://docs.cfw.lbyczf.com/contents/tap.html#%E5%AE%89%E8%A3%85-tap-%E7%BD%91%E5%8D%A1\" target=\"_blank\" data-mce-href=\"https://docs.cfw.lbyczf.com/contents/tap.html#%E5%AE%89%E8%A3%85-tap-%E7%BD%91%E5%8D%A1\">跳转&gt;&gt;</a></p><p><br/></p>','2022-08-13 22:36:56',1,0,'2022-09-08',1,0),(278,1,'小庄的网站收藏室','<p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">我来wolai（最为推荐的md类在线笔记）：https://www.wolai.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">Gitmind (不错的一款在线思维导图）：https://gitmind.cn/app/my</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">B站（虽然谁都知道，但我还是要说，它不但是一个视频网站, 还是程序员学习的天堂）：https://www.bilibili.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">Java全栈学习路线（狂神）：https://www.kuangstudy.com/course</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">六音软件（软件收集站点）：https://www.6yit.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">程序员DD（Java小新闻类）：https://blog.didispace.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">搜云（Java技术视频）：https://tech.souyunku.com/?p=49915</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">最强正则测试工具：https://regex101.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">考研政治知识点：https://www.kaoyan.com/z2018/hzdmzt/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">国外有名的笔记网站（notion）：https://www.notion.so/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">阮一峰大神博客：https://www.ruanyifeng.com/blog/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">程序员导航：https://www.cxy521.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">网站情报局（收集有一些可用的影视网站）：https://www.cia123.com/yingshishipin/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">阿里云盘资源搜索（奈斯搜索）：https://www.niceso.fun/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">鸠摩搜索（书籍搜索）：&nbsp;https://www.jiumodiary.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">国内可访问的google内容无差别搜索引擎（searx）：https://searx.tiekoetter.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">去除人声工具：https://vocalremover.org/ch/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">吾爱破解（强大）：https://www.52pojie.cn/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">[程序员] JDK8/1.8中文文档：https://www.matools.com/api/java8</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">[程序员] JDK11中文文档：https://www.runoob.com/manual/jdk11api/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">程序员装备：https://playmei.com/gear/coder.html</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">[程序员] IDEA激活码（作者会维护激活码的有效性）：https://docs.qq.com/doc/DTVh3bkxWSEpvVm5N</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">processOn（好但有比较致命的限制，流程图数量限制）：https://www.processon.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">小说阅读神器（koodo）：https://koodo.960960.xyz/zh</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">恩山论坛（主打路由器）：https://www.right.com.cn/forum/forum.php</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">linux一些常用软件（flathub）：https://flathub.org/apps/collection/popular</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">KDE (linux桌面, 比较好看的一个）: https://kubuntu.org/feature-tour/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">乐愚社区（白嫖党的乐园）：https://bbs.leyuz.net/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">燕鹿系统（什么林雨大风，非原版系统的集合）：https://www.yanlutong.com/windows/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">牛客（程序员刷题神站）：https://www.nowcoder.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">瑞客论坛（不靠谱的教程分享网站，垃圾，但资源比较多在这里作个记录）：https://www.ruike1.com/forum.php</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">国内奈飞：https://yanetflix.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">茶杯狐（影视聚合搜索）：https://cupfox.app/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">linux论坛：https://linux.cn/news/&nbsp; &nbsp; &nbsp;</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">linux公社：https://www.linuxfans.org/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">f搜（国内新秀搜索引擎）：https://fsofso.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">声音素材（什么狗听，鸡听声）：https://www.tosound.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">浏览器密码管理插件（Bitwarden&nbsp;）：https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb?hl=zh</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">how2j&nbsp;（&nbsp;Java与前端教程，教程与学习路线）：https://how2j.cn/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">内网穿透：https://natapp.cn/login</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">在线转换（比如：word转PDF）：https://www.aconvert.com/cn/pdf/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">PDF高质量转换（pdf转word）：https://smallpdf.com/cn，https://tools.pdf24.org/zh/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">编程语言排行：https://www.tiobe.com/tiobe-index/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">在线扣图：https://photokit.com/?lang=zh</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">Z-Library （书籍搜索，在线图书馆）：https://zh.hk1lib.org/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">极客笔记（配合git仓库使用, 个人还是推荐这个：wolai）：https://www.geekeditor.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">猪猪机场（配合clash使用, 实现google搜索）：https://zhuzhu12.xyz/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">一元机场（机场，够快，够便宜，够划算)：https://xn--4gq62f52gdss.com/#/dashboard</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\"># galaxy机场 (<strong>不再推荐</strong>)：https://subscribe.galaxy-cloud.link/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">百度网盘解析（需要关注，获取口令，推荐：https://www.cnblogs.com/zjazn/p/15797028.html中推荐的方式，但你会ke学网）：https://kinhdown.com/?Type=Web</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">极简壁纸（不错）：https://bz.zzzmh.cn/index</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">frp内网穿透技术（你需要有一个公网的服务器）：https://gofrp.org/docs/examples/ssh/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">UP云搜（阿里云资源搜索）：https://upyunso3.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">远景论坛（比如黑苹果）：https://bbs.pcbeta.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">全历史（了解全世界的历史）：https://www.allhistory.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">在线PDF工具：https://tools.pdf24.org/zh/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">果核剥壳（软件收集站，很不错，但给的下载链接都是限速的，比如百度网盘）：https://www.ghxi.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">在线扣图：https://www.remove.bg/zh</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">Hedgedoc（非常不错的MD类笔记网）：https://demo.hedgedoc.org/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">临时邮箱（邮箱收码）：https://www.linshiyouxiang.net/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">金山简历：https://www.wondercv.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">手机接码（用来注册谷歌就算了~）：http://www.z-sms.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">在线字符替换：http://tool.huixiang360.com/str/replace.php</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">聚BT(懂的都懂)：https://jubt.live/cn/index.html</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">平面设计论坛（比如很容易在这里找到Adobe类的破解版）：https://feitianwu7.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">鱼鱼中文网（什么小说都有）：http://www.yuyuzw.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">[程序员] yaml与properties互转：https://toyaml.com/index.html</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">[程序员] 渐变背景: https://webgradients.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">[程序员] 数据结构可视化（比如树结点添加的可视化）：https://visualgo.net/zh</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">webtor（磁力在线解析转http下载，在线播放）：https://webtor.io/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">磁力猫（特点是可以筛选以 热点，文件类型）：https://xn--tfru1cl63cn5e.com/&nbsp; 或磁力天堂：https://xn--tfrq9jjzak83g.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">老年人生活录：https://www.cnblogs.com/zjazn/p/16029130.html</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">偷懒工具（在线文字转语音，适合作视频非真人讲解）：https://toolight.cn/media/reading</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">小众软件（软件集合）：https://www.appinn.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">flowus在线笔记（我来笔记替换品，但这个明显不如wolai，比如无法导入导出 2022/03/24）：https://flowus.cn/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">黑苹果macOS镜像下载：https://mirrors.dtops.cc/ISO/MacOS/&nbsp;&nbsp;</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">黑苹果UFI现成配置：https://imacosx.com/efi/1764.html&nbsp; &nbsp; &nbsp; &nbsp;https://github.com/sqlsec/clover</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">黑苹果OpenCore配置排错：https://opencore.slowgeek.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">黑苹果OpenCore编辑器： https://github.com/ic005k/OCAuxiliaryTools/releases</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">黑苹果OpenCore驱动下载：https://dortania.github.io/OpenCore-Install-Guide/ktext.html</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">黑苹果硬盘选购指南：https://www.tonymacx86.com/buyersguide/building-a-customac-hackintosh-the-ultimate-buyers-guide/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">window11系统优化工具（系统修复，win+x设置，设置系统还原点等等，一个工具箱，删除多系统启动点）：https://ghpym.lanzoui.com/itPYE028dz7g</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">凌云机场（流畅看8K，比较良心的机场）：https://bb.xxss.org/#/register?code=9HGM3z0O&nbsp; &nbsp;&nbsp;</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">Fenglingcloud (每月可白嫖10G，良心机场)：https://www.flyun.org/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">r2coding（编程自学之路牛逼的编程学习路线）：https://www.r2coding.com/#/README</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">闪电 (2022-5-1&nbsp; 3.5元/月/120G ,月付/季付 节点质量不一样！ 良心机场)：https://sdyun.cc/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">windows系统镜像下载（提供ed2k、bt下载源）：https://hellowindows.cn/hw/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">推荐购买的Appid:https://store.kxsw.org/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">推荐购买的Shadowrocket软件兑换码：https://44km.in/buy/3</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">[程序员] 易百教程（易懂）：https://www.yiibai.com/&nbsp;</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">手机接码（可以用来注册谷歌账号，注册后请绑定你的信息）：<a href=\"https://yunduanxin.net/\" rel=\"nofollow\" data-mce-href=\"https://yunduanxin.net/\">https://yunduanxin.net/</a>&nbsp; &nbsp; 还有一个（这个不知道能否注册谷歌）&nbsp; &nbsp; &nbsp;https://www.storytrain.info/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">[程序员]&nbsp;rbtree（集成了一些技术教程，正则、算法可视化等c，ron表达式）：http://www.rbtree.cn/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">奈斯（阿里云盘资源搜索）：https://www.niceso.fun/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">up云搜（阿里云盘资源搜索）：https://www.upyunso.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">macOSicons&nbsp;(一个 macos 的软件图标库): https://macosicons.com/#/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">余胜军学习路线+其自制的学习资源（比较牛的java大佬，很多人家底层都学得非常不错）https://docs.qq.com/doc/DRkxOSUpqam14Wmty</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">余胜军对标p7的java学习路线(内容集到一个思维导图中，非常不错，很牛逼): https://processon.com/view/link/5f4bddd51e0853452d431835#map</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\"># DnsFree机场（最低2元/2000G/月，但速度真的很一般）：https://port.dnsfree.top/#/plan</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">CN2免流机场（最低3.5元/月/40G, 速度一般）：https://justcn2.top/user/shop</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">老八机场（速度一般，9.9元/年+6%额外费用）：https://52laoba.xyz/index.php#/plan</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">莉莉安（当前为纯白嫖机场，无付费套餐）：https://ssrr.xyz/#/plan</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\"># 加速猫（注册体验100G一个月）：https://jsmao.net/user</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">尚硅谷 Java教程官方全套（如果失效，请关注“尚硅谷教育”公众号，回复“java”获取）：https://pan.baidu.com/s/1Kg7UUpO3wwALX6x28cWA7A，提取码：8op3</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">尚硅谷 Java教程学习路线：http://www.atguigu.com/download.shtml#weifuwushengtai3</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">上外-网测速：https://www.bandwidthplace.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">speedtest（普通网测速，不是用来测外-网的）：https://www.speedtest.net/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">paypal (国际支付)：https://www.paypal.com/&nbsp;</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">阿伟云机场（ 5G/1元/月、100G/9.99元/月等套餐，速度还可以）：https://awslcn.xyz/#/dashboard</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">github文件加速：https://github.com/hunshcn/gh-proxy</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">&nbsp;国内奈飞2（免费看奈飞电影）：https://www.naifei.org/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">手机排行（购机参考）：http://antutuwx.cmcm.com/chart/wx/top/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">邮政编码查询：http://alexa.ip138.com/post/search.asp&nbsp;</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">webGL水族馆（测试电脑性能）：https://webglsamples.org/aquarium/aquarium.html</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">新华云（10元/月/110G,有优惠码）：https://newhua99.com/#/plan</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">阿菠萝机场（速度快，价格优惠，3.99/月/120G）：https://xn--6p1awey07c.xyz/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">小庄的软件收藏室：https://www.cnblogs.com/zjazn/p/15797028.html</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">MacWk（mac精品软件）：https://macwk.com/&nbsp;</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">翻&amp;墙论坛（机场论坛，机场评测，各种机场）：https://fanqiangdang.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\"><a class=\"font-size-lg text-white\" href=\"https://v2.nanoport.xyz/\" data-mce-href=\"https://v2.nanoport.xyz/\">nanoPort</a>机场（有2、3.98、6.88元/每月的订阅，流量充足，速度还行）：&nbsp;https://v2.nanoport.xyz/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">musclevpn（通过页面直接代理）：https://www.musclevpn.com/web-proxy/index.php?q=ztmpo9agX2ev2N1hnqLSzNCcYsWk0w</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">黑马程序员（Java教学视频全集）：下载地址：https://pan.baidu.com/s/1LxIxcHDO7SYB96SE-GZfuQ?pwd=dor4 提取码：dor4</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">黑马程序员（大数据视频教程）：下载地址：https://pan.baidu.com/s/1PkCjWWCF9EEG6KQrC255hA?pwd=1234 提取码：1234</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">高分影视（不错的看剧网站，条件筛选）：https://www.gaofen1.com/s.php?key=1</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">优聚搜（百度资源搜索）：https://ujuso.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">百度网盘加速(会员账号租借，11元/30天 包售后)：https://query.ykuu.cn/list.html</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">橘子盘搜（从各网盘中搜索影视）：https://www.nmme.cc/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">&nbsp;美版Appid+已拥有shadowrocket软件 购买：https://www.xiaohuojian8.com/p/2.html</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">&nbsp;github&nbsp;<span class=\"mr-2 flex-self-stretch\"><a href=\"https://github.com/ermaozi/get_subscribe\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" data-mce-href=\"https://github.com/ermaozi/get_subscribe\">get_subscribe</a>&nbsp;(</span>白嫖订阅, github分享）：https://github.com/ermaozi/get_subscribe</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">电视台-影视-报刊（电视台-影视-报刊）：http://qikan.lifves.com/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">海角社区（18禁）：https://hjada.com/&nbsp;&nbsp;</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\">Java全栈知识体系（知识与面试题）：https://pdai.tech/</p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\"><span data-mce-style=\"color: #ff0000;\" style=\"color: rgb(255, 0, 0)\"><strong>博主持续追加中....</strong></span></p><p style=\"margin: 10px auto;font-family: \" pingfang=\"\" helvetica=\"\" font-size:=\"\" white-space:=\"\"><strong><span data-mce-style=\"color: #ff0000;\" style=\"color: rgb(255, 0, 0)\">投稿请联系我（左边展开下面的联系）~&nbsp;</span></strong></p><p>&nbsp;</p><p><br/></p>','2022-08-14 22:38:08',3,0,'2022-08-17',1,0),(280,1,'MyBatis','<h1>+ Mybatis简介</h1><h2>MyBatis历史</h2><ul class=\" list-paddingleft-2\"><li><p>MyBatis最初是Apache的一个开源项目iBatis, 2010年6月这个项目由Apache Software Foundation迁移到了Google Code。随着开发团队转投Google Code旗下，iBatis3.x正式更名为MyBatis。代码于2013年11月迁移到Github</p></li><li><p>iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。iBatis提供的持久层框架包括SQL Maps和Data Access Objects（DAO）</p></li></ul><h2>MyBatis特性</h2><ol class=\" list-paddingleft-2\"><li><p>MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架</p></li><li><p>MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集</p></li><li><p>MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java Objects，普通的Java对象）映射成数据库中的记录</p></li><li><p>MyBatis 是一个 半自动的ORM（Object Relation Mapping）框架（ORM 框架是一种数据持久化技术，即在Java对象模型和数据库关系型数据库之间建立起对应关系，并且提供一种机制，可通过 JavaBean 对象操作数据库表中的数据）</p></li></ol><h2>MyBatis下载</h2><ul class=\" list-paddingleft-2\"><li><p><a href=\"https://github.com/mybatis/mybatis-3\">MyBatis下载地址</a></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154254689.png\" alt=\"\"/></p></li></ul><h2>和其它持久化层技术对比</h2><ul class=\" list-paddingleft-2\"><li><p>JDBC</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>SQL 夹杂在Java代码中耦合度高，导致硬编码内伤</p></li><li><p>维护不易且实际开发需求中 SQL 有变化，频繁修改的情况多见</p></li><li><p>代码冗长，开发效率低</p></li></ul><li><p>Hibernate 和 JPA</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>操作简便，开发效率高</p></li><li><p>程序中的长难复杂 SQL 需要绕过框架</p></li><li><p>内部自动生产的 SQL，不容易做特殊优化</p></li><li><p>基于全映射的全自动框架，大量字段的 POJO 进行部分映射时比较困难。</p></li><li><p>反射操作太多，导致数据库性能下降</p></li></ul><li><p>MyBatis</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>轻量级，性能出色</p></li><li><p>SQL 和 Java 编码分开，功能边界清晰。Java代码专注业务、SQL语句专注数据</p></li><li><p>开发效率稍逊于HIbernate，但是完全能够接受</p></li></ul></ul><h1>[<em>1</em>] 搭建MyBatis</h1><h2>开发环境</h2><ul class=\" list-paddingleft-2\"><li><p>MySQL版本：MySQL 5.7</p></li><li><p>MyBatis版本：MyBatis 3.5.7</p></li></ul><h2>创建maven工程</h2><ul class=\" list-paddingleft-2\"><li><p>打包方式：jar</p></li><li><p>引入依赖</p></li></ul><pre>&lt;dependencies&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;Mybatis核心&nbsp;--&gt;\r\n&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.mybatis&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mybatis&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;3.5.7&lt;/version&gt;\r\n&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;junit测试&nbsp;--&gt;\r\n&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;junit&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;4.12&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;scope&gt;test&lt;/scope&gt;\r\n&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;MySQL驱动&nbsp;--&gt;\r\n&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;5.1.3&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&lt;/dependencies&gt;</pre><h2>创建MyBatis的核心配置文件</h2><blockquote><p>习惯上命名为<code>mybatis-config.xml</code>，这个文件名仅仅只是建议，并非强制要求。将来整合Spring之后，这个配置文件可以省略，所以大家操作时可以直接复制、粘贴。\r\n核心配置文件主要用于配置连接数据库的环境以及MyBatis的全局配置信息\r\n核心配置文件存放的位置是src/main/resources目录下</p></blockquote><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;\r\n&lt;!DOCTYPE&nbsp;configuration\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PUBLIC&nbsp;&quot;-//mybatis.org//DTD&nbsp;Config&nbsp;3.0//EN&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;\r\n&lt;configuration&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;environments&nbsp;default=&quot;development&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;environment&nbsp;id=&quot;development&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transactionManager&nbsp;type=&quot;JDBC&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dataSource&nbsp;type=&quot;POOLED&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;driver&quot;&nbsp;value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;url&quot;&nbsp;value=&quot;jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;username&quot;&nbsp;value=&quot;root&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;password&quot;&nbsp;value=&quot;3333&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dataSource&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/environment&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/environments&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;mappers&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;mapper&nbsp;resource=&quot;mapper/UserMapper.xml&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/mappers&gt;\r\n&lt;/configuration&gt;</pre><h2>创建mapper接口</h2><blockquote><p>MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要提供实现类</p></blockquote><pre>package&nbsp;com.atguigu.mybatis.mapper;&nbsp;&nbsp;\r\n&nbsp;&nbsp;\r\npublic&nbsp;interface&nbsp;UserMapper&nbsp;{&nbsp;&nbsp;\r\n&nbsp;&nbsp;/**&nbsp;&nbsp;\r\n&nbsp;&nbsp;*&nbsp;添加用户信息&nbsp;&nbsp;\r\n&nbsp;&nbsp;*/&nbsp;&nbsp;\r\n&nbsp;&nbsp;int&nbsp;insertUser();&nbsp;&nbsp;\r\n}</pre><h2>创建MyBatis的映射文件</h2><ul class=\" list-paddingleft-2\"><li><p>相关概念：ORM（Object Relationship Mapping）对象关系映射。</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>对象：Java的实体类对象</p></li><li><p>关系：关系型数据库</p></li><li><p>映射：二者之间的对应关系</p></li></ul></ul><table><thead><tr class=\"firstRow\"><th>Java概念</th><th>数据库概念</th></tr></thead><tbody><tr><td>类</td><td>表</td></tr><tr><td>属性</td><td>字段/列</td></tr><tr><td>对象</td><td>记录/行</td></tr></tbody></table><ul class=\" list-paddingleft-2\"><li><p>映射文件的命名规则</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>表所对应的实体类的类名+Mapper.xml</p></li><li><p>例如：表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml</p></li><li><p>因此一个映射文件对应一个实体类，对应一张表的操作</p></li><li><p>MyBatis映射文件用于编写SQL，访问以及操作表中的数据</p></li><li><p>MyBatis映射文件存放的位置是src/main/resources/mappers目录下</p></li></ul><li><p>MyBatis中可以面向接口操作数据，要保证两个一致</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>mapper接口的全类名和映射文件的命名空间（namespace）保持一致</p></li><li><p>mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致</p></li></ul></ul><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;&nbsp;&nbsp;\r\n&lt;!DOCTYPE&nbsp;mapper&nbsp;&nbsp;\r\nPUBLIC&nbsp;&quot;-//mybatis.org//DTD&nbsp;Mapper&nbsp;3.0//EN&quot;&nbsp;&nbsp;\r\n&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&nbsp;&nbsp;\r\n&lt;mapper&nbsp;namespace=&quot;com.atguigu.mybatis.mapper.UserMapper&quot;&gt;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&lt;!--int&nbsp;insertUser();--&gt;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&lt;insert&nbsp;id=&quot;insertUser&quot;&gt;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;insert&nbsp;into&nbsp;t_user&nbsp;values(null,&#39;张三&#39;,&#39;123&#39;,23,&#39;女&#39;)&nbsp;&nbsp;\r\n&nbsp;&nbsp;&lt;/insert&gt;&nbsp;&nbsp;\r\n&lt;/mapper&gt;</pre><h2>通过junit测试功能</h2><ul class=\" list-paddingleft-2\"><li><p>SqlSession：代表Java程序和数据库之间的会话。（HttpSession是Java程序和浏览器之间的会话）</p></li><li><p>SqlSessionFactory：是“生产”SqlSession的“工厂”</p></li><li><p>工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的相关代码封装到一个“工厂类”中，以后都使用这个工厂类来“生产”我们需要的对象</p></li></ul><pre>public&nbsp;class&nbsp;UserMapperTest&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Test\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;testInsertUser()&nbsp;throws&nbsp;IOException&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//读取MyBatis的核心配置文件\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;is&nbsp;=&nbsp;Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//获取SqlSessionFactoryBuilder对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SqlSessionFactoryBuilder&nbsp;sqlSessionFactoryBuilder&nbsp;=&nbsp;new&nbsp;SqlSessionFactoryBuilder();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SqlSessionFactory&nbsp;sqlSessionFactory&nbsp;=&nbsp;sqlSessionFactoryBuilder.build(is);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//获取sqlSession，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//SqlSession&nbsp;sqlSession&nbsp;=&nbsp;sqlSessionFactory.openSession();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;sqlSessionFactory.openSession(true);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//通过代理模式创建UserMapper接口的代理实现类对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UserMapper&nbsp;userMapper&nbsp;=&nbsp;sqlSession.getMapper(UserMapper.class);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//调用UserMapper接口中的方法，就可以根据UserMapper的全类名匹配元素文件，通过调用的方法名匹配映射文件中的SQL标签，并执行标签中的SQL语句\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;result&nbsp;=&nbsp;userMapper.insertUser();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//提交事务\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//sqlSession.commit();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;result:&quot;&nbsp;+&nbsp;result);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><ul class=\" list-paddingleft-2\"><li><p>默认是需要手动提交事务，如果要自动提交事务，则在获取sqlSession对象时，使用<code>SqlSession sqlSession = sqlSessionFactory.openSession(true);</code>，传入一个Boolean类型的参数，值为true，这样就可以自动提交</p></li></ul><h2>加入log4j日志功能</h2><ol class=\" list-paddingleft-2\"><li><p>加入依赖</p></li></ol><pre>&lt;!--&nbsp;log4j日志&nbsp;--&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n&lt;version&gt;1.2.17&lt;/version&gt;\r\n&lt;/dependency&gt;</pre><ol class=\" list-paddingleft-2\"><li><p>加入log4j的配置文件</p></li><ul class=\" list-paddingleft-2\"><li><p>log4j的配置文件名为log4j.xml，存放的位置是src/main/resources目录下</p></li><li><p>日志的级别：FATAL(致命)&gt;ERROR(错误)&gt;WARN(警告)&gt;INFO(信息)&gt;DEBUG(调试) 从左到右打印的内容越来越详细</p></li></ul></ol><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;\r\n&lt;!DOCTYPE&nbsp;log4j:configuration&nbsp;SYSTEM&nbsp;&quot;log4j.dtd&quot;&gt;\r\n&lt;log4j:configuration&nbsp;xmlns:log4j=&quot;http://jakarta.apache.org/log4j/&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;appender&nbsp;name=&quot;STDOUT&quot;&nbsp;class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param&nbsp;name=&quot;Encoding&quot;&nbsp;value=&quot;UTF-8&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;layout&nbsp;class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param&nbsp;name=&quot;ConversionPattern&quot;&nbsp;value=&quot;%-5p&nbsp;%d{MM-dd&nbsp;HH:mm:ss,SSS}&nbsp;%m&nbsp;(%F:%L)&nbsp;\\n&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/layout&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/appender&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;logger&nbsp;name=&quot;java.sql&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;level&nbsp;value=&quot;debug&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/logger&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;logger&nbsp;name=&quot;org.apache.ibatis&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;level&nbsp;value=&quot;info&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/logger&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;root&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;level&nbsp;value=&quot;debug&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;appender-ref&nbsp;ref=&quot;STDOUT&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/root&gt;\r\n&lt;/log4j:configuration&gt;</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16604653321021660465331700.png\" alt=\"\"/></p><h2>详解mybatis-config.xml 核心配置文件</h2><blockquote><p>核心配置文件中的标签必须按照固定的顺序(有的标签可以不写，但顺序一定不能乱)：\r\nproperties、settings、typeAliases、typeHandlers、objectFactory、objectWrapperFactory、reflectorFactory、plugins、environments、databaseIdProvider、mappers</p></blockquote><p>mybatis-config.xml：</p><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;\r\n&lt;!DOCTYPE&nbsp;configuration\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PUBLIC&nbsp;&quot;-//MyBatis.org//DTD&nbsp;Config&nbsp;3.0//EN&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://MyBatis.org/dtd/MyBatis-3-config.dtd&quot;&gt;\r\n&lt;configuration&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--引入properties文件，此时就可以${属性名}的方式访问属性值--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;properties&nbsp;resource=&quot;jdbc.properties&quot;&gt;&lt;/properties&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;settings&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--将表中字段的下划线自动转换为驼峰--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;setting&nbsp;name=&quot;mapUnderscoreToCamelCase&quot;&nbsp;value=&quot;true&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--开启延迟加载--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;setting&nbsp;name=&quot;lazyLoadingEnabled&quot;&nbsp;value=&quot;true&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/settings&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;typeAliases&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;alias&nbsp;在使用时不区分大写&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&lt;typeAlias&nbsp;type=&quot;com.atguigu.mybatis.bean.User&quot;&nbsp;&nbsp;alias=&quot;user&quot;&gt;&lt;/typeAlias&gt;--&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--不写alias默认就是&nbsp;user&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&lt;typeAlias&nbsp;type=&quot;com.atguigu.mybatis.bean.User&quot;&gt;&lt;/typeAlias&gt;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--以包为单位，设置改包下所有的类型都拥有默认的别名，即类名且不区分大小写--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;package&nbsp;name=&quot;com.atguigu.mybatis.bean&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/typeAliases&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--\r\n&nbsp;&nbsp;&nbsp;&nbsp;environments：设置多个连接数据库的环境\r\n&nbsp;&nbsp;&nbsp;&nbsp;属性：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default：设置默认使用的环境的id\r\n&nbsp;&nbsp;&nbsp;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;environments&nbsp;default=&quot;mysql_test&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;environment：设置具体的连接数据库的环境信息\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;属性：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id：设置环境的唯一标识，可通过environments标签中的default设置某一个环境的id，表示默认使用的环境\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;environment&nbsp;id=&quot;mysql_test&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transactionManager：设置事务管理方式\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;属性：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type：设置事务管理方式，type=&quot;JDBC|MANAGED&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;JDBC&quot;：设置当前环境的事务管理都必须手动处理\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;MANAGED&quot;：设置事务被管理，例如spring中的AOP\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transactionManager&nbsp;type=&quot;JDBC&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataSource：设置数据源\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;属性：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type：设置数据源的类型，type=&quot;POOLED|UNPOOLED|JNDI&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;POOLED&quot;：使用数据库连接池，即会将创建的连接进行缓存，下次使用可以从缓存中直接获取，不需要重新创建\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;UNPOOLED&quot;：不使用数据库连接池，即每次使用连接都需要重新创建\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;JNDI&quot;：调用上下文中的数据源\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dataSource&nbsp;type=&quot;POOLED&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--设置驱动类的全类名--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;driver&quot;&nbsp;value=&quot;${jdbc.driver}&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--设置连接数据库的连接地址--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;url&quot;&nbsp;value=&quot;${jdbc.url}&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--设置连接数据库的用户名--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;username&quot;&nbsp;value=&quot;${jdbc.username}&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--设置连接数据库的密码--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;password&quot;&nbsp;value=&quot;${jdbc.password}&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dataSource&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/environment&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/environments&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--引入映射文件--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;mappers&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;&lt;mapper&nbsp;resource=&quot;UserMapper.xml&quot;/&gt;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以包为单位，将包下所有的映射文件引入核心配置文件\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注意：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;此方式必须保证mapper接口和mapper映射文件必须在相同的包下\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;mapper接口要和mapper映射文件的名字一致\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16604788252721660478824938.png)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;package&nbsp;name=&quot;com.atguigu.mybatis.dao&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/mappers&gt;\r\n&lt;/configuration&gt;</pre><p>resource/jdbc.properties</p><pre>jdbc.driver=com.mysql.jdbc.Driver\r\njdbc.url=jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false\r\njdbc.username=root\r\njdbc.password=3333</pre><h2>示例：增删改查</h2><ol class=\" list-paddingleft-2\"><li><p>添加</p></li></ol><pre>&lt;!--int&nbsp;insertUser();--&gt;\r\n&lt;insert&nbsp;id=&quot;insertUser&quot;&gt;\r\n&nbsp;&nbsp;insert&nbsp;into&nbsp;t_user&nbsp;values(null,&#39;admin&#39;,&#39;123456&#39;,23,&#39;男&#39;,&#39;12345@qq.com&#39;)\r\n&lt;/insert&gt;</pre><ol class=\" list-paddingleft-2\"><li><p>删除</p></li></ol><pre>&lt;!--int&nbsp;deleteUser();--&gt;\r\n&lt;delete&nbsp;id=&quot;deleteUser&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;from&nbsp;t_user&nbsp;where&nbsp;id&nbsp;=&nbsp;6\r\n&lt;/delete&gt;</pre><ol class=\" list-paddingleft-2\"><li><p>修改</p></li></ol><pre>&lt;!--int&nbsp;updateUser();--&gt;\r\n&lt;update&nbsp;id=&quot;updateUser&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;update&nbsp;t_user&nbsp;set&nbsp;username&nbsp;=&nbsp;&#39;张三&#39;&nbsp;where&nbsp;id&nbsp;=&nbsp;5\r\n&lt;/update&gt;</pre><ol class=\" list-paddingleft-2\"><li><p>查询一个实体类对象</p></li></ol><pre>&lt;!--User&nbsp;getUserById();--&gt;&nbsp;&nbsp;\r\n&lt;select&nbsp;id=&quot;getUserById&quot;&nbsp;resultType=&quot;com.atguigu.mybatis.bean.User&quot;&gt;&nbsp;&nbsp;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;id&nbsp;=&nbsp;2&nbsp;&nbsp;\r\n&lt;/select&gt;</pre><ol class=\" list-paddingleft-2\"><li><p>查询集合</p></li></ol><pre>&lt;!--List&lt;User&gt;&nbsp;getUserList();--&gt;\r\n&lt;select&nbsp;id=&quot;getUserList&quot;&nbsp;resultType=&quot;com.atguigu.mybatis.bean.User&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user\r\n&lt;/select&gt;</pre><ul class=\" list-paddingleft-2\"><li><p>注意：</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>resultType：自动映射，用于属性名和表中字段名一致的情况</p></li><li><p>resultMap：自定义映射，用于一对多或多对一或字段名和属性名不一致的情况</p></li></ul><ol class=\" list-paddingleft-2\"><li><p>查询的标签select必须设置属性resultType或resultMap，用于设置实体类和数据库表的映射关系</p></li><li><p>当查询的数据为多条时，不能使用实体类作为返回值，只能使用集合，（注意此时的resultType类型也是里面元素的类型）否则会抛出异常TooManyResultsException；但是若查询的数据只有一条，可以使用实体类或集合作为返回值</p></li></ol></ul><h1>[<em>2</em>] MyBatis获取参数值的两种方式（重点）</h1><ul class=\" list-paddingleft-2\"><li><p>MyBatis获取参数值的两种方式：${}和#{}</p></li><li><p>${}的本质就是字符串拼接，#{}的本质就是占位符赋值 。(?,?,?)这种形式,这是推荐使用的！</p></li><li><p>${}使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引号；但是#{}使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自动添加单引号</p></li></ul><blockquote><p>{} 不会自动添加单引号，而#{会自动添加单引号}，这决定了它们的使用场景，且建议能使用#{}就不要使用{}, 因为使用${} 有sql注入的风险。</p></blockquote><h2>单个字面量类型的参数</h2><ul class=\" list-paddingleft-2\"><li><p>若mapper接口中的方法参数为单个的字面量类型，此时可以使用{}和#{}以任意的名称（最好见名识意）获取参数的值，注意{}需要手动加单引号</p></li></ul><pre>&lt;!--User&nbsp;getUserByUsername(String&nbsp;username);--&gt;\r\n&lt;select&nbsp;id=&quot;getUserByUsername&quot;&nbsp;resultType=&quot;User&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;username&nbsp;=&nbsp;#{abc}\r\n&lt;/select&gt;</pre><pre>&lt;!--User&nbsp;getUserByUsername(String&nbsp;username);--&gt;\r\n&lt;select&nbsp;id=&quot;getUserByUsername&quot;&nbsp;resultType=&quot;User&quot;&gt;&nbsp;&nbsp;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;username&nbsp;=&nbsp;&#39;${123}&#39;&nbsp;&nbsp;\r\n&lt;/select&gt;</pre><h2>多个字面量类型的参数</h2><ul class=\" list-paddingleft-2\"><li><p>若mapper接口中的方法参数为多个时，此时MyBatis会自动将这些参数放在一个map集合中</p></li><ol class=\" list-paddingleft-2\"><li><p>以arg0,arg1...为键，以参数为值；</p></li><li><p>以param1,param2...为键，以参数为值；</p></li></ol><li><p>因此只需要通过{}和#{}访问map集合的键就可以获取相对应的值，注意{}需要手动加单引号。</p></li><li><p>使用arg或者param都行，要注意的是，arg是从arg0开始的，param是从param1开始的， 但是建议，使用**@Param**注解，起名：如dao接口：</p><p><code>User LoginSelect(@Param(&quot;name&quot;) String name, @Param(&quot;password&quot;) String password);</code></p><p>这样我们在xml中就可以：</p></li></ul><pre>&lt;select&nbsp;id=&quot;LoginSelect&quot;&nbsp;resultType=&quot;User&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;name=#{name}&nbsp;and&nbsp;password=#{password}\r\n&lt;/select&gt;</pre><pre>而不是</pre><pre>&lt;select&nbsp;id=&quot;LoginSelect&quot;&nbsp;resultType=&quot;User&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;name=#{arg0}&nbsp;and&nbsp;password=#{arg1}\r\n&lt;/select&gt;\r\n或\r\n&lt;select&nbsp;id=&quot;LoginSelect&quot;&nbsp;resultType=&quot;User&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;name=#{param1}&nbsp;and&nbsp;password=#{param2}\r\n&lt;/select&gt;</pre><h2>map集合类型的参数</h2><ul class=\" list-paddingleft-2\"><li><p>若mapper接口中的方法需要的参数为多个时，此时可以手动创建map集合，将这些数据放在map中只需要通过{mapKey}和#{mapKey}就可以访问map集合的键相对应的值，注意{}需要手动加单引号</p></li></ul><pre>&lt;!--User&nbsp;checkLoginByMap(Map&lt;String,Object&gt;&nbsp;map);--&gt;\r\n&lt;select&nbsp;id=&quot;checkLoginByMap&quot;&nbsp;resultType=&quot;User&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;username&nbsp;=&nbsp;#{username}&nbsp;and&nbsp;password&nbsp;=&nbsp;#{password}\r\n&lt;/select&gt;</pre><pre>@Test\r\npublic&nbsp;void&nbsp;checkLoginByMap()&nbsp;{\r\n&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;SqlSessionUtils.getSqlSession();\r\n&nbsp;&nbsp;ParameterMapper&nbsp;mapper&nbsp;=&nbsp;sqlSession.getMapper(ParameterMapper.class);\r\n&nbsp;&nbsp;Map&lt;String,Object&gt;&nbsp;map&nbsp;=&nbsp;new&nbsp;HashMap&lt;&gt;();\r\n&nbsp;&nbsp;map.put(&quot;usermane&quot;,&quot;admin&quot;);\r\n&nbsp;&nbsp;map.put(&quot;password&quot;,&quot;123456&quot;);\r\n&nbsp;&nbsp;User&nbsp;user&nbsp;=&nbsp;mapper.checkLoginByMap(map);\r\n&nbsp;&nbsp;System.out.println(user);\r\n}</pre><h2>JavaBean实体类类型的参数</h2><ul class=\" list-paddingleft-2\"><li><p>若mapper接口中的方法参数为实体类对象时此时可以使用{}和#{}，通过访问实体类对象中的属性名获取属性值，注意{}需要手动加单引号</p></li></ul><pre>&lt;!--int&nbsp;insertUser(User&nbsp;user);--&gt;\r\n&lt;insert&nbsp;id=&quot;insertUser&quot;&gt;\r\n&nbsp;&nbsp;insert&nbsp;into&nbsp;t_user&nbsp;values(null,#{username},#{password},#{age},#{sex},#{email})\r\n&lt;/insert&gt;</pre><pre>@Test\r\npublic&nbsp;void&nbsp;insertUser()&nbsp;{\r\n&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;SqlSessionUtils.getSqlSession();\r\n&nbsp;&nbsp;ParameterMapper&nbsp;mapper&nbsp;=&nbsp;sqlSession.getMapper(ParameterMapper.class);\r\n&nbsp;&nbsp;User&nbsp;user&nbsp;=&nbsp;new&nbsp;User(null,&quot;Tom&quot;,&quot;123456&quot;,12,&quot;男&quot;,&quot;123@321.com&quot;);\r\n&nbsp;&nbsp;mapper.insertUser(user);\r\n}</pre><blockquote><p>如果是多个对象参数（map,javaBean对象，那么可以给这个对象起别名，使用@Param注解，然后在xml中使用#{<a href=\"http://xn--mcrt9b.id\">别名.id</a>} 这种形式获取多个对象参数指定对象参数里面的值）\r\nDebug:</p></blockquote><p>遍历方法的所有参数，如果参数中指定的@Param注解，那么将put(<code>&lt;参数索引 &gt;，&lt;@Param注解上标注的值&gt;</code>)，如果参数没有注解，那么以 &nbsp;<code>参数位置索引, argX</code>的形式</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16605494068711660549406307.png\" alt=\"\"/></p><p>然后根据索引，找到对应的值，作为一个新的map</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16605495538081660549553659.png\" alt=\"\"/></p><p>同时设置 param1,param2,...这些。</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16605496956631660549695477.png\" alt=\"\"/></p><p>最终形成：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16605497813621660549781276.png\" alt=\"\"/></p><p>演示动画：</p><p><a href=\"https://zhuangjie-note-file.oss-cn-hangzhou.aliyuncs.com/mybatis-@Param-debug.apng\">https://zhuangjie-note-file.oss-cn-hangzhou.aliyuncs.com/mybatis-%40Param-debug.apng</a></p><h1>[<em>3</em>] MyBatis的各种查询功能</h1><ol class=\" list-paddingleft-2\"><li><p>如果查询出的数据只有一条，可以通过</p></li><ol class=\" list-paddingleft-2\" style=\"list-style-type: lower-alpha;\"><li><p>实体类对象接收</p></li><li><p>List集合接收</p></li><li><p>Map集合接收，结果<code>{password=123456, sex=男, id=1, age=23, username=admin}</code></p></li></ol><li><p>如果查询出的数据有多条，一定不能用实体类对象接收，会抛异常TooManyResultsException，可以通过</p></li><ol class=\" list-paddingleft-2\" style=\"list-style-type: lower-alpha;\"><li><p>实体类类型的LIst集合接收</p></li><li><p>Map类型的LIst集合接收</p></li><li><p>在mapper接口的方法上添加@MapKey注解</p></li></ol><li><p>有内置的别名</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16604677775371660467777452.png\" alt=\"\"/></p></li></ol><h2>[<em>3.1</em>] 查询一条数据</h2><ul class=\" list-paddingleft-2\"><li><p>查询的一条数据对应到实体</p></li></ul><pre>/**\r\n&nbsp;*&nbsp;根据用户id查询用户信息\r\n&nbsp;*&nbsp;@param&nbsp;id\r\n&nbsp;*&nbsp;@return\r\n&nbsp;*/\r\nUser&nbsp;getUserById(@Param(&quot;id&quot;)&nbsp;int&nbsp;id);</pre><pre>&lt;!--User&nbsp;getUserById(@Param(&quot;id&quot;)&nbsp;int&nbsp;id);--&gt;\r\n&lt;select&nbsp;id=&quot;getUserById&quot;&nbsp;resultType=&quot;User&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;id&nbsp;=&nbsp;#{id}\r\n&lt;/select&gt;</pre><ul class=\" list-paddingleft-2\"><li><p>查询的一条数据对应到List集合</p></li></ul><pre>/**\r\n&nbsp;*&nbsp;查询所有用户信息\r\n&nbsp;*&nbsp;@return\r\n&nbsp;*/\r\nList&lt;User&gt;&nbsp;getUserList();</pre><pre>&lt;!--List&lt;User&gt;&nbsp;getUserList();--&gt;\r\n&lt;select&nbsp;id=&quot;getUserList&quot;&nbsp;resultType=&quot;User&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user\r\n&lt;/select&gt;</pre><ul class=\" list-paddingleft-2\"><li><p>查询的一条数据对应到map集合</p></li></ul><pre>/**&nbsp;&nbsp;\r\n&nbsp;*&nbsp;根据用户id查询用户信息为map集合&nbsp;&nbsp;\r\n&nbsp;*&nbsp;@param&nbsp;id&nbsp;&nbsp;\r\n&nbsp;*&nbsp;@return&nbsp;&nbsp;\r\n&nbsp;*/&nbsp;&nbsp;\r\nMap&lt;String,&nbsp;Object&gt;&nbsp;getUserToMap(@Param(&quot;id&quot;)&nbsp;int&nbsp;id);</pre><pre>&lt;!--Map&lt;String,&nbsp;Object&gt;&nbsp;getUserToMap(@Param(&quot;id&quot;)&nbsp;int&nbsp;id);--&gt;\r\n&lt;select&nbsp;id=&quot;getUserToMap&quot;&nbsp;resultType=&quot;map&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;id&nbsp;=&nbsp;#{id}\r\n&lt;/select&gt;\r\n&lt;!--结果：{password=123456,&nbsp;sex=男,&nbsp;id=1,&nbsp;age=23,&nbsp;username=admin}--&gt;</pre><h2>[<em>3.2</em>] 查询多条数据为map集合</h2><h3>方式一</h3><pre>List&lt;User&gt;&nbsp;getAllUserToList();</pre><pre>&lt;!--Map&lt;String,&nbsp;Object&gt;&nbsp;getAllUserToMap();--&gt;&nbsp;&nbsp;\r\n&lt;select&nbsp;id=&quot;getAllUserToList&quot;&nbsp;resultType=&quot;User&quot;&gt;&nbsp;&nbsp;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;&nbsp;\r\n&lt;/select&gt;</pre><h3>方式二</h3><pre>/**&nbsp;&nbsp;\r\n&nbsp;*&nbsp;查询所有用户信息为map集合&nbsp;&nbsp;\r\n&nbsp;*&nbsp;@return&nbsp;&nbsp;\r\n&nbsp;*&nbsp;将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，此时可以将这些map放在一个list集合中获取&nbsp;&nbsp;\r\n&nbsp;*/&nbsp;&nbsp;\r\nList&lt;Map&lt;String,&nbsp;Object&gt;&gt;&nbsp;getAllUserToMap();</pre><pre>&lt;!--Map&lt;String,&nbsp;Object&gt;&nbsp;getAllUserToMap();--&gt;&nbsp;&nbsp;\r\n&lt;select&nbsp;id=&quot;getAllUserToMap&quot;&nbsp;resultType=&quot;map&quot;&gt;&nbsp;&nbsp;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;&nbsp;\r\n&lt;/select&gt;\r\n&lt;!--\r\n&nbsp;&nbsp;结果：\r\n&nbsp;&nbsp;[{password=123456,&nbsp;sex=男,&nbsp;id=1,&nbsp;age=23,&nbsp;username=admin},\r\n&nbsp;&nbsp;{password=123456,&nbsp;sex=男,&nbsp;id=2,&nbsp;age=23,&nbsp;username=张三},\r\n&nbsp;&nbsp;{password=123456,&nbsp;sex=男,&nbsp;id=3,&nbsp;age=23,&nbsp;username=张三}]\r\n--&gt;</pre><h3>方式三</h3><pre>/**\r\n&nbsp;*&nbsp;查询所有用户信息为map集合\r\n&nbsp;*&nbsp;@return\r\n&nbsp;*&nbsp;将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，并且最终要以一个map的方式返回数据，此时需要通过@MapKey注解设置map集合的键，值是每条数据所对应的map集合\r\n&nbsp;*/\r\n@MapKey(&quot;id&quot;)\r\nMap&lt;String,&nbsp;Object&gt;&nbsp;getAllUserToMap();</pre><pre>&lt;!--Map&lt;String,&nbsp;Object&gt;&nbsp;getAllUserToMap();--&gt;\r\n&lt;select&nbsp;id=&quot;getAllUserToMap&quot;&nbsp;resultType=&quot;map&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user\r\n&lt;/select&gt;\r\n&lt;!--\r\n&nbsp;&nbsp;结果：\r\n&nbsp;&nbsp;{\r\n&nbsp;&nbsp;1={password=123456,&nbsp;sex=男,&nbsp;id=1,&nbsp;age=23,&nbsp;username=admin},\r\n&nbsp;&nbsp;2={password=123456,&nbsp;sex=男,&nbsp;id=2,&nbsp;age=23,&nbsp;username=张三},\r\n&nbsp;&nbsp;3={password=123456,&nbsp;sex=男,&nbsp;id=3,&nbsp;age=23,&nbsp;username=张三}\r\n&nbsp;&nbsp;}\r\n--&gt;</pre><h2>[<em>3.3</em>] 查询单个数据</h2><pre>/**&nbsp;&nbsp;\r\n&nbsp;*&nbsp;查询用户的总记录数&nbsp;&nbsp;\r\n&nbsp;*&nbsp;@return&nbsp;&nbsp;\r\n&nbsp;*&nbsp;在MyBatis中，对于Java中常用的类型都设置了类型别名&nbsp;&nbsp;\r\n&nbsp;*&nbsp;例如：java.lang.Integer--&gt;int|integer&nbsp;&nbsp;\r\n&nbsp;*&nbsp;例如：int--&gt;_int|_integer&nbsp;&nbsp;\r\n&nbsp;*&nbsp;例如：Map--&gt;map,List--&gt;list&nbsp;&nbsp;\r\n&nbsp;*/&nbsp;&nbsp;\r\nint&nbsp;getCount();</pre><pre>&lt;!--int&nbsp;getCount();--&gt;\r\n&lt;select&nbsp;id=&quot;getCount&quot;&nbsp;resultType=&quot;_integer&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;count(id)&nbsp;from&nbsp;t_user\r\n&lt;/select&gt;</pre><h1>[<em>4</em>] 特殊SQL的执行</h1><h2>模糊查询-用到${}</h2><pre>/**\r\n&nbsp;*&nbsp;根据用户名进行模糊查询\r\n&nbsp;*&nbsp;@param&nbsp;username&nbsp;\r\n&nbsp;*&nbsp;@return&nbsp;java.util.List&lt;com.atguigu.mybatis.pojo.User&gt;\r\n&nbsp;*&nbsp;@date&nbsp;2022/2/26&nbsp;21:56\r\n&nbsp;*/\r\nList&lt;User&gt;&nbsp;getUserByLike(@Param(&quot;username&quot;)&nbsp;String&nbsp;username);</pre><pre>&lt;!--List&lt;User&gt;&nbsp;getUserByLike(@Param(&quot;username&quot;)&nbsp;String&nbsp;username);--&gt;\r\n&lt;select&nbsp;id=&quot;getUserByLike&quot;&nbsp;resultType=&quot;User&quot;&gt;\r\n&nbsp;&nbsp;&lt;!--select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;username&nbsp;like&nbsp;&#39;%${mohu}%&#39;--&gt;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&lt;!--select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;username&nbsp;like&nbsp;concat(&#39;%&#39;,#{mohu},&#39;%&#39;)--&gt;&nbsp;&nbsp;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user&nbsp;where&nbsp;username&nbsp;like&nbsp;&quot;%&quot;#{mohu}&quot;%&quot;\r\n&lt;/select&gt;</pre><ul class=\" list-paddingleft-2\"><li><p>其中<code>select * from t_user where username like &quot;%&quot;#{mohu}&quot;%&quot;</code>是最常用的</p></li></ul><h2>批量删除-用到${}</h2><ul class=\" list-paddingleft-2\"><li><p>只能使用${}，如果使用#{}，则解析后的sql语句为<code>delete from t_user where id in (&#39;1,2,3&#39;)</code>，这样是将<code>1,2,3</code>看做是一个整体，只有id为<code>1,2,3</code>的数据会被删除。正确的语句应该是<code>delete from t_user where id in (1,2,3)</code>，或者<code>delete from t_user where id in (&#39;1&#39;,&#39;2&#39;,&#39;3&#39;)</code></p></li></ul><pre>/**\r\n&nbsp;*&nbsp;根据id批量删除\r\n&nbsp;*&nbsp;@param&nbsp;ids&nbsp;\r\n&nbsp;*&nbsp;@return&nbsp;int\r\n&nbsp;*&nbsp;@date&nbsp;2022/2/26&nbsp;22:06\r\n&nbsp;*/\r\nint&nbsp;deleteMore(@Param(&quot;ids&quot;)&nbsp;String&nbsp;ids);</pre><pre>&lt;delete&nbsp;id=&quot;deleteMore&quot;&gt;\r\n&nbsp;&nbsp;delete&nbsp;from&nbsp;t_user&nbsp;where&nbsp;id&nbsp;in&nbsp;(${ids})\r\n&lt;/delete&gt;</pre><pre>//测试类\r\n@Test\r\npublic&nbsp;void&nbsp;deleteMore()&nbsp;{\r\n&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;SqlSessionUtils.getSqlSession();\r\n&nbsp;&nbsp;SQLMapper&nbsp;mapper&nbsp;=&nbsp;sqlSession.getMapper(SQLMapper.class);\r\n&nbsp;&nbsp;int&nbsp;result&nbsp;=&nbsp;mapper.deleteMore(&quot;1,2,3,8&quot;);\r\n&nbsp;&nbsp;System.out.println(result);\r\n}</pre><h2>动态设置表名-用到${}</h2><ul class=\" list-paddingleft-2\"><li><p>只能使用${}，因为表名不能加单引号</p></li></ul><pre>/**\r\n&nbsp;*&nbsp;查询指定表中的数据\r\n&nbsp;*&nbsp;@param&nbsp;tableName&nbsp;\r\n&nbsp;*&nbsp;@return&nbsp;java.util.List&lt;com.atguigu.mybatis.pojo.User&gt;\r\n&nbsp;*&nbsp;@date&nbsp;2022/2/27&nbsp;14:41\r\n&nbsp;*/\r\nList&lt;User&gt;&nbsp;getUserByTable(@Param(&quot;tableName&quot;)&nbsp;String&nbsp;tableName);</pre><pre>&lt;!--List&lt;User&gt;&nbsp;getUserByTable(@Param(&quot;tableName&quot;)&nbsp;String&nbsp;tableName);--&gt;\r\n&lt;select&nbsp;id=&quot;getUserByTable&quot;&nbsp;resultType=&quot;User&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;${tableName}\r\n&lt;/select&gt;</pre><h2>添加功能获取自增的主键</h2><ul class=\" list-paddingleft-2\"><li><p>使用场景</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>t_clazz(clazz_id,clazz_name)</p></li><li><p>t_student(student_id,student_name,clazz_id)</p></li></ul><ol class=\" list-paddingleft-2\"><li><p>添加班级信息</p></li><li><p>获取新添加的班级的id</p></li><li><p>为班级分配学生，即将某学的班级id修改为新添加的班级的id</p></li></ol><li><p>在mapper.xml中设置两个属性</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>useGeneratedKeys：设置使用自增的主键</p></li><li><p>keyProperty：因为增删改有统一的返回值是受影响的行数，因此只能将获取的自增的主键放在传输的参数user对象的某个属性中</p></li></ul></ul><pre>/**\r\n&nbsp;*&nbsp;添加用户信息:注意不要添加@Param,不然在本示例中看不到效果\r\n&nbsp;*/\r\nvoid&nbsp;insertUser(User&nbsp;user);</pre><pre>&lt;!--void&nbsp;insertUser(User&nbsp;user);--&gt;\r\n&lt;insert&nbsp;id=&quot;insertUser&quot;&nbsp;useGeneratedKeys=&quot;true&quot;&nbsp;keyProperty=&quot;id&quot;&gt;\r\n&nbsp;&nbsp;insert&nbsp;into&nbsp;t_user&nbsp;values&nbsp;(null,#{username},#{password},#{age},#{sex},#{email})\r\n&lt;/insert&gt;</pre><pre>//测试类\r\n@Test\r\npublic&nbsp;void&nbsp;insertUser()&nbsp;{\r\n&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;SqlSessionUtils.getSqlSession();\r\n&nbsp;&nbsp;SQLMapper&nbsp;mapper&nbsp;=&nbsp;sqlSession.getMapper(SQLMapper.class);\r\n&nbsp;&nbsp;User&nbsp;user&nbsp;=&nbsp;new&nbsp;User(null,&nbsp;&quot;ton&quot;,&nbsp;&quot;123&quot;,&nbsp;23,&nbsp;&quot;男&quot;,&nbsp;&quot;123@321.com&quot;);\r\n&nbsp;&nbsp;mapper.insertUser(user);\r\n&nbsp;&nbsp;System.out.println(user);\r\n&nbsp;&nbsp;//输出：user{id=10,&nbsp;username=&#39;ton&#39;,&nbsp;password=&#39;123&#39;,&nbsp;age=23,&nbsp;sex=&#39;男&#39;,&nbsp;email=&#39;123@321.com&#39;}，自增主键存放到了user的id属性中\r\n}</pre><h1>[<em>5</em>] 映射关系</h1><h2>[<em>5.1</em>] javaBean属性与表字段的映射</h2><ol class=\" list-paddingleft-2\"><li><p>驼峰</p><p>开启驼峰 ：在<code>&lt;properties&gt;</code>标签往下的<code>&lt;settings&gt;</code>标签上配置<code>&lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;</code></p></li></ol><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;\r\n&lt;!DOCTYPE&nbsp;configuration\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PUBLIC&nbsp;&quot;-//MyBatis.org//DTD&nbsp;Config&nbsp;3.0//EN&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://MyBatis.org/dtd/MyBatis-3-config.dtd&quot;&gt;\r\n&lt;configuration&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--引入properties文件，此时就可以${属性名}的方式访问属性值--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;properties&nbsp;resource=&quot;jdbc.properties&quot;&gt;&lt;/properties&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;settings&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--将表中字段的下划线自动转换为驼峰--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;setting&nbsp;name=&quot;mapUnderscoreToCamelCase&quot;&nbsp;value=&quot;true&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/settings&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&lt;/configuration&gt;</pre><ol class=\" list-paddingleft-2\"><li><p>查询时出别名解决</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectAll&quot;&nbsp;resultType=&quot;User&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;id,name,age,create_time&nbsp;as&nbsp;createTime&nbsp;from&nbsp;t_user;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><ol class=\" list-paddingleft-2\"><li><p>使用resultMap解决</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;id：表示自定义映射的唯一标识，不能重复\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type：查询的数据要映射的实体类的类型&nbsp;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;resultMap&nbsp;id=&quot;userMap&quot;&nbsp;type=&quot;User&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;id标签是主键特有，result标签是普通的字段的映射关系\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;property：设置映射关系中实体类中的属性名\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column：设置映射关系中表中的字段名&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;id&quot;&nbsp;column=&quot;id&quot;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;name&quot;&nbsp;column=&quot;name&quot;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;age&quot;&nbsp;column=&quot;age&quot;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;createTime&quot;&nbsp;column=&quot;create_time&quot;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/resultMap&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectAll&quot;&nbsp;resultMap=&quot;userMap&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_user;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h2>[<em>5.2</em>] 多对一映射处理（对象）</h2><p>查询一个员工，并查询所在部门（对象）放到员工对象中成为一个属性 。</p><pre>Emp(id=1,&nbsp;deptId=1,&nbsp;name=小东,&nbsp;dept=Dept(id=1,&nbsp;name=研发部,&nbsp;emps=null))</pre><ul class=\" list-paddingleft-2\"><li><p>当前测试条件：</p><p>当前有以下两张表：</p><p>t_emp：</p></li></ul><pre>SET&nbsp;NAMES&nbsp;utf8mb4;\r\nSET&nbsp;FOREIGN_KEY_CHECKS&nbsp;=&nbsp;0;\r\n\r\n--&nbsp;----------------------------\r\n--&nbsp;Table&nbsp;structure&nbsp;for&nbsp;t_emp\r\n--&nbsp;----------------------------\r\nDROP&nbsp;TABLE&nbsp;IF&nbsp;EXISTS&nbsp;`t_emp`;\r\nCREATE&nbsp;TABLE&nbsp;`t_emp`&nbsp;&nbsp;(\r\n&nbsp;&nbsp;`id`&nbsp;int(11)&nbsp;NOT&nbsp;NULL,\r\n&nbsp;&nbsp;`dept_id`&nbsp;int(11)&nbsp;NULL&nbsp;DEFAULT&nbsp;NULL,\r\n&nbsp;&nbsp;`name`&nbsp;varchar(255)&nbsp;CHARACTER&nbsp;SET&nbsp;utf8mb4&nbsp;COLLATE&nbsp;utf8mb4_general_ci&nbsp;NULL&nbsp;DEFAULT&nbsp;NULL,\r\n&nbsp;&nbsp;PRIMARY&nbsp;KEY&nbsp;(`id`)&nbsp;USING&nbsp;BTREE\r\n)&nbsp;ENGINE&nbsp;=&nbsp;InnoDB&nbsp;CHARACTER&nbsp;SET&nbsp;=&nbsp;utf8mb4&nbsp;COLLATE&nbsp;=&nbsp;utf8mb4_general_ci&nbsp;ROW_FORMAT&nbsp;=&nbsp;Dynamic;\r\n\r\n--&nbsp;----------------------------\r\n--&nbsp;Records&nbsp;of&nbsp;t_emp\r\n--&nbsp;----------------------------\r\nINSERT&nbsp;INTO&nbsp;`t_emp`&nbsp;VALUES&nbsp;(1,&nbsp;1,&nbsp;&#39;小东&#39;);\r\n\r\nSET&nbsp;FOREIGN_KEY_CHECKS&nbsp;=&nbsp;1;</pre><p>t_dept：</p><pre>SET&nbsp;NAMES&nbsp;utf8mb4;\r\nSET&nbsp;FOREIGN_KEY_CHECKS&nbsp;=&nbsp;0;\r\n\r\n--&nbsp;----------------------------\r\n--&nbsp;Table&nbsp;structure&nbsp;for&nbsp;t_dept\r\n--&nbsp;----------------------------\r\nDROP&nbsp;TABLE&nbsp;IF&nbsp;EXISTS&nbsp;`t_dept`;\r\nCREATE&nbsp;TABLE&nbsp;`t_dept`&nbsp;&nbsp;(\r\n&nbsp;&nbsp;`id`&nbsp;int(11)&nbsp;NOT&nbsp;NULL,\r\n&nbsp;&nbsp;`name`&nbsp;varchar(255)&nbsp;CHARACTER&nbsp;SET&nbsp;utf8mb4&nbsp;COLLATE&nbsp;utf8mb4_general_ci&nbsp;NULL&nbsp;DEFAULT&nbsp;NULL,\r\n&nbsp;&nbsp;PRIMARY&nbsp;KEY&nbsp;(`id`)&nbsp;USING&nbsp;BTREE\r\n)&nbsp;ENGINE&nbsp;=&nbsp;InnoDB&nbsp;CHARACTER&nbsp;SET&nbsp;=&nbsp;utf8mb4&nbsp;COLLATE&nbsp;=&nbsp;utf8mb4_general_ci&nbsp;ROW_FORMAT&nbsp;=&nbsp;Dynamic;\r\n\r\n--&nbsp;----------------------------\r\n--&nbsp;Records&nbsp;of&nbsp;t_dept\r\n--&nbsp;----------------------------\r\nINSERT&nbsp;INTO&nbsp;`t_dept`&nbsp;VALUES&nbsp;(1,&nbsp;&#39;研发部&#39;);\r\n\r\nSET&nbsp;FOREIGN_KEY_CHECKS&nbsp;=&nbsp;1;</pre><p>分别对应java的javaBean类：</p><p>Emp.java</p><pre>package&nbsp;com.zhuangjie.mybatis.pojo;\r\n\r\nimport&nbsp;lombok.AllArgsConstructor;\r\nimport&nbsp;lombok.Data;\r\nimport&nbsp;lombok.NoArgsConstructor;\r\nimport&nbsp;lombok.ToString;\r\n\r\n@Data\r\n@ToString\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic&nbsp;class&nbsp;Emp&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Integer&nbsp;id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Dept&nbsp;dept;\r\n}</pre><p>Dept.java</p><pre>package&nbsp;com.zhuangjie.mybatis.pojo;\r\n\r\nimport&nbsp;lombok.AllArgsConstructor;\r\nimport&nbsp;lombok.Data;\r\nimport&nbsp;lombok.NoArgsConstructor;\r\nimport&nbsp;lombok.ToString;\r\n\r\n@Data\r\n@ToString\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic&nbsp;class&nbsp;Dept&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Integer&nbsp;id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;name;\r\n}</pre><h3>[<em>5.2.1</em>]方式一： 级联方式处理映射关系</h3><blockquote><p>查询员工信息以及员工所对应的部门信息</p></blockquote><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;resultMap&nbsp;id=&quot;selectEmp&quot;&nbsp;type=&quot;Emp&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;id&quot;&nbsp;column=&quot;id&quot;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;name&quot;&nbsp;column=&quot;name&quot;&nbsp;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;dept.id&quot;&nbsp;column=&quot;dept_id&quot;&nbsp;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;dept.name&quot;&nbsp;column=&quot;dept_name&quot;&nbsp;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/resultMap&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectEmp&quot;&nbsp;resultMap=&quot;selectEmp&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;t_emp.id,&nbsp;t_emp.name,t_dept.id&nbsp;as&nbsp;dept_id,&nbsp;t_dept.name&nbsp;as&nbsp;dept_name&nbsp;from&nbsp;t_emp&nbsp;left&nbsp;join&nbsp;t_dept&nbsp;on&nbsp;t_emp.id&nbsp;=&nbsp;t_dept.id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h3>[<em>5.2.2</em>]方式二： 使用association处理映射关系</h3><ul class=\" list-paddingleft-2\"><li><p>association：处理多对一的映射关系</p></li><li><p>property：需要处理多对的映射关系的属性名</p></li><li><p>javaType：该属性的类型</p></li></ul><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;resultMap&nbsp;id=&quot;selectEmp&quot;&nbsp;type=&quot;Emp&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;id&quot;&nbsp;column=&quot;id&quot;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;deptId&quot;&nbsp;column=&quot;dept_id&quot;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;name&quot;&nbsp;column=&quot;name&quot;&nbsp;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;association&nbsp;property=&quot;dept&quot;&nbsp;javaType=&quot;Dept&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;id&quot;&nbsp;column=&quot;dept_id&quot;&nbsp;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;name&quot;&nbsp;column=&quot;dept_name&quot;&nbsp;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/association&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/resultMap&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectEmp&quot;&nbsp;resultMap=&quot;selectEmp&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;t_emp.id,&nbsp;t_emp.name,t_dept.id&nbsp;as&nbsp;dept_id,&nbsp;t_dept.name&nbsp;as&nbsp;dept_name&nbsp;from&nbsp;t_emp&nbsp;left&nbsp;join&nbsp;t_dept&nbsp;on&nbsp;t_emp.id&nbsp;=&nbsp;t_dept.id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h3>[<em>5.2.3</em>]方式三： 分步查询</h3><ol class=\" list-paddingleft-2\"><li><p>查询员工信息</p></li><ul class=\" list-paddingleft-2\"><li><p>select：设置分布查询的sql的唯一标识（namespace.SQLId或mapper接口的全类名.方法名）</p></li><li><p>column：设置分步查询的条件</p></li></ul></ol><pre>public&nbsp;interface&nbsp;EmpMapper&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;Emp&nbsp;selectEmp(@Param(&quot;id&quot;)&nbsp;Integer&nbsp;id);\r\n}</pre><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;\r\n&lt;!DOCTYPE&nbsp;mapper\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PUBLIC&nbsp;&quot;-//mybatis.org//DTD&nbsp;Mapper&nbsp;3.0//EN&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;\r\n&lt;mapper&nbsp;namespace=&quot;com.zhuangjie.mybatis.dao.EmpMapper&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;resultMap&nbsp;id=&quot;selectEmp&quot;&nbsp;type=&quot;Emp&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;id&quot;&nbsp;column=&quot;id&quot;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;deptId&quot;&nbsp;column=&quot;dept_id&quot;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;name&quot;&nbsp;column=&quot;name&quot;&nbsp;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;association&nbsp;property=&quot;dept&quot;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select=&quot;com.zhuangjie.mybatis.dao.DeptMapper.selectById&quot;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column=&quot;{id=dept_id}&quot;&nbsp;&gt;&nbsp;&lt;!--传递参数左边是参数名，右边查询员工的dept_id列值&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/association&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/resultMap&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectEmp&quot;&nbsp;resultMap=&quot;selectEmp&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_emp&nbsp;where&nbsp;id=#{id};\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;\r\n\r\n&lt;/mapper&gt;</pre><ol class=\" list-paddingleft-2\"><li><p>查询部门信息</p></li></ol><pre>public&nbsp;interface&nbsp;DeptMapper&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;Dept&nbsp;selectById(@Param(&quot;id&quot;)&nbsp;Integer&nbsp;id);\r\n}</pre><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;\r\n&lt;!DOCTYPE&nbsp;mapper\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PUBLIC&nbsp;&quot;-//mybatis.org//DTD&nbsp;Mapper&nbsp;3.0//EN&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;\r\n&lt;mapper&nbsp;namespace=&quot;com.zhuangjie.mybatis.dao.DeptMapper&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectById&quot;&nbsp;resultType=&quot;Dept&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_dept&nbsp;where&nbsp;id=#{id};\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;\r\n&lt;/mapper&gt;</pre><blockquote><p>分步查询开启延迟加载：</p></blockquote><p>mybatis-config.xml：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--开启延迟加载--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;setting&nbsp;name=&quot;lazyLoadingEnabled&quot;&nbsp;value=&quot;true&quot;/&gt;</pre><p>不使用分步查询的结果：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16606412890101660641288322.png\" alt=\"\"/></p><p>使用到分步查询的结果：进行了Dept表的查询</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16606413486551660641348586.png\" alt=\"\"/></p><h2>[<em>5.3</em>] 一对多映射处理（数组）</h2><p>查询一个部门，且查出该部门的所有员工（数组）放到部门对象属性中。</p><pre>[Emp(id=1,&nbsp;deptId=1,&nbsp;name=小东,&nbsp;dept=null),&nbsp;Emp(id=2,&nbsp;deptId=1,&nbsp;name=小明,&nbsp;dept=null)]</pre><h3>方式一：collection</h3><ul class=\" list-paddingleft-2\"><li><p>collection：用来处理一对多的映射关系</p></li><li><p>ofType：表示该属性对饮的集合中存储的数据的类型</p></li></ul><p>DeptMapper.java：</p><pre>public&nbsp;interface&nbsp;DeptMapper&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;Dept&nbsp;selectDeptAndEmpById(@Param(&quot;deptId&quot;)&nbsp;Integer&nbsp;deptId);\r\n}</pre><p>DeptMapper.xml</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;resultMap&nbsp;id=&quot;dept_and_emp&quot;&nbsp;type=&quot;Dept&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;id&quot;&nbsp;column=&quot;id&quot;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;name&quot;&nbsp;column=&quot;name&quot;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;collection&nbsp;property=&quot;emps&quot;&nbsp;ofType=&quot;Emp&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;id&quot;&nbsp;column=&quot;emp_id&quot;&nbsp;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;name&quot;&nbsp;column=&quot;emp_name&quot;&nbsp;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;deptId&quot;&nbsp;column=&quot;id&quot;&nbsp;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/collection&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/resultMap&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectDeptAndEmpById&quot;&nbsp;resultMap=&quot;dept_and_emp&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;t_dept.id&nbsp;as&nbsp;id,&nbsp;t_dept.name&nbsp;as&nbsp;name,t_emp.id&nbsp;as&nbsp;emp_id,t_emp.name&nbsp;&nbsp;as&nbsp;emp_name&nbsp;from&nbsp;t_dept\r\nleft&nbsp;join&nbsp;t_emp&nbsp;on&nbsp;t_dept.id&nbsp;=&nbsp;t_emp.dept_id\r\nwhere&nbsp;t_dept.id&nbsp;=&nbsp;#{deptId}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><p>结果：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16606532461841660653245849.png\" alt=\"\"/></p><h3>方式二：分步查询</h3><h4>1. 查询部门信息</h4><pre>&nbsp;&nbsp;&nbsp;&nbsp;Dept&nbsp;selectDeptAndEmpById(@Param(&quot;deptId&quot;)&nbsp;Integer&nbsp;deptId);</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;resultMap&nbsp;id=&quot;dept_and_emp&quot;&nbsp;type=&quot;Dept&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;id&quot;&nbsp;column=&quot;id&quot;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;name&quot;&nbsp;column=&quot;name&quot;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;collection&nbsp;property=&quot;emps&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select=&quot;com.zhuangjie.mybatis.dao.EmpMapper.selectByDeptId&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column=&quot;{deptId=id}&quot;&gt;&lt;/collection&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/resultMap&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectDeptAndEmpById&quot;&nbsp;resultMap=&quot;dept_and_emp&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_dept&nbsp;where&nbsp;id&nbsp;=&nbsp;#{deptId}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h4>2. 根据部门id查询部门中的所有员工</h4><pre>&nbsp;&nbsp;&nbsp;&nbsp;List&lt;Emp&gt;&nbsp;selectByDeptId(@Param(&quot;deptId&quot;)&nbsp;Integer&nbsp;deptId);</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;resultMap&nbsp;id=&quot;emps&quot;&nbsp;type=&quot;Emp&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;property=&quot;id&quot;&nbsp;column=&quot;id&quot;&gt;&lt;/id&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;name&quot;&nbsp;column=&quot;name&quot;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;deptId&quot;&nbsp;column=&quot;dept_id&quot;&gt;&lt;/result&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/resultMap&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectByDeptId&quot;&nbsp;resultMap=&quot;emps&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_emp&nbsp;where&nbsp;dept_id&nbsp;=&nbsp;#{deptId}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h4># 延迟加载</h4><ul class=\" list-paddingleft-2\"><li><p>分步查询的优点：可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息：</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载</p></li><li><p>aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。 否则，每个属性会按需加载</p></li></ul><li><p>此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可通过association和collection中的fetchType属性设置当前的分步查询是否使用延迟加载，fetchType=&quot;lazy(延迟加载)|eager(立即加载)&quot;</p></li></ul><pre>&lt;settings&gt;\r\n&nbsp;&nbsp;&lt;!--开启延迟加载--&gt;\r\n&nbsp;&nbsp;&lt;setting&nbsp;name=&quot;lazyLoadingEnabled&quot;&nbsp;value=&quot;true&quot;/&gt;\r\n&lt;/settings&gt;</pre><p>只使用第一步查询到的：触发也延时加载</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16606545141741660654513810.png\" alt=\"\"/></p><p>使用了第二步查询的：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16606546742841660654674185.png\" alt=\"\"/></p><h1>[<em>6</em>] 动态SQL</h1><ul class=\" list-paddingleft-2\"><li><p>Mybatis框架的动态SQL技术是一种根据特定条件动态拼装SQL语句的功能，它存在的意义是为了解决拼接SQL语句字符串时的痛点问题</p></li></ul><h2>[<em>6.1</em>] if</h2><blockquote><p>if标签可通过<code>test</code>属性（即传递过来的数据）的表达式进行判断，若表达式的结果为true，则标签中的内容会执行；反之标签中的内容不会执行</p></blockquote><ol class=\" list-paddingleft-2\"><li><p>使用if存在的问题，代码：</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--List&lt;Emp&gt;&nbsp;selectByEmp(@Param(&quot;emp&quot;)&nbsp;Emp&nbsp;emp);--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectByEmp&quot;&nbsp;resultMap=&quot;emps&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_emp&nbsp;where\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;emp.id&nbsp;!=&nbsp;null&nbsp;and&nbsp;emp.id&nbsp;!=&nbsp;&#39;&#39;&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;=&nbsp;#{emp.id}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;emp.name&nbsp;!=&nbsp;null&nbsp;and&nbsp;emp.name&nbsp;!=&nbsp;&#39;&#39;&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;name&nbsp;=&nbsp;#{emp.name}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><pre>当id为null时，会直接连接后面的，即&nbsp;出现`...&nbsp;where&nbsp;and&nbsp;....`&nbsp;这是错误的,会报错。</pre><ol class=\" list-paddingleft-2\"><li><p>解决方法：加入恒成立条件<code>1=1</code></p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--List&lt;Emp&gt;&nbsp;selectByEmp(@Param(&quot;emp&quot;)&nbsp;Emp&nbsp;emp);--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectByEmp&quot;&nbsp;resultMap=&quot;emps&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_emp&nbsp;where&nbsp;1=1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;emp.id&nbsp;!=&nbsp;null&nbsp;and&nbsp;emp.id&nbsp;!=&nbsp;&#39;&#39;&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;id&nbsp;=&nbsp;#{emp.id}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;emp.name&nbsp;!=&nbsp;null&nbsp;and&nbsp;emp.name&nbsp;!=&nbsp;&#39;&#39;&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;name&nbsp;=&nbsp;#{emp.name}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h2>[<em>6.2</em>] where</h2><p>where一般与if使用，解决了if 存在的<code>... where and ...</code> 的问题，原理是：</p><p>如果里面的if有成立的，那么会对where 与&lt;成立的if的拼接段&gt;间进行合理化，即</p><p>如果是<code>where and name = #{name}</code> 那么会自动在where后面帮我们去掉and/or， 变为<code>where name = #{name}</code> 。注意如果是这种</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--List&lt;Emp&gt;&nbsp;selectByEmp(@Param(&quot;emp&quot;)&nbsp;Emp&nbsp;emp);--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectByEmp&quot;&nbsp;resultMap=&quot;emps&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_emp\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;where&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;emp.id&nbsp;!=&nbsp;null&nbsp;and&nbsp;emp.id&nbsp;!=&nbsp;&#39;&#39;&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;=&nbsp;#{emp.id}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;emp.name&nbsp;!=&nbsp;null&nbsp;and&nbsp;emp.name&nbsp;!=&nbsp;&#39;&#39;&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;name&nbsp;=&nbsp;#{emp.name}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/where&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h2>[<em>6.3</em>] trim</h2><p>用于去掉或添加标签中的内容，使用<code>trim</code> 解决 <code>... where and ...</code> 问题，原理：</p><p>trim的常用的属性：</p><ul class=\" list-paddingleft-2\"><li><p>prefix：在trim标签中的内容的前面添加某些内容</p></li><li><p>suffix：在trim标签中的内容的后面添加某些内容</p></li><li><p>prefixOverrides：在trim标签中的内容的前面去掉某些内容</p></li><li><p>suffixOverrides：在trim标签中的内容的后面去掉某些内容</p></li></ul><blockquote><p>若trim中的标签都不满足条件，则trim标签没有任何效果，也就是只剩下<code>select * from t_emp</code></p></blockquote><pre>&lt;!--List&lt;Emp&gt;&nbsp;selectByEmp(@Param(&quot;emp&quot;)&nbsp;Emp&nbsp;emp);--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;selectByEmp&quot;&nbsp;resultMap=&quot;emps&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_emp\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trim&nbsp;prefix=&quot;where&quot;&nbsp;prefixOverrides=&quot;and|or&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;emp.id&nbsp;!=&nbsp;null&nbsp;and&nbsp;emp.id&nbsp;!=&nbsp;&#39;&#39;&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;=&nbsp;#{emp.id}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;emp.name&nbsp;!=&nbsp;null&nbsp;and&nbsp;emp.name&nbsp;!=&nbsp;&#39;&#39;&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;name&nbsp;=&nbsp;#{emp.name}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/trim&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h2>[<em>6.4</em>] choose、when、otherwise</h2><ul class=\" list-paddingleft-2\"><li><p><code>choose、when、otherwise</code>相当于<code>if...else if..else</code></p></li><li><p>when至少要有一个，otherwise至多只有一个</p></li></ul><pre>&lt;select&nbsp;id=&quot;getEmpByChoose&quot;&nbsp;resultType=&quot;Emp&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;t_emp\r\n&nbsp;&nbsp;&lt;where&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;choose&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;when&nbsp;test=&quot;empName&nbsp;!=&nbsp;null&nbsp;and&nbsp;empName&nbsp;!=&nbsp;&#39;&#39;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emp_name&nbsp;=&nbsp;#{empName}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/when&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;when&nbsp;test=&quot;age&nbsp;!=&nbsp;null&nbsp;and&nbsp;age&nbsp;!=&nbsp;&#39;&#39;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;age&nbsp;=&nbsp;#{age}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/when&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;when&nbsp;test=&quot;sex&nbsp;!=&nbsp;null&nbsp;and&nbsp;sex&nbsp;!=&nbsp;&#39;&#39;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sex&nbsp;=&nbsp;#{sex}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/when&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;when&nbsp;test=&quot;email&nbsp;!=&nbsp;null&nbsp;and&nbsp;email&nbsp;!=&nbsp;&#39;&#39;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email&nbsp;=&nbsp;#{email}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/when&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;otherwise&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;did&nbsp;=&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/otherwise&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/choose&gt;\r\n&nbsp;&nbsp;&lt;/where&gt;\r\n&lt;/select&gt;</pre><pre>@Test\r\npublic&nbsp;void&nbsp;getEmpByChoose()&nbsp;{\r\n&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;SqlSessionUtils.getSqlSession();\r\n&nbsp;&nbsp;DynamicSQLMapper&nbsp;mapper&nbsp;=&nbsp;sqlSession.getMapper(DynamicSQLMapper.class);\r\n&nbsp;&nbsp;List&lt;Emp&gt;&nbsp;emps&nbsp;=&nbsp;mapper.getEmpByChoose(new&nbsp;Emp(null,&nbsp;&quot;张三&quot;,&nbsp;23,&nbsp;&quot;男&quot;,&nbsp;&quot;123@qq.com&quot;,&nbsp;null));\r\n&nbsp;&nbsp;System.out.println(emps);\r\n}</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154429809.png\" alt=\"\"/></p><ul class=\" list-paddingleft-2\"><li><p>相当于<code>if a else if b else if c else d</code>，只会执行其中一个</p></li></ul><h2>[<em>6.5</em>] foreach</h2><ul class=\" list-paddingleft-2\"><li><p>属性：</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>collection：设置要循环的数组或集合</p></li><li><p>item：表示集合或数组中的每一个数据</p></li><li><p>separator：设置循环体之间的分隔符，分隔符前后默认有一个空格，如<code>,</code></p></li><li><p>open：设置foreach标签中的内容的开始符</p></li><li><p>close：设置foreach标签中的内容的结束符</p></li></ul><li><p>批量删除</p></li></ul><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;delete&nbsp;id=&quot;deleteBatch&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;from&nbsp;t_emp&nbsp;where&nbsp;id&nbsp;in\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;foreach&nbsp;collection=&quot;ids&quot;&nbsp;item=&quot;id&quot;&nbsp;separator=&quot;,&quot;&nbsp;open=&quot;(&quot;&nbsp;close=&quot;)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${id}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/foreach&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/delete&gt;</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Test\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;test01()&nbsp;throws&nbsp;IOException&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;is&nbsp;=&nbsp;Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;new&nbsp;SqlSessionFactoryBuilder().build(is).openSession(true);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EmpMapper&nbsp;emp_mapper&nbsp;=&nbsp;sqlSession.getMapper(EmpMapper.class);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer&nbsp;integer&nbsp;=&nbsp;emp_mapper.deleteBatch(new&nbsp;Integer[]{1,2});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(integer);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16607359446321660735944410.png)</pre><ul class=\" list-paddingleft-2\"><li><p>批量添加</p></li></ul><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--Integer&nbsp;insertBatch(@Param(&quot;emps&quot;)&nbsp;List&lt;Emp&gt;&nbsp;emps);--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;insert&nbsp;id=&quot;insertBatch&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert&nbsp;into&nbsp;t_emp(name,dept_id)&nbsp;values\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;foreach&nbsp;collection=&quot;emps&quot;&nbsp;item=&quot;emp&quot;&nbsp;&nbsp;separator=&quot;,&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(#{emp.name},#{emp.deptId})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/foreach&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/insert&gt;</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Test\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;test01()&nbsp;throws&nbsp;IOException&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;is&nbsp;=&nbsp;Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;new&nbsp;SqlSessionFactoryBuilder().build(is).openSession(true);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EmpMapper&nbsp;emp_mapper&nbsp;=&nbsp;sqlSession.getMapper(EmpMapper.class);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp&nbsp;emp1&nbsp;=&nbsp;new&nbsp;Emp(null,1,&quot;小3&quot;,null);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp&nbsp;emp2&nbsp;=&nbsp;new&nbsp;Emp(null,1,&quot;小2&quot;,null);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;Emp&gt;&nbsp;emp_list&nbsp;=&nbsp;new&nbsp;ArrayList&lt;Emp&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emp_list.add(emp1);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emp_list.add(emp2);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer&nbsp;integer&nbsp;=&nbsp;emp_mapper.insertBatch(emp_list);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(integer);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16607356606311660735660277.png)</pre><h2>[<em>6.6</em>] SQL片段</h2><ul class=\" list-paddingleft-2\"><li><p>sql片段，可以记录一段公共sql片段，在使用的地方通过include标签进行引入</p></li><li><p>声明sql片段：<code>&lt;sql&gt;</code>标签</p></li></ul><pre>&lt;sql&nbsp;id=&quot;empColumns&quot;&gt;eid,emp_name,age,sex,email&lt;/sql&gt;</pre><ul class=\" list-paddingleft-2\"><li><p>引用sql片段：<code>&lt;include&gt;</code>标签</p></li></ul><pre>&lt;!--List&lt;Emp&gt;&nbsp;getEmpByCondition(Emp&nbsp;emp);--&gt;\r\n&lt;select&nbsp;id=&quot;getEmpByCondition&quot;&nbsp;resultType=&quot;Emp&quot;&gt;\r\n&nbsp;&nbsp;select&nbsp;&lt;include&nbsp;refid=&quot;empColumns&quot;&gt;&lt;/include&gt;&nbsp;from&nbsp;t_emp\r\n&lt;/select&gt;</pre><h1>MyBatis的缓存</h1><h2>MyBatis的一级缓存</h2><ul class=\" list-paddingleft-2\"><li><p>一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就会从缓存中直接获取，不会从数据库重新访问</p></li><li><p>使一级缓存失效的四种情况：</p></li><ol class=\" list-paddingleft-2\"><li><p>不同的SqlSession对应不同的一级缓存，使用不同的SqlSession</p></li><li><p>同一个SqlSession但是查询条件不同</p></li><li><p>同一个SqlSession两次查询期间执行了任何一次增删改操作（清空了缓存）</p></li><li><p>同一个SqlSession两次查询期间手动清空了缓存</p></li></ol></ul><h2>MyBatis的二级缓存</h2><ul class=\" list-paddingleft-2\"><li><p>二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSession查询的结果会被缓存；此后若再次执行相同的查询语句，结果就会从缓存中获取</p></li><li><p>二级缓存开启的条件</p></li><ol class=\" list-paddingleft-2\"><li><p>在核心配置文件中，设置全局配置属性cacheEnabled=&quot;true&quot;，默认为true，不需要设置</p></li><li><p>在映射文件中设置标签</p></li><li><p>二级缓存必须在SqlSession关闭或提交之后有效</p></li><li><p>查询的数据所转换的实体类类型必须实现序列化的接口</p></li></ol><li><p>使二级缓存失效的情况：两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效</p></li></ul><h2>二级缓存的相关配置</h2><ul class=\" list-paddingleft-2\"><li><p>在mapper配置文件中添加的cache标签可以设置一些属性</p></li><li><p>eviction属性：缓存回收策略</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>LRU（Least Recently Used） – 最近最少使用的：移除最长时间不被使用的对象。</p></li><li><p>FIFO（First in First out） – 先进先出：按对象进入缓存的顺序来移除它们。</p></li><li><p>SOFT – 软引用：移除基于垃圾回收器状态和软引用规则的对象。</p></li><li><p>WEAK – 弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。</p></li><li><p>默认的是 LRU</p></li></ul><li><p>flushInterval属性：刷新间隔，单位毫秒</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句（增删改）时刷新</p></li></ul><li><p>size属性：引用数目，正整数</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>代表缓存最多可以存储多少个对象，太大容易导致内存溢出</p></li></ul><li><p>readOnly属性：只读，true/false</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了很重要的性能优势。</p></li><li><p>false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些，但是安全，因此默认是false</p></li></ul></ul><h2>MyBatis缓存查询的顺序</h2><ul class=\" list-paddingleft-2\"><li><p>先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用</p></li><li><p>如果二级缓存没有命中，再查询一级缓存</p></li><li><p>如果一级缓存也没有命中，则查询数据库</p></li><li><p>SqlSession关闭之后，一级缓存中的数据会写入二级缓存</p></li></ul><h2>整合第三方缓存EHCache（了解）</h2><h3>添加依赖</h3><pre>&lt;!--&nbsp;Mybatis&nbsp;EHCache整合包&nbsp;--&gt;\r\n&lt;dependency&gt;\r\n&nbsp;&nbsp;&lt;groupId&gt;org.mybatis.caches&lt;/groupId&gt;\r\n&nbsp;&nbsp;&lt;artifactId&gt;mybatis-ehcache&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&lt;version&gt;1.2.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;!--&nbsp;slf4j日志门面的一个具体实现&nbsp;--&gt;\r\n&lt;dependency&gt;\r\n&nbsp;&nbsp;&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n&nbsp;&nbsp;&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&lt;version&gt;1.2.3&lt;/version&gt;\r\n&lt;/dependency&gt;</pre><h3>各个jar包的功能</h3><table><thead><tr class=\"firstRow\"><th>jar包名称</th><th>作用</th></tr></thead><tbody><tr><td>mybatis-ehcache</td><td>Mybatis和EHCache的整合包</td></tr><tr><td>ehcache</td><td>EHCache核心包</td></tr><tr><td>slf4j-api</td><td>SLF4J日志门面包</td></tr><tr><td>logback-classic</td><td>支持SLF4J门面接口的一个具体实现</td></tr></tbody></table><h3>创建EHCache的配置文件ehcache.xml</h3><ul class=\" list-paddingleft-2\"><li><p>名字必须叫<code>ehcache.xml</code></p></li></ul><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-8&quot;&nbsp;?&gt;\r\n&lt;ehcache&nbsp;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xsi:noNamespaceSchemaLocation=&quot;../config/ehcache.xsd&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;磁盘保存路径&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;diskStore&nbsp;path=&quot;D:\\atguigu\\ehcache&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;defaultCache\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxElementsInMemory=&quot;1000&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxElementsOnDisk=&quot;10000000&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eternal=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overflowToDisk=&quot;true&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeToIdleSeconds=&quot;120&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeToLiveSeconds=&quot;120&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diskExpiryThreadIntervalSeconds=&quot;120&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memoryStoreEvictionPolicy=&quot;LRU&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/defaultCache&gt;\r\n&lt;/ehcache&gt;</pre><h3>设置二级缓存的类型</h3><ul class=\" list-paddingleft-2\"><li><p>在xxxMapper.xml文件中设置二级缓存类型</p></li></ul><pre>&lt;cache&nbsp;type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;/&gt;</pre><h3>加入logback日志</h3><ul class=\" list-paddingleft-2\"><li><p>存在SLF4J时，作为简易日志的log4j将失效，此时我们需要借助SLF4J的具体实现logback来打印日志。创建logback的配置文件<code>logback.xml</code>，名字固定，不可改变</p></li></ul><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;configuration&nbsp;debug=&quot;true&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;指定日志输出的位置&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;appender&nbsp;name=&quot;STDOUT&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;encoder&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;日志输出的格式&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;按照顺序分别是：时间、日志级别、线程名称、打印日志的类、日志主体内容、换行&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pattern&gt;[%d{HH:mm:ss.SSS}]&nbsp;[%-5level]&nbsp;[%thread]&nbsp;[%logger]&nbsp;[%msg]%n&lt;/pattern&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/encoder&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/appender&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;设置全局日志级别。日志级别按顺序分别是：DEBUG、INFO、WARN、ERROR&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;指定任何一个日志级别都只打印当前级别和后面级别的日志。&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;root&nbsp;level=&quot;DEBUG&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;指定打印日志的appender，这里通过“STDOUT”引用了前面配置的appender&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;appender-ref&nbsp;ref=&quot;STDOUT&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/root&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;根据特殊需求指定局部日志级别&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;logger&nbsp;name=&quot;com.atguigu.crowd.mapper&quot;&nbsp;level=&quot;DEBUG&quot;/&gt;\r\n&lt;/configuration&gt;</pre><h3>EHCache配置文件说明</h3><table><thead><tr class=\"firstRow\"><th>属性名</th><th>是否必须</th><th>作用</th></tr></thead><tbody><tr><td>maxElementsInMemory</td><td>是</td><td>在内存中缓存的element的最大数目</td></tr><tr><td>maxElementsOnDisk</td><td>是</td><td>在磁盘上缓存的element的最大数目，若是0表示无穷大</td></tr><tr><td>eternal</td><td>是</td><td>设定缓存的elements是否永远不过期。 如果为true，则缓存的数据始终有效， 如果为false那么还要根据timeToIdleSeconds、timeToLiveSeconds判断</td></tr><tr><td>overflowToDisk</td><td>是</td><td>设定当内存缓存溢出的时候是否将过期的element缓存到磁盘上</td></tr><tr><td>timeToIdleSeconds</td><td>否</td><td>当缓存在EhCache中的数据前后两次访问的时间超过timeToIdleSeconds的属性取值时， 这些数据便会删除，默认值是0,也就是可闲置时间无穷大</td></tr><tr><td>timeToLiveSeconds</td><td>否</td><td>缓存element的有效生命期，默认是0.,也就是element存活时间无穷大</td></tr><tr><td>diskSpoolBufferSizeMB</td><td>否</td><td>DiskStore(磁盘缓存)的缓存区大小。默认是30MB。每个Cache都应该有自己的一个缓冲区</td></tr><tr><td>diskPersistent</td><td>否</td><td>在VM重启的时候是否启用磁盘保存EhCache中的数据，默认是false</td></tr><tr><td>diskExpiryThreadIntervalSeconds</td><td>否</td><td>磁盘缓存的清理线程运行间隔，默认是120秒。每个120s， 相应的线程会进行一次EhCache中数据的清理工作</td></tr><tr><td>memoryStoreEvictionPolicy</td><td>否</td><td>当内存缓存达到最大，有新的element加入的时候， 移除缓存中element的策略。 默认是LRU（最近最少使用），可选的有LFU（最不常使用）和FIFO（先进先出</td></tr></tbody></table><h1>MyBatis的逆向工程</h1><ul class=\" list-paddingleft-2\"><li><p>正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程的</p></li><li><p>逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源：</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>Java实体类</p></li><li><p>Mapper接口</p></li><li><p>Mapper映射文件</p></li></ul></ul><h2>创建逆向工程的步骤</h2><h3>添加依赖和插件</h3><pre>&lt;dependencies&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;MyBatis核心依赖包&nbsp;--&gt;\r\n&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.mybatis&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mybatis&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;3.5.9&lt;/version&gt;\r\n&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;junit测试&nbsp;--&gt;\r\n&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;junit&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;4.13.2&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;scope&gt;test&lt;/scope&gt;\r\n&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;MySQL驱动&nbsp;--&gt;\r\n&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;8.0.27&lt;/version&gt;\r\n&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;log4j日志&nbsp;--&gt;\r\n&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;1.2.17&lt;/version&gt;\r\n&nbsp;&nbsp;&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n&lt;!--&nbsp;控制Maven在构建过程中相关配置&nbsp;--&gt;\r\n&lt;build&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;构建过程中用到的插件&nbsp;--&gt;\r\n&nbsp;&nbsp;&lt;plugins&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;具体插件，逆向工程的操作是以构建过程中插件形式出现的&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;plugin&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;1.3.0&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;插件的依赖&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependencies&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;逆向工程的核心依赖&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;1.3.2&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;数据库连接池&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.mchange&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;c3p0&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.9.2&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;MySQL驱动&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;8.0.27&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependencies&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/plugin&gt;\r\n&nbsp;&nbsp;&lt;/plugins&gt;\r\n&lt;/build&gt;</pre><h3>创建MyBatis的核心配置文件</h3><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;\r\n&lt;!DOCTYPE&nbsp;configuration\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PUBLIC&nbsp;&quot;-//mybatis.org//DTD&nbsp;Config&nbsp;3.0//EN&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;\r\n&lt;configuration&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;properties&nbsp;resource=&quot;jdbc.properties&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;typeAliases&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;package&nbsp;name=&quot;&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/typeAliases&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;environments&nbsp;default=&quot;development&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;environment&nbsp;id=&quot;development&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transactionManager&nbsp;type=&quot;JDBC&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dataSource&nbsp;type=&quot;POOLED&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;driver&quot;&nbsp;value=&quot;${jdbc.driver}&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;url&quot;&nbsp;value=&quot;${jdbc.url}&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;username&quot;&nbsp;value=&quot;${jdbc.username}&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;password&quot;&nbsp;value=&quot;${jdbc.password}&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dataSource&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/environment&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/environments&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;mappers&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;package&nbsp;name=&quot;&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/mappers&gt;\r\n&lt;/configuration&gt;</pre><h3>创建逆向工程的配置文件</h3><ul class=\" list-paddingleft-2\"><li><p>文件名必须是：<code>generatorConfig.xml</code></p></li></ul><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE&nbsp;generatorConfiguration\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PUBLIC&nbsp;&quot;-//mybatis.org//DTD&nbsp;MyBatis&nbsp;Generator&nbsp;Configuration&nbsp;1.0//EN&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;\r\n&lt;generatorConfiguration&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--\r\n&nbsp;&nbsp;&nbsp;&nbsp;targetRuntime:&nbsp;执行生成的逆向工程的版本\r\n&nbsp;&nbsp;&nbsp;&nbsp;MyBatis3Simple:&nbsp;生成基本的CRUD（清新简洁版）\r\n&nbsp;&nbsp;&nbsp;&nbsp;MyBatis3:&nbsp;生成带条件的CRUD（奢华尊享版）\r\n&nbsp;&nbsp;&nbsp;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;context&nbsp;id=&quot;DB2Tables&quot;&nbsp;targetRuntime=&quot;MyBatis3Simple&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;数据库的连接信息&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;jdbcConnection&nbsp;driverClass=&quot;com.mysql.cj.jdbc.Driver&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connectionURL=&quot;jdbc:mysql://localhost:3306/mybatis&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userId=&quot;root&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password=&quot;123456&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/jdbcConnection&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;javaBean的生成策略--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;javaModelGenerator&nbsp;targetPackage=&quot;com.atguigu.mybatis.pojo&quot;&nbsp;targetProject=&quot;.\\src\\main\\java&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;enableSubPackages&quot;&nbsp;value=&quot;true&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;trimStrings&quot;&nbsp;value=&quot;true&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/javaModelGenerator&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;SQL映射文件的生成策略&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;sqlMapGenerator&nbsp;targetPackage=&quot;com.atguigu.mybatis.mapper&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetProject=&quot;.\\src\\main\\resources&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;enableSubPackages&quot;&nbsp;value=&quot;true&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/sqlMapGenerator&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Mapper接口的生成策略&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;javaClientGenerator&nbsp;type=&quot;XMLMAPPER&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetPackage=&quot;com.atguigu.mybatis.mapper&quot;&nbsp;targetProject=&quot;.\\src\\main\\java&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=&quot;enableSubPackages&quot;&nbsp;value=&quot;true&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/javaClientGenerator&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;逆向分析的表&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;tableName设置为*号，可以对应所有表，此时不写domainObjectName&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;domainObjectName属性指定生成出来的实体类的类名&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&nbsp;tableName=&quot;t_emp&quot;&nbsp;domainObjectName=&quot;Emp&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&nbsp;tableName=&quot;t_dept&quot;&nbsp;domainObjectName=&quot;Dept&quot;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context&gt;\r\n&lt;/generatorConfiguration&gt;</pre><h3>执行MBG插件的generate目标</h3><ul class=\" list-paddingleft-2\"><li><p><br/></p></li></ul><pre>![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154443769.png)</pre><ul class=\" list-paddingleft-2\"><li><p>如果出现报错：<code>Exception getting JDBC Driver</code>，可能是pom.xml中，数据库驱动配置错误</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>dependency中的驱动</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154446772.png\" alt=\"\"/></p></li><li><p>mybatis-generator-maven-plugin插件中的驱动</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154455121.png\" alt=\"\"/></p></li><li><p>两者的驱动版本应该相同</p></li></ul><li><p>执行结果</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154503445.png\" alt=\"\"/></p></li></ul><h2>QBC</h2><h3>查询</h3><ul class=\" list-paddingleft-2\"><li><p><code>selectByExample</code>：按条件查询，需要传入一个example对象或者null；如果传入一个null，则表示没有条件，也就是查询所有数据</p></li><li><p><code>example.createCriteria().xxx</code>：创建条件对象，通过andXXX方法为SQL添加查询添加，每个条件之间是and关系</p></li><li><p><code>example.or().xxx</code>：将之前添加的条件通过or拼接其他条件</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154511364.png\" alt=\"\"/></p></li></ul><pre>@Test&nbsp;public&nbsp;void&nbsp;testMBG()&nbsp;throws&nbsp;IOException&nbsp;{\r\n&nbsp;&nbsp;InputStream&nbsp;is&nbsp;=&nbsp;Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);\r\n&nbsp;&nbsp;SqlSessionFactoryBuilder&nbsp;sqlSessionFactoryBuilder&nbsp;=&nbsp;new&nbsp;SqlSessionFactoryBuilder();\r\n&nbsp;&nbsp;SqlSessionFactory&nbsp;sqlSessionFactory&nbsp;=&nbsp;sqlSessionFactoryBuilder.build(is);\r\n&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;sqlSessionFactory.openSession(true);\r\n&nbsp;&nbsp;EmpMapper&nbsp;mapper&nbsp;=&nbsp;sqlSession.getMapper(EmpMapper.class);\r\n&nbsp;&nbsp;EmpExample&nbsp;example&nbsp;=&nbsp;new&nbsp;EmpExample();\r\n&nbsp;&nbsp;//名字为张三，且年龄大于等于20\r\n&nbsp;&nbsp;example.createCriteria().andEmpNameEqualTo(&quot;张三&quot;).andAgeGreaterThanOrEqualTo(20);\r\n&nbsp;&nbsp;//或者did不为空\r\n&nbsp;&nbsp;example.or().andDidIsNotNull();\r\n&nbsp;&nbsp;List&lt;Emp&gt;&nbsp;emps&nbsp;=&nbsp;mapper.selectByExample(example);\r\n&nbsp;&nbsp;emps.forEach(System.out::println);\r\n}</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154522525.png\" alt=\"\"/></p><h3>增改</h3><ul class=\" list-paddingleft-2\"><li><p><code>updateByPrimaryKey</code>：通过主键进行数据修改，如果某一个值为null，也会将对应的字段改为null</p><pre>&nbsp;&nbsp;![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154530506.png)</pre></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p><code>mapper.updateByPrimaryKey(new Emp(1,&quot;admin&quot;,22,null,&quot;456@qq.com&quot;,3));</code></p></li><li><p><br/></p></li></ul><li><p><code>updateByPrimaryKeySelective()</code>：通过主键进行选择性数据修改，如果某个值为null，则不修改这个字段</p><pre>&nbsp;&nbsp;![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154541759.png)</pre></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p><code>mapper.updateByPrimaryKeySelective(new Emp(2,&quot;admin2&quot;,22,null,&quot;456@qq.com&quot;,3));</code></p></li><li><p><br/></p></li></ul></ul><h1>分页插件</h1><h2>分页插件使用步骤</h2><h3>添加依赖</h3><pre>&lt;!--&nbsp;https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper&nbsp;--&gt;\r\n&lt;dependency&gt;\r\n&nbsp;&nbsp;&lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;\r\n&nbsp;&nbsp;&lt;artifactId&gt;pagehelper&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&lt;version&gt;5.2.0&lt;/version&gt;\r\n&lt;/dependency&gt;</pre><h3>配置分页插件</h3><ul class=\" list-paddingleft-2\"><li><p>在MyBatis的核心配置文件（mybatis-config.xml）中配置插件</p></li><li><p><br/></p></li></ul><pre>![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154547446.png)</pre><pre>&lt;plugins&gt;\r\n&nbsp;&nbsp;&lt;!--设置分页插件--&gt;\r\n&nbsp;&nbsp;&lt;plugin&nbsp;interceptor=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;&lt;/plugin&gt;\r\n&lt;/plugins&gt;</pre><h2>分页插件的使用</h2><h3>开启分页功能</h3><ul class=\" list-paddingleft-2\"><li><p>在查询功能之前使用<code>PageHelper.startPage(int pageNum, int pageSize)</code>开启分页功能</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>pageNum：当前页的页码</p></li><li><p>pageSize：每页显示的条数</p></li></ul></ul><pre>@Test\r\npublic&nbsp;void&nbsp;testPageHelper()&nbsp;throws&nbsp;IOException&nbsp;{\r\n&nbsp;&nbsp;InputStream&nbsp;is&nbsp;=&nbsp;Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);\r\n&nbsp;&nbsp;SqlSessionFactoryBuilder&nbsp;sqlSessionFactoryBuilder&nbsp;=&nbsp;new&nbsp;SqlSessionFactoryBuilder();\r\n&nbsp;&nbsp;SqlSessionFactory&nbsp;sqlSessionFactory&nbsp;=&nbsp;sqlSessionFactoryBuilder.build(is);\r\n&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;sqlSessionFactory.openSession(true);\r\n&nbsp;&nbsp;EmpMapper&nbsp;mapper&nbsp;=&nbsp;sqlSession.getMapper(EmpMapper.class);\r\n&nbsp;&nbsp;//访问第一页，每页四条数据\r\n&nbsp;&nbsp;PageHelper.startPage(1,4);\r\n&nbsp;&nbsp;List&lt;Emp&gt;&nbsp;emps&nbsp;=&nbsp;mapper.selectByExample(null);\r\n&nbsp;&nbsp;emps.forEach(System.out::println);\r\n}</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/images/2022/08/14/20220814154559066.png\" alt=\"\"/></p><h3>分页相关数据</h3><h4>方法一：直接输出</h4><pre>@Test\r\npublic&nbsp;void&nbsp;testPageHelper()&nbsp;throws&nbsp;IOException&nbsp;{\r\n&nbsp;&nbsp;InputStream&nbsp;is&nbsp;=&nbsp;Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);\r\n&nbsp;&nbsp;SqlSessionFactoryBuilder&nbsp;sqlSessionFactoryBuilder&nbsp;=&nbsp;new&nbsp;SqlSessionFactoryBuilder();\r\n&nbsp;&nbsp;SqlSessionFactory&nbsp;sqlSessionFactory&nbsp;=&nbsp;sqlSessionFactoryBuilder.build(is);\r\n&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;sqlSessionFactory.openSession(true);\r\n&nbsp;&nbsp;EmpMapper&nbsp;mapper&nbsp;=&nbsp;sqlSession.getMapper(EmpMapper.class);\r\n&nbsp;&nbsp;//访问第一页，每页四条数据\r\n&nbsp;&nbsp;Page&lt;Object&gt;&nbsp;page&nbsp;=&nbsp;PageHelper.startPage(1,&nbsp;4);\r\n&nbsp;&nbsp;List&lt;Emp&gt;&nbsp;emps&nbsp;=&nbsp;mapper.selectByExample(null);\r\n&nbsp;&nbsp;//在查询到List集合后，打印分页数据\r\n&nbsp;&nbsp;System.out.println(page);\r\n}</pre><ul class=\" list-paddingleft-2\"><li><p>分页相关数据：</p></li></ul><pre>Page{count=true,&nbsp;pageNum=1,&nbsp;pageSize=4,&nbsp;startRow=0,&nbsp;endRow=4,&nbsp;total=8,&nbsp;pages=2,&nbsp;reasonable=false,&nbsp;pageSizeZero=false}[Emp{eid=1,&nbsp;empName=&#39;admin&#39;,&nbsp;age=22,&nbsp;sex=&#39;男&#39;,&nbsp;email=&#39;456@qq.com&#39;,&nbsp;did=3},&nbsp;Emp{eid=2,&nbsp;empName=&#39;admin2&#39;,&nbsp;age=22,&nbsp;sex=&#39;男&#39;,&nbsp;email=&#39;456@qq.com&#39;,&nbsp;did=3},&nbsp;Emp{eid=3,&nbsp;empName=&#39;王五&#39;,&nbsp;age=12,&nbsp;sex=&#39;女&#39;,&nbsp;email=&#39;123@qq.com&#39;,&nbsp;did=3},&nbsp;Emp{eid=4,&nbsp;empName=&#39;赵六&#39;,&nbsp;age=32,&nbsp;sex=&#39;男&#39;,&nbsp;email=&#39;123@qq.com&#39;,&nbsp;did=1}]</pre><h4>方法二使用PageInfo</h4><ul class=\" list-paddingleft-2\"><li><p>在查询获取list集合之后，使用<code>PageInfo&lt;T&gt; pageInfo = new PageInfo&lt;&gt;(List&lt;T&gt; list, intnavigatePages)</code>获取分页相关数据</p></li><ul class=\" list-paddingleft-2\" style=\"list-style-type: square;\"><li><p>list：分页之后的数据</p></li><li><p>navigatePages：导航分页的页码数</p></li></ul></ul><pre>@Test\r\npublic&nbsp;void&nbsp;testPageHelper()&nbsp;throws&nbsp;IOException&nbsp;{\r\n&nbsp;&nbsp;InputStream&nbsp;is&nbsp;=&nbsp;Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);\r\n&nbsp;&nbsp;SqlSessionFactoryBuilder&nbsp;sqlSessionFactoryBuilder&nbsp;=&nbsp;new&nbsp;SqlSessionFactoryBuilder();\r\n&nbsp;&nbsp;SqlSessionFactory&nbsp;sqlSessionFactory&nbsp;=&nbsp;sqlSessionFactoryBuilder.build(is);\r\n&nbsp;&nbsp;SqlSession&nbsp;sqlSession&nbsp;=&nbsp;sqlSessionFactory.openSession(true);\r\n&nbsp;&nbsp;EmpMapper&nbsp;mapper&nbsp;=&nbsp;sqlSession.getMapper(EmpMapper.class);\r\n&nbsp;&nbsp;PageHelper.startPage(1,&nbsp;4);\r\n&nbsp;&nbsp;List&lt;Emp&gt;&nbsp;emps&nbsp;=&nbsp;mapper.selectByExample(null);\r\n&nbsp;&nbsp;PageInfo&lt;Emp&gt;&nbsp;page&nbsp;=&nbsp;new&nbsp;PageInfo&lt;&gt;(emps,5);\r\n&nbsp;&nbsp;System.out.println(page);\r\n}</pre><ul class=\" list-paddingleft-2\"><li><p>分页相关数据：</p></li></ul><pre>PageInfo{\r\npageNum=1,&nbsp;pageSize=4,&nbsp;size=4,&nbsp;startRow=1,&nbsp;endRow=4,&nbsp;total=8,&nbsp;pages=2,&nbsp;\r\nlist=Page{count=true,&nbsp;pageNum=1,&nbsp;pageSize=4,&nbsp;startRow=0,&nbsp;endRow=4,&nbsp;total=8,&nbsp;pages=2,&nbsp;reasonable=false,&nbsp;pageSizeZero=false}[Emp{eid=1,&nbsp;empName=&#39;admin&#39;,&nbsp;age=22,&nbsp;sex=&#39;男&#39;,&nbsp;email=&#39;456@qq.com&#39;,&nbsp;did=3},&nbsp;Emp{eid=2,&nbsp;empName=&#39;admin2&#39;,&nbsp;age=22,&nbsp;sex=&#39;男&#39;,&nbsp;email=&#39;456@qq.com&#39;,&nbsp;did=3},&nbsp;Emp{eid=3,&nbsp;empName=&#39;王五&#39;,&nbsp;age=12,&nbsp;sex=&#39;女&#39;,&nbsp;email=&#39;123@qq.com&#39;,&nbsp;did=3},&nbsp;Emp{eid=4,&nbsp;empName=&#39;赵六&#39;,&nbsp;age=32,&nbsp;sex=&#39;男&#39;,&nbsp;email=&#39;123@qq.com&#39;,&nbsp;did=1}],&nbsp;\r\nprePage=0,&nbsp;nextPage=2,&nbsp;isFirstPage=true,&nbsp;isLastPage=false,&nbsp;hasPreviousPage=false,&nbsp;hasNextPage=true,&nbsp;navigatePages=5,&nbsp;navigateFirstPage=1,&nbsp;navigateLastPage=2,&nbsp;navigatepageNums=[1,&nbsp;2]}</pre><ul class=\" list-paddingleft-2\"><li><p>其中list中的数据等同于方法一中直接输出的page数据</p></li></ul><h4>常用数据：</h4><ul class=\" list-paddingleft-2\"><li><p>pageNum：当前页的页码</p></li><li><p>pageSize：每页显示的条数</p></li><li><p>size：当前页显示的真实条数</p></li><li><p>total：总记录数</p></li><li><p>pages：总页数</p></li><li><p>prePage：上一页的页码</p></li><li><p>nextPage：下一页的页码</p></li><li><p>isFirstPage/isLastPage：是否为第一页/最后一页</p></li><li><p>hasPreviousPage/hasNextPage：是否存在上一页/下一页</p></li><li><p>navigatePages：导航分页的页码数</p></li><li><p>navigatepageNums：导航分页的页码，[1,2,3,4,5]</p></li></ul><p>package com.zhuangjie.mybatis.dao;</p><p>import com.zhuangjie.mybatis.pojo.Dept;</p><p>import org.apache.ibatis.annotations.Param;</p><p>import java.util.List;</p><p>public interface DeptMapper {</p><p>Dept selectById(@Param(&quot;id&quot;) Integer id);</p><p>Dept selectDeptAndEmpById(@Param(&quot;deptId&quot;) Integer deptId);</p><p>}</p><p><br/></p>','2022-08-17 21:37:48',2,11,'2022-08-17',1,0),(281,1,'小庄的软件收藏室','<pre style=\"font-family: &quot;Courier New&quot;; margin: 5px 8px; padding: 5px;\">存放不太必备的软件，但也很不错的软件~\r\n蓝奏云分享链接：https:密码:bbtq</pre><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><span data-mce-style=\"color: #ff0000;\" style=\"color: rgb(255, 0, 0);\"><strong>&nbsp;前面有个“#”的说明，本身有缺点，或有更好的替代的工具</strong></span></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">最佳下载office软件(五星推荐)：https://otp.landian.vip/zh-cn/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">utools最强最强最强最强软件：https://u.tools/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">最强压缩软件&nbsp;<span id=\"filename14954334\" class=\"f_name_title\">BANDIZIP(无广告版本)&nbsp;</span>：https://zjazn.lanzouq.com/i7vht5e&nbsp; &nbsp;较新无广告版本：https://ghpym.lanzoui.com/b00zdekyh</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">下载office(推荐)：https://zjazn.lanzouq.com/iGN94yptrje</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">直接下载office(少数版本)：&nbsp;https://www.jianshu.com/p/2e1b09a4be6c</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">首选激活工具(office/windows)：https://kms.cangshui.net/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">激活office（可安装续期）/windows工具（推荐）：https://aichunjing.lanzoui.com/b710887</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">次选激活工具(office/windows)：http://www.yishimei.cn/network/319.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">关闭防火墙工具：https://zjazn.lanzouq.com/iGferypthid</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">内存清理工具：https://www.henrypp.org/product/memreduct</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">本地文件搜索（Everything）：https://www.voidtools.com/zh-cn/downloads/&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;(中文语言包：https://www.voidtools.com/Everything.lng.zip)</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">播放器（potplayer）：https://potplayer.daum.net/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">mydockfinder （最佳windows美化工具，值得付费使用）：https://www.mydockfinder.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">简洁的卸载工具（Geek&nbsp;）：https://geekuninstaller.com/download</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">最好用的ftp+ssh工具（MobaXterm）：https://mobaxterm.mobatek.net/download-home-edition.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">快捷弹出窗口工具（Maya，快速回到工作状态）：https://blog.arae.cc/post/25842.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">最佳MD编辑器（Typora）: https://www.typora.io/releases/all</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">【java程序员】maven ：https://maven.apache.org/download.cgi</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">电脑长截图工具：https://faststone-capture.en.softonic.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">设置键值，由键替换为值&amp;快速计算：https://cjkis.me/capslock+/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">最佳替换window笔记本的文本编辑器：https://github.com/rizonesoft/Notepad3/releases</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">最佳文本编辑器（notepad++）：https://github.com/notepad-plus-plus/notepad-plus-plus/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">精准OCR工具：https://ocr.oldfish.cn/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">softcnkiller四海一叶秋（流氓软件或不正常软件扫描工具）：https://www.yanlutong.com/pcsoft/8194</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">文件粉碎：https://www.lanzoui.com/iaeefqj</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">windows内置软件卸载工具：https://github.com/Teraskull/PyDebloatX/releases</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">关闭windows安全工具：https://www.ghxi.com/defendercontrol.html&nbsp; &nbsp; ，第二款：https://www.wrfou.com/defender-control.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">检测电脑当前是否可使用虚拟软件，如模拟器，VM虚拟机：https://leomoon.com/downloads/desktop-apps/leomoon-cpu-v/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">字体设定（给电脑换字体工具）：https://github.com/Tatsu-syo/noMeiryoUI</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">对文本的内容进行搜索从而找到文件，你只要知道文本有哪些内容，就能找到这个文件（真的牛）：https://anytxt.net/download/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">[程序员] github,npm等加速：https://github.com/docmirror/dev-sidecar/releases/tag/v1.6.1</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">安装系统，使用PE的最佳工具(ventoy)：https://www.cnblogs.com/zjazn/p/15880711.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">微软运行库：https://www.aliyundrive.com/s/heGxXVxQC9R</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">局域网文件分享：http://iscute.cn/chfs</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">远程控制软件ToDesk:https://www.todesk.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">屏幕变写字板，老师喜欢的软件：http://www.pointofix.de/download.php</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">校园网开wifi(它起防检测作用，打开这个软件后，你再去电脑设置中正常打开电脑的热点):&nbsp; http://wifi.ggsafe.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">QtScrcpy（开源的手机投屏到电脑的软件）：https://github.com/barry-ran/QtScrcpy</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">将阿里云盘挂载到电脑的盘符上：https://www.appinn.com/clouddrive</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">电脑硬件工具箱：https://wintool.cc/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">五笔输入法工具，词库与自定义词库（WubLex）: https://wubi.aardio.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">快速调整窗口尺寸工具：https://meta.appinn.net/t/topic/6837</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">BliBli视频下载器：https://github.com/kengwang/BiliDuang</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">ftp+ssh多平台工具（FinalShell）：http://www.hostbuf.com/t/988.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">ftp+ssh多平台开源工具（WindTerm）：https://github.com/kingToolbox/WindTerm</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">linux上的一款护眼软件：https://github.com/maoserr/redshiftgui</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">IDM (是最好用的下载器，但是付费的且难于破解，推荐其替换品：NDM)：https://www.lanzoux.com/b288308/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">IDM破解方法：https://zjazn.lanzouq.com/iwaXy02rl4gb</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">PDF阅读器（福昕，多平台）：https://www.foxitsoftware.cn/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">windoes镜像与office高速下载（内容较旧，但下载快）：https://www.heidoc.net/php/Windows-ISO-Downloader.exe</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">阿里网盘挂载：https://www.aliyundrive.com/s/wLQfjyVMUq3</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">windows镜像在线快速下载：https://www.yanlutong.com/xitong/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">驱动精灵（电脑安装驱动）：https://www.aliyundrive.com/s/18NYJ6xpDWL</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">[程序员] IDEA无限重置：https://zjazn.lanzouq.com/iJIdN01l4bng</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Adobe软件注册机（这是官方版的，所以要梯子，使用时，不要登录着账号！，要退出来！）：https://www.reddit.com/r/GenP/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">PanDownload复活版：https://pandownload.net/index.html （官方电报：https://t.me/pandownloadfix）</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">sodaplayer (还算不错的磁力播放器)：https://www.sodaplayer.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">文件蜈蚣（一款多类地址下载器，支持下载ed2k，但添加没反应，下载种子文件比较直观，可以看到有几个用户跟你一起下载）：http://www.filecxx.com/zh_CN/index.html#downloads</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Aria2 (支持磁力的下载, 特点是免费，轻巧)：http://aria2.baisheng999.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Adobe软件 (官方正版下载):&nbsp;https://www.adobe.com/cn/products/catalog.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"># 爱奇艺看图（打开图片的工具，查看gif不是动态的，ps的psd）：https://zjazn.lanzouq.com/i3goV01ukhdc</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">#&nbsp;ImageGlass看图（打开图片的工具，查看gif不是动态的，但可以查找 ps的psd，支持的格式较全）：https://www.filehorse.com/download-imageglass-64/download/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Notepad2 （替换笔记本的一个不错的方案，推荐）：https://www.flos-freeware.ch/notepad2.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">#EditPlus（<strong>当前已不推荐</strong>，windows最好的笔记本替代工具，里面有免费激活脚本）：https://zjazn.lanzouq.com/iRH0X01w26xa</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">balenaEtcher (iso直接制作启动盘，多平台)：https://www.balena.io/etcher/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">rufus（ iso直接制作启动盘，强）：https://rufus.ie/zh/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">deepin（iso直接制作启动盘，最好用）： https://cdimage.deepin.com/applications/deepin-boot-maker/windows/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"># 旧MyFinder+旧MyDock合并版（高仿Mac，请在本页搜索mydock，<strong>此项已不推荐</strong>）：https://zjazn.lanzouq.com/ivOWf01wtqod</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">mydock（mydockfinder收费前的版本，已最优配置）：https://zjazn.lanzouq.com/iyFAI034bf8h</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">PDF XChange Editor（PDF编辑器/阅读器，PDF第二选择，需要购买）：http://www.dayanzai.me/pdf-xchange-editor.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">[程序员] 袋鼠数据库工具（多平台的数据库工具，但还不太好，现不推荐）：https://www.datatable.online/zh/document/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">RetroBar （win任务栏复古，xp，设置后任务栏空白右击进入软件设置可切换主题）：https://github.com/dremin/RetroBar</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">gif录制工具（Screen To Gif）：https://www.screentogif.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">[程序员] StarUML（画UML类图工具）：https://staruml.io/download</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">阿里云盘小白羊版（补充linux没有官方版这点）：https://github.com/liupan1890/aliyunpan</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Mac左右滑变window系统：https://www.parallels.cn/products/desktop/trial/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">WinBuilder（PE系统制作工具）：https://xia1ge.lanzout.com/iACn500zydtc&nbsp; &nbsp; &nbsp;教程：https://x1g.la/winbuilder.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">7zip（免费，强大的解压缩工具，<strong>次选</strong>解压缩软件）: https://www.7-zip.org/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">[Linux] Guake（自上而下的终端）：sudo apt install guake</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">[Linux] Ubuntu 最新镜像（最新Bate LTS版本下载）：https://releases.ubuntu.com/jammy/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Honeyview（看图软件，轻小，无广告，首选看图工具, 与Bandizip是一家的 ）：https://cn.bandisoft.com/honeyview/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">NDM (IDM的最优替代器)：https://www.neatdownloadmanager.com/index.php/en/&nbsp; 汉化（替换的方式）：https://www.ghxi.com/ndm.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">小丸子工具箱（视频，音频无损压缩，高压缩率，无损压缩）：官网：https://maruko.appinn.me/&nbsp; 直链：https://www.aliyundrive.com/s/HmhUz6m7TMe</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">二款视频压缩工具（Moo0、H264压缩）：https://zjazn.lanzouq.com/izcnK02rjrij</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">VM安装mac系统解锁器：https://github.com/paolo-projects/unlocker&nbsp; （将unlocker 整个目录解压在VM根目录，以管理员身份运行 win-install.cmd）</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">VM-mac优化工具：https://gitee.com/thundergold/beamoff</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">仿mac主题：https://zjazn.lanzouq.com/isnxd031lmbe</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">msconfig （删除多系统引导）：Ctrl+R 输出 msconfig 回车</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">单文件制作（可以把程序打包成exe运行，适合一些绿色工具类软件）：https://zjazn.lanzouq.com/ifXtP0347xsb</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">LR.Team (第三方recovery):&nbsp;<a href=\"https://www.book-dl.com/addons/cms/go/index.html?url=https%3A%2F%2Fweibo.com%2F5969889578\" data-mce-href=\"https://www.book-dl.com/addons/cms/go/index.html?url=https%3A%2F%2Fweibo.com%2F5969889578\">https://weibo.com/5969889578</a></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">clash（小猫咪）：https://github.com/Fndroid/clash_for_windows_pkg&nbsp; &nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">clash （小猫咪汉化开源版）：https://github.com/ender-zhao/Clash-for-Windows_Chinese</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">uTorrent Pro 3.5.5.44954 (破解增强绿色版, bt/磁力下载): https://www.lanzouw.com/ipL0Qw1ob8b</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">熊猫OCR（非常不错的一款免费的OCR工具）：https://github.com/miaomiaosoft/PandaOCR</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><a>clash for Android (安卓的Clash客户端):&nbsp; https://github.com/Kr328/ClashForAndroid/releases</a></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><span data-mce-style=\"color: #ff0000;\" style=\"color: rgb(255, 0, 0);\">PanDownload</span>&nbsp;（百度网盘第三方，不一定什么时候都可用，要注意的是先分享后再用分享的下载，打开后页面有下载的链接）：https://pandownload.net/index.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><span data-mce-style=\"color: #ff0000;\" style=\"color: rgb(255, 0, 0);\">通过企业为文件/文件夹临时加速进行高速下载</span>（百度网盘下载，从淘宝购买加速次数，比如一个月100次/10元）：&nbsp;https://m.tb.cn/h.fIMEKtC</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">[程序员] redis 管理工具（开源免费，美观）：https://github.com/qishibo/AnotherRedisDesktopManager</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">微软运行库（安装后重启，用于解决某些软件运行报错问题）：https://github.com/abbodi1406/vcredist</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;Wub（关闭系统更新）：https://www.sordum.org/downloads/?st-windows-update-blocker</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Dism++ (系统优化，驱动备份/安装)：https://github.com/Chuyu-Team/Dism-Multi-language</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">wps 无广告版 (解决wps广告，退出后在后台停留) :https://zjazn.lanzouq.com/iKNOD07x0zab</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">clashX (Mac平台Clash&nbsp;): https://github.com/yichengchen/clashX/releases</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">v删2rayN (这是v删2ray的windows客户端，手机的是v删2rayNG, 注意下载有内核的): https://github.com/2dust/v删2rayN/releases/tag/5.23</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">百分浏览器（如果一定要下载“国产”的浏览器，那这个是首选，可以登录谷歌账号同步信息）：https://www.centbrowser.cn/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">ImTip（ImTip – 仅 660 KB，输入法状态提示工具， 切换输入法时，会显示。）：https://github.com/aardio/ImTip&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Fiddler（很不错的，PC抓包工具）：https://www.telerik.com/download/fiddler&nbsp;&nbsp;<a href=\"https://www.cnblogs.com/zhuangjie/p/16296933.html\" target=\"_blank\" data-mce-href=\"https://www.cnblogs.com/zhuangjie/p/16296933.html\">教程&gt;&gt;</a></p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">diskgenius (最好用的磁盘工具): https://www.diskgenius.cn/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">sumatrapdf (小而好用的pdf阅读器): https://www.sumatrapdfreader.org/downloadafter</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"># 不共享的内容：&nbsp;https://www.cnblogs.com/zhuangjie/p/16385387.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">WPD（推荐的防火墙关闭，别有一些系统优化功能）：https://zjazn.lanzouq.com/izozN06k3nyh</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">微海鼠标自动点击器（鼠标动作录制）：https://zjazn.lanzouq.com/i1Yt206l6iuh</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">iwck（使键盘失效，键盘锁定）：https://github.com/Nigh/I-wanna-clean-keyboard</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">bitvise (SSH连接工具，有SFTP，推荐)：https://www.bitvise.com/ssh-client-download</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;EVC视频录制（一款不错的视频录制工具，有会员机制）：https://www.ieway.cn/evcapture.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">KeybMap(解决键盘故障的神器)：https://www.cnblogs.com/zhuangjie/p/16422970.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Windows10优化小工具（不错）：https://www.ghxi.com/win10yhxgj.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Surfboard (Clash的替代器，只有安卓端，不支持多端): https://manual.getsurfboard.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">WinXray（windows订阅代理工具，支持多种订阅链接）https://github.com/TheMRLL/WinXray</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">安卓应用：歌词适配 (各平台音乐各免费音质下载)：微信公众号搜索“歌词适配”</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">安卓应用：微音乐&nbsp;(各平台音乐各免费音质下载)：微信公众号搜索“微音乐助手”</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">安卓应用：HttpClient (抓包工具）：https://zjazn.lanzouq.com/iUxvE06onqhc</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">winToGo (制作移动U盘系统):&nbsp;https://www.disktool.cn/wintogo.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">listen1（聚合多平台音乐，支持多平台，linux ,mac ,windows,安卓，甚至浏览器插件）：&nbsp;http://listen1.github.io/listen1/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">ezip（Mac解压工具，免费的，好看的）：https://ezip.awehunt.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">KeyFreeze（临时禁用鼠标与键盘）：https://www.appinn.com/keyfreeze-2/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">蓝瘦（安卓端的资源搜索）：https://www.6yit.com/328.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">MarkText（Typora 替换器）：https://github.com/marktext/marktext&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">MarkText汉化（直接覆盖MarkText的安装目录）：https://github.com/chinayangxiaowei/marktext-chinese-language-pack</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">bootice（修改/删除系统启动项，ubuntu ,windows这种启动项）：https://www.majorgeeks.com/files/details/bootice_64_bit.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">updf（高颜值的PDF阅读器）：https://updf.com/</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">Reduce Memory （内存清理，本文介绍的第二款，特点是，有清理间隔）：https://www.sordum.org/9197/reduce-memory</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">cleanmem（清理内存，可以对某个软件进行操作，具有超过指定内存百分比时清理，定时清理功能）https://www.majorgeeks.com/files/details/cleanmem.html</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">&nbsp;</p><p style=\"margin: 10px auto; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\">以上全为博主收藏，不断更新中~</p><p><br/></p>','2022-08-23 12:56:31',2,0,'2022-08-23',1,0),(285,1,'谷粒商城','<p>微服务架构图</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16579568498541657956849135.png\" alt=\"\"/></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16579569800931657956979894.png\" alt=\"\"/></p><h3>[<em>1</em>] 环境的搭建</h3><h4>[<em>1.1</em>] linux</h4><p>ip: 192.168.87.101</p><p>配置源：</p><pre>#&nbsp;备份原yum源\r\n\r\nmv&nbsp;/etc/yum.repos.d/CentOS-Base.repo&nbsp;/etc/yum.repos.d/CentOS-Base.repo.backup\r\n#&nbsp;使用新yum源\r\ncurl&nbsp;-o&nbsp;/etc/yum.repos.d/CentOS-Base.repo&nbsp;http://mirrors.163.com/.help/CentOS7-Base-163.repo\r\n#&nbsp;生成缓存\r\nyum&nbsp;makecache</pre><pre>关闭防火墙</pre><pre>#1、查看防火墙状态\r\nfirewall-cmd&nbsp;--state\r\n#2、停止firewall\r\nsystemctl&nbsp;stop&nbsp;firewalld.service\r\n#3、禁止firewall开机启动\r\nsystemctl&nbsp;disable&nbsp;firewalld.service</pre><p>虚拟机docker的安装：</p><pre>#卸载系统之前的docker&nbsp;\r\nsudo&nbsp;yum&nbsp;remove&nbsp;docker&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-client&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-client-latest&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-common&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-latest&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-latest-logrotate&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-logrotate&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-engine\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\nsudo&nbsp;yum&nbsp;install&nbsp;-y&nbsp;yum-utils\r\n\r\n#&nbsp;配置镜像\r\nsudo&nbsp;yum-config-manager&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;--add-repo&nbsp;\\\r\n&nbsp;&nbsp;&nbsp;&nbsp;https://download.docker.com/linux/centos/docker-ce.repo\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\nsudo&nbsp;yum&nbsp;install&nbsp;docker-ce&nbsp;docker-ce-cli&nbsp;containerd.io\r\n\r\nsudo&nbsp;systemctl&nbsp;start&nbsp;docker\r\n#&nbsp;设置开机自启动\r\nsudo&nbsp;systemctl&nbsp;enable&nbsp;docker\r\n\r\ndocker&nbsp;-v\r\n#&nbsp;配置镜像加速\r\nsudo&nbsp;mkdir&nbsp;-p&nbsp;/etc/docker\r\nsudo&nbsp;tee&nbsp;/etc/docker/daemon.json&nbsp;&lt;&lt;-&#39;EOF&#39;\r\n{\r\n&nbsp;&nbsp;&quot;registry-mirrors&quot;:&nbsp;[&quot;https://chqac97z.mirror.aliyuncs.com&quot;]\r\n}\r\nEOF\r\n\r\nsudo&nbsp;systemctl&nbsp;daemon-reload\r\nsudo&nbsp;systemctl&nbsp;restart&nbsp;docker</pre><h4>[<em>1.2</em>] docker中安装mysql</h4><pre>sudo&nbsp;docker&nbsp;pull&nbsp;mysql:5.7\r\n\r\n#&nbsp;--name指定容器名字&nbsp;-v目录挂载&nbsp;-p指定端口映射&nbsp;&nbsp;-e设置mysql参数&nbsp;-d后台运行\r\nsudo&nbsp;docker&nbsp;run&nbsp;-p&nbsp;3306:3306&nbsp;--name&nbsp;mysql&nbsp;\\\r\n-v&nbsp;/mydata/mysql/log:/var/log/mysql&nbsp;\\\r\n-v&nbsp;/mydata/mysql/data:/var/lib/mysql&nbsp;\\\r\n-v&nbsp;/mydata/mysql/conf:/etc/mysql&nbsp;\\\r\n-e&nbsp;MYSQL_ROOT_PASSWORD=3333&nbsp;\\\r\n-d&nbsp;mysql:5.7\r\n\r\n#查看docker中mysql的状态\r\ndocker&nbsp;ps&nbsp;-a\r\n\r\n\r\n#&nbsp;进入已启动的容器\r\ndocker&nbsp;exec&nbsp;-it&nbsp;mysql&nbsp;bin/bash\r\n#&nbsp;退出进入的容器\r\nexit;\r\n\r\n#因为有目录映射，所以我们可以直接在镜像外执行\r\nvi&nbsp;/mydata/mysql/conf/my.conf&nbsp;\r\n\r\n[client]\r\ndefault-character-set=utf8\r\n[mysql]\r\ndefault-character-set=utf8\r\n[mysqld]\r\ninit_connect=&#39;SET&nbsp;collation_connection&nbsp;=&nbsp;utf8_unicode_ci&#39;\r\ninit_connect=&#39;SET&nbsp;NAMES&nbsp;utf8&#39;\r\ncharacter-set-server=utf8\r\ncollation-server=utf8_unicode_ci\r\nskip-character-set-client-handshake\r\nskip-name-resolve\r\n\r\n\r\ndocker&nbsp;restart&nbsp;mysql</pre><p>设置docker启动时mysql启动</p><pre>docker&nbsp;update&nbsp;mysql&nbsp;--restart=always</pre><h4>[<em>1.3</em>] redis的安装</h4><p>如果直接挂载的话docker会以为挂载的是一个目录，所以我们先创建一个文件然后再挂载，在虚拟机中。</p><pre>#&nbsp;在虚拟机中\r\nmkdir&nbsp;-p&nbsp;/mydata/redis/conf\r\ntouch&nbsp;/mydata/redis/conf/redis.conf\r\n\r\ndocker&nbsp;pull&nbsp;redis\r\n\r\ndocker&nbsp;run&nbsp;-p&nbsp;6379:6379&nbsp;--name&nbsp;redis&nbsp;\\\r\n-v&nbsp;/mydata/redis/data:/data&nbsp;\\\r\n-v&nbsp;/mydata/redis/conf/redis.conf:/etc/redis/redis.conf&nbsp;\\\r\n-d&nbsp;redis&nbsp;redis-server&nbsp;/etc/redis/redis.conf\r\n\r\n#&nbsp;直接进去redis客户端。\r\ndocker&nbsp;exec&nbsp;-it&nbsp;redis&nbsp;redis-cli</pre><p>默认是不持久化的。在配置文件中输入appendonly yes，就可以aof持久化了。修改完docker restart redis，docker -it redis redis-cli</p><pre>vim&nbsp;/mydata/redis/conf/redis.conf\r\n#&nbsp;插入下面内容\r\nappendonly&nbsp;yes\r\n保存\r\n\r\ndocker&nbsp;restart&nbsp;redis</pre><p>设置docker启动时redis启动</p><pre>docker&nbsp;update&nbsp;redis&nbsp;--restart=always</pre><h4>[<em>1.4</em>] IDEA开发环境</h4><p><strong>maven</strong></p><p>在settings中配置阿里云镜像，配置jdk1.8。这个基本都配置过，不贴了</p><p>IDEA安装插件lombok，mybatisX。IDEA设置里配置好maven</p><p><strong>vsCode</strong></p><p>下载vsCode用于前端管理系统。在vsCode里安装插件。</p><ul class=\" list-paddingleft-2\"><li><p>Auto Close Tag</p></li><li><p>Auto Rename Tag</p></li><li><p>Chinese</p></li><li><p>ESlint</p></li><li><p>HTML CSS Support</p></li><li><p>HTML Snippets</p></li><li><p>JavaScript ES6</p></li><li><p>Live Server</p></li><li><p>open in brower</p></li><li><p>Vetur</p></li></ul><h3>[<em>2</em>] 后端项目的初始化</h3><p>（1）在github上创建一个仓库:</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583061844071658306183644.png\" alt=\"\"/></p><p>（2）在IDEA中New–Project from version control–git–复制刚才项目的地址。</p><p>（3）以订单模块为例，依次创建出以下服务模块</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583072710211658307270895.png\" alt=\"\"/></p><ul class=\" list-paddingleft-2\"><li><p>商品服务product</p></li><li><p>存储服务ware</p></li><li><p>订单服务order</p></li><li><p>优惠券服务coupon</p></li><li><p>用户服务member</p></li></ul><p>共同点：</p><ul class=\" list-paddingleft-2\"><li><p>导入web和openFeign</p></li><li><p>group：com.atguigu.gulimall</p></li><li><p>Artifact：gulimall-XXX</p></li><li><p>每一个服务，<a href=\"http://xn--com-k82e60c.atguigu.gulimall.XXX\">包名com.atguigu.gulimall.XXX</a>{product/order/ware/coupon/member}</p></li><li><p>模块名：gulimall-XXX</p></li></ul><p>（4）从某个项目粘贴个pom.xml粘贴到项目目录，修改为</p><pre>&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project&nbsp;xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&nbsp;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n&nbsp;&nbsp;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0&nbsp;https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n&nbsp;&nbsp;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n&nbsp;&nbsp;&lt;groupId&gt;com.atguigu.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&lt;artifactId&gt;gulimall&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&nbsp;&nbsp;&lt;name&gt;gulimall&lt;/name&gt;\r\n&nbsp;&nbsp;&lt;description&gt;聚合服务&lt;/description&gt;\r\n\r\n&nbsp;&nbsp;&lt;properties&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n&nbsp;&nbsp;&lt;/properties&gt;\r\n\r\n&nbsp;&nbsp;&lt;packaging&gt;pom&lt;/packaging&gt;\r\n\r\n&nbsp;&nbsp;&lt;modules&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-coupon&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-member&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-order&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-product&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-ware&lt;/module&gt;\r\n&nbsp;&nbsp;&lt;/modules&gt;\r\n\r\n&lt;/project&gt;</pre><p>（5）然后右击pom.xml ，选择 “添加为Maven项目”</p><p>在maven窗口刷新，并点击+号，找到刚才的pom.xml添加进来，发现多了个root。这样比如运行root的clean命令，其他项目也一起clean了。</p><p>（6）修改总项目的<code>.gitignore</code>，把小项目里的不必要提交的文件在提交的时候忽略掉。</p><pre>**/mvnw\r\n**/mvnw.cmd\r\n**/.mvn\r\n**/target/\r\n.idea\r\n**/.gitignore</pre><p>在IDEA左下角的git中version control/local Changes，点击刷新看Unversioned Files，可以看到变化，全选最后剩下21个文件。</p><h3>[<em>3</em>] 数据库</h3><p><a href=\"https://github.com/18476305640/gulimall/tree/dev/%E6%96%87%E4%BB%B6%E4%BB%93%E5%82%A8/sql%E6%96%87%E4%BB%B6\">https://github.com/18476305640/gulimall/tree/dev/文件仓储/sql文件</a></p><p>分别对应创建即可。</p><h3>[<em>4</em>] 人人开源-后台管理系统</h3><h4>[<em>4.1</em>] 后台</h4><p>在 <code>gulimall</code> 项目根目录下，</p><p>git clone <a href=\"https://gitee.com/renrenio/renren-fast.git\">https://gitee.com/renrenio/renren-fast.git</a></p><p>然后删掉克隆下来的项目的 <code>.git</code> 目录。</p><p>添加：在gulimall根目录下的pom.xml中加入一个model</p><p><code>&lt;module&gt;renren-fast&lt;/module&gt;</code></p><p>右击右上角的模块，选择好</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583650073221658365006670.png\" alt=\"\"/></p><p>加载好后，<code>renren-fast</code> 就成了我们gulimall的一个模块了。</p><p>进入renren-fast模块</p><p>修改：</p><p>renren-fast\\src\\main\\resources\\application-dev.yml</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583651546661658365154499.png\" alt=\"\"/></p><p>这个<code>gulimall_admin</code> 数据库的表，请转阅 <code>renren-fast → db</code></p><h4>[<em>4.2</em>] 前台</h4><p>克隆项目：</p><p>git clone <a href=\"https://gitee.com/renrenio/renren-fast-vue.git\">https://gitee.com/renrenio/renren-fast-vue.git</a></p><p>步入 <code>renren-fast-vue</code></p><p>删掉 <code>.git</code></p><p>cmd 执行</p><pre>#&nbsp;(可以转阅：https://github.com/renrenio/renren-fast-vue/wiki/Getting-started)\r\n#&nbsp;克隆项目\r\ngit&nbsp;clone&nbsp;https://github.com/daxiongYang/renren-fast-vue.git\r\n\r\n#&nbsp;安装依赖\r\n#&nbsp;1\r\nnpm&nbsp;install&nbsp;-g&nbsp;cnpm&nbsp;--registry=https://registry.npm.taobao.org\r\n#&nbsp;2\r\ncnpm&nbsp;install\r\n\r\n#&nbsp;启动服务\r\nnpm&nbsp;run&nbsp;dev</pre><p>启动好项目后，且后端项目也已经启动后，访问前台：</p><p><a href=\"http://localhost:8001/#/login\">http://localhost:8001/#/login</a></p><p>账号/密码：admin/admin 进入后台：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16583656030111658365602884.png\" alt=\"\"/></p><h4>[<em>4.3</em>] 代码生成及测试</h4><p>在项目<code>gulimall</code> 根目录下执行克隆：</p><pre>git&nbsp;clone&nbsp;https://gitee.com/renrenio/renren-generator.git</pre><p>把里面的.git文件删除，同样配置好pom.xml</p><pre>&lt;modules&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-coupon&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-member&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-order&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-product&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;gulimall-ware&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;renren-fast&lt;/module&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module&gt;renren-generator&lt;/module&gt;\r\n&lt;/modules&gt;</pre><p>在maven中刷新一下, 等待把<code>renren-generator</code> 加入到项目成为模块。</p><p>然后修改一下<code>renren-generator</code>的文件：</p><p><code>renren-generator\\src\\main\\resources\\application.yml</code></p><pre>url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_pms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\nusername:&nbsp;root\r\npassword:&nbsp;3333</pre><p><code>renren-generator\\src\\main\\resources\\generator.properties</code></p><pre>#&nbsp;主目录\r\nmainPath=com.zhuangjie\r\n#包名\r\npackage=com.zhuangjie.gulimall\r\n#模块名\r\nmoduleName=product\r\n#作者\r\nauthor=zhuangjie\r\n#email\r\nemail=2119299531@qq.com\r\n#表前缀(类名不会包含表前缀)&nbsp;#&nbsp;我们的pms数据库中的表的前缀都pms\r\n#&nbsp;如果写了表前缀，每一张表对于的javaBean就不会添加前缀了\r\ntablePrefix=pms_</pre><p><code>renren-generator\\src\\main\\resources\\template\\Controller.java.vm</code></p><p>注释掉这与下面两行匹配的行，因为他是shiro的东西</p><pre>//需要注释&nbsp;\r\nimport&nbsp;org.apache.shiro.authz.annotation.RequiresPermissions;\r\n\r\n//这样的需要注释&nbsp;，有好几行\r\n@RequiresPermissions(&quot;****${moduleName}:$****{pathName}:list&quot;)</pre><p>然后启动一下 renren-generator项目，访问：<a href=\"http://localhost/\">http://localhost/</a></p><p>生成代码：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584136423941658413642104.png\" alt=\"\"/></p><p>将压缩包中的<code>main</code> 目录替换到 <code>gulimall-product</code> 中，因为gulimall_pms与product对应</p><p>解决报错，将生成的代码粘在项目中后，会报红的，我们先在gulimall项目右击创建一个maven的子模块：<code>gulimall-common</code></p><p>让 <code>gulimall-product</code> 模块引用 <code>gulimall-common</code>模块。</p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.zhuangjie.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&lt;/dependency&gt;</pre><p>在gulimall-common→ pom.xml：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;mybatisPLUS--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.baomidou&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;3.3.2&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--简化实体类，用@Data代替getset方法--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;1.18.8&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;httpcomponent包。发送http请求&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;httpcore&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;4.4.13&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;2.6&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;</pre><p>此时还是有报错，将兄弟模块 <code>renren-fast</code> 的部分文件放在<code>gulimall-common</code> 中</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584168414681658416841162.png\" alt=\"\"/></p><p>解决报错的参与点：</p><p>1）看报错的类导入了的是什么包下的</p><p>2）没有的文件可以从renren-fast中找</p><p>3）这些模块的jdk版本要弄好</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584170953981658417095161.png\" alt=\"\"/></p><p><strong>测试,</strong></p><p>在gulimall-common → pom.xml中添加依赖</p><pre>&lt;!--&nbsp;数据库驱动&nbsp;https://mvnrepository.com/artifact/mysql/mysql-connector-java&nbsp;--&gt;\r\n&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;8.0.17&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;!--tomcat里一般都带--&gt;\r\n&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;2.5&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;</pre><p>在product项目的resources目录下新建application.yml</p><pre>spring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_pms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><blockquote><p>classpath 和 classpath* 区别：classpath：只会到你的class路径中查找找文件;classpath*：不仅包含class路径，还包括jar文件中(class路径)进行查找\r\nclasspath*`的使用：当项目中有多个classpath路径，并同时加载多个classpath路径下（此种情况多数不会遇到）的文件，就发挥了作用，如果不加``，则表示仅仅加载第一个classpath路径。</p></blockquote><p>然后在product主启动类上加上注解**@MapperScan()**</p><pre>@MapperScan(&quot;com.zhuangjie.gulimall.product.dao&quot;)\r\n@SpringBootApplication\r\npublic&nbsp;class&nbsp;ProductApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(ProductApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p>然后去测试，先通过下面方法给数据库添加内容</p><pre>@SpringBootTest\r\nclass&nbsp;ProductApplicationTests&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Autowired\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BrandService&nbsp;brandService;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Test\r\n&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;contextLoads()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BrandEntity&nbsp;brandEntity&nbsp;=&nbsp;new&nbsp;BrandEntity();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brandEntity.setName(&quot;华为&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brandEntity.setDescript(&quot;手机、笔记本、路由器~&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brandService.save(brandEntity);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><h4>[<em>4.4</em>] 继续生成其它模块的代码</h4><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584649376471658464937542.png\" alt=\"\"/></p><ul class=\" list-paddingleft-2\"><li><p>以<strong>coupon</strong> 模块为例，</p><p>修改代码生成器模块 &nbsp;<code>renren-generator</code></p><p>application.yml：只展示要修改的行</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584551474431658455146608.png\" alt=\"\"/></p><p>generator.properties:</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584552274491658455226966.png\" alt=\"\"/></p><p>启动代码生成器，选择全部的表（让所有的表放在一页，全选）生成，将生成的<code>main</code> 文件夹覆盖到表对应模块中，因为<code>gulimall_sms</code>数据库对应的是<code>coupon</code>模块，所以覆盖在coupon的main。</p><p>删掉 &nbsp;main→resources → src 文件夹</p><p>覆盖完后，会有错误，编辑覆盖的模块coupon模块 的pom.xml 文件</p><p>加入公共依赖</p></li></ul><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.zhuangjie.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&nbsp;&nbsp;&lt;/dependency&gt;</pre><p>继续编辑该模块的主启动类 <code>CouponApplication.class</code></p><p>加入 @MapperScan() 注解。</p><pre>@MapperScan(&quot;com.zhuangjie.gulimall.coupon.dao&quot;)\r\n@SpringBootApplication\r\npublic&nbsp;class&nbsp;CouponApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(CouponApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p>向模块的resources中加入一个配置文件<code>application.yml</code></p><pre>spring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_sms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><p>在另一个配置文件 <code>application.properties</code> 文件修改端口：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584575652291658457565047.png\" alt=\"\"/></p><p>然后启动测试：<a href=\"http://localhost:7000/coupon/coupon/list\">http://localhost:7000/coupon/coupon/list</a></p><p>其它模块与coupon一样的流程不一致的地方请参与上面的表格，分别操作其它gulimall-XXX模块</p><h3>[<em>5</em>] SpringCloud Alibaba</h3><p><a href=\"https://github.com/alibaba/spring-cloud-alibaba/blob/2.2.x/README-zh.md\">https://github.com/alibaba/spring-cloud-alibaba/blob/2.2.x/README-zh.md</a></p><h4>[<em>5.1</em>] 搭建nacos服务</h4><p>在linux上安装：</p><pre>wget&nbsp;https://github.com/alibaba/nacos/releases/download/2.1.0/nacos-server-2.1.0.tar.gz\r\ntar&nbsp;-xvf&nbsp;nacos-server-2.1.0.tar.gz\r\nmv&nbsp;nacos&nbsp;/usr/local/\r\ncd&nbsp;/usr/local/nacos/bin\r\n./startup.sh&nbsp;-m&nbsp;standalone&nbsp;#单体启动\r\ntailf&nbsp;&nbsp;/usr/local/nacos/logs/start.out</pre><p>启动成功后，访问：<a href=\"http://192.168.87.101:8848/nacos\">http://192.168.87.101:8848/nacos</a></p><p>账号/密码：nacos/nacos</p><h4>[<em>5.2</em>] 注册中心 &amp;&amp; Feign</h4><p>在 <code>gulimall-common</code> 模块的pom.xml中加入依赖：</p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;\r\n&lt;/dependency&gt;</pre><p>在<code>gulimall-coupon</code> 与<code>gulimall-member</code> 模块的application.yml中加入这两行配置：</p><pre>#注册中心服务器地址\r\nspring.cloud.nacos.discovery.server-addr=192.168.87.101:8848&nbsp;&nbsp;\r\n\r\n#该服务的名称\r\nspring.application.name=gulimall-coupon</pre><p>开启服务发现 <code>@EnableDiscoveryClient </code></p><pre>@EnableDiscoveryClient&nbsp;//开启服务发现&nbsp;-&nbsp;nacos\r\n@MapperScan(&quot;com.zhuangjie.gulimall.coupon.dao&quot;)\r\n@SpringBootApplication\r\npublic&nbsp;class&nbsp;CouponApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(CouponApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p>访问 <a href=\"http://192.168.87.101:8848/nacos\">http://192.168.87.101:8848/nacos</a> 找到 <code>服务管理 → 服务列表</code> 中就可以找到注册进来的服务</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584841387211658484138629.png\" alt=\"\"/></p><p>Feign服务调用</p><p>下面演示的member（会员）模块调用 coupon（优惠卷）</p><p>在调用模块member中，加入以下依赖：(我们之前在member的pom.xml已经引用过了（微服务）)</p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n&lt;/dependency&gt;</pre><p>在被调用 coupon模块→ CouponController.java 中加入一从此方法：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;//提供其它模块使用feign调用\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/member/list&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;membercoupons(){&nbsp;&nbsp;&nbsp;&nbsp;//全系统的所有返回都返回R\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;应该去数据库查用户对于的优惠券，但这个我们简化了，不去数据库查了，构造了一个优惠券给他返回\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CouponEntity&nbsp;couponEntity&nbsp;=&nbsp;new&nbsp;CouponEntity();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;couponEntity.setCouponName(&quot;满100-10&quot;);//优惠券的名字\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;coupons&quot;,Arrays.asList(couponEntity));\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>在调用方 创建一个<code>feign</code> 目录（与controller同级）,里面创建一个类：</p><p>CouponFeignService.java: 作用如下注解</p><pre>package&nbsp;com.zhuangjie.gulimall.member.feign;\r\n\r\nimport&nbsp;com.zhuangjie.common.utils.R;\r\nimport&nbsp;org.springframework.cloud.openfeign.FeignClient;\r\nimport&nbsp;org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n@FeignClient(&quot;gulimall-coupon&quot;)&nbsp;//告诉Feign调用注册中心的哪个服务\r\npublic&nbsp;interface&nbsp;CouponFeignService&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//告诉Feign调用该服务的哪个API\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/coupon/coupon/member/list&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;membercoupons();\r\n}</pre><p>在调用方的启动类上加注解<code>@EnableFeignClients()</code></p><pre>@EnableFeignClients(basePackages=&quot;com.zhuangjie.gulimall.member.feign&quot;)//扫描接口方法注解\r\n@EnableDiscoveryClient&nbsp;//开启服务发现&nbsp;-&nbsp;nacos\r\n@MapperScan(&quot;com.zhuangjie.gulimall.member.dao&quot;)\r\n@SpringBootApplication\r\npublic&nbsp;class&nbsp;MemberApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(MemberApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p>然后我们在调用 方member的控制层写一个测试请求：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Autowired\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;CouponFeignService&nbsp;couponFeignService;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/getCoupons&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;list(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;R&nbsp;membercoupons&nbsp;=&nbsp;couponFeignService.membercoupons();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;coupons&nbsp;=&nbsp;membercoupons.get(&quot;coupons&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;coupons&quot;,coupons).put(&quot;message&quot;,&quot;远程调用成功~&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>测试：分别启动<code>coupon</code> 与<code>member</code>两个模块</p><p>然后访问调用方控制层：<a href=\"http://localhost:8000/member/member/getCoupons\">http://localhost:8000/member/member/getCoupons</a></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584853900601658485389723.png\" alt=\"\"/></p><h4>[<em>5.3</em>] 配置中心</h4><p><code>gulimall-common</code>模块中加上依赖</p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;\r\n&nbsp;&lt;/dependency&gt;</pre><p>在<code>coupons</code>项目中创建/src/main/resources/<code>bootstrap.properties</code> ，这个文件是springboot里规定的，他优先级别application.properties高：</p><pre>#&nbsp;改名字，对应nacos里的配置文件名\r\nspring.application.name=gulimall-coupon\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848</pre><p>默认会读取nacos配置中心中的<code>应用名.properties</code> 作为模块的配置：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584951362261658495135556.png\" alt=\"\"/></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16584952312231658495230261.png\" alt=\"\"/></p><p>我们在<code>gulimall-coupon</code> 模块中，就可以使用<code>@Value(&quot;${}&quot;)</code>读取到了</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${user.name}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${user.age}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Integer&nbsp;age;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//配置中心测试\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/test&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;test(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;name&quot;,name).put(&quot;age&quot;,age);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>如果想动态地获取nacos配置中心的改变，就可以在类上加<code>@RefreshScope</code></p><pre>@RefreshScope&nbsp;//加入后就可以动态地获取nacos中的配置了，即nacos中的配置修改了，程序也快速地拿到修改后的值\r\n@RestController\r\n@RequestMapping(&quot;coupon/coupon&quot;)\r\npublic&nbsp;class&nbsp;CouponController&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${user.name}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${user.age}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Integer&nbsp;age;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//配置中心测试\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/test&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;test(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;name&quot;,name).put(&quot;age&quot;,age);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><h4>[<em>5.4</em>] 配置中心进阶</h4><p>在nacos浏览器中还可以配置：</p><ul class=\" list-paddingleft-2\"><li><p>命名空间：用作配置隔离。（一般每个微服务一个命名空间，或者 将开发环境如，ev,test,prod 作为命名空间）</p></li><li><p>配置集：一组相关或不相关配置项的集合，即一个配置文件就是一个配置集。</p></li><li><p>配置集ID：类似于配置文件名，即Data ID</p></li><li><p>配置分组：默认所有的配置集都属于<code>DEFAULT_GROUP</code>。双十一，618的优惠策略改分组即可</p></li></ul><p>现<code>coupon</code> 模块的配置如下，我们要将这些配置放在nacos配置中心上</p><pre>server:\r\n&nbsp;&nbsp;port:&nbsp;7000\r\nspring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_sms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848&nbsp;&nbsp;#将该服务注册到nacos中\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;gulimall-coupon&nbsp;&nbsp;#应用名称，在nacos注册中心服务组名\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><p>现在开始操作</p><p>bootstrap.properties：</p><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-coupon\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev\r\n\r\n#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev分组中获取mybatis.yml配置\r\nspring.cloud.nacos.config.extension-configs[0].data-id=mybatis.yml\r\nspring.cloud.nacos.config.extension-configs[0].group=dev</pre><p>创建一个<code>gulimall-coupon</code> 分组：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585430055751658543005211.png\" alt=\"\"/></p><p>分别创建两个配置文件：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585430687351658543068532.png\" alt=\"\"/></p><p>gulimall-coupon.properties:</p><pre>#&nbsp;注册中心服务器地址\r\nspring.cloud.nacos.discovery.server-addr=192.168.87.101:8848</pre><p>mybatis.yml:</p><pre>spring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_sms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><p>启动项目后，从输出的内容也可以看出加载了nacos config哪些配置</p><pre>2022-07-23&nbsp;10:31:04.085&nbsp;&nbsp;INFO&nbsp;9048&nbsp;---&nbsp;[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main]&nbsp;b.c.PropertySourceBootstrapConfiguration&nbsp;:&nbsp;Located&nbsp;property&nbsp;source:&nbsp;[BootstrapPropertySource&nbsp;{name=&#39;bootstrapProperties-gulimall-coupon.properties,dev&#39;},&nbsp;BootstrapPropertySource&nbsp;{name=&#39;bootstrapProperties-gulimall-coupon,dev&#39;},&nbsp;BootstrapPropertySource&nbsp;{name=&#39;bootstrapProperties-mybatis.yml,dev&#39;}]</pre><h3>[<em>6</em>] gateway网关</h3><p><strong>1）创建“gulimall-gateway”</strong></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585624496261658562448864.png\" alt=\"\"/></p><p><strong>2）确保有“gulimall-common”依赖和“spring-cloud-starter-gateway”依赖</strong></p><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.bigdata.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n&lt;/dependency&gt;</pre><p><strong>3）在主启动类上加上“@EnableDiscoveryClient”注解</strong></p><p>这是服务发现 注册中心的注解</p><p><strong>4）在项目的application.properties 中加入</strong></p><pre>server.port=80\r\n#&nbsp;应用名称\r\nspring.application.name=gulimall-gateway</pre><p><strong>5）在Nacos中创建“gulimall-gateway”命名空间，同时在该命名空间中创建“gulimall-gateway.properties”</strong></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585626884511658562688141.png\" alt=\"\"/></p><p><strong>gulimall-gateway.properties</strong>：</p><pre>#&nbsp;注册中心服务器地址\r\nspring.cloud.nacos.discovery.server-addr=192.168.87.101:8848</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585636186511658563618312.png\" alt=\"\"/></p><p><strong>6）创建“bootstrap.properties”文件，添加如下配置，指明配置中心地址和所属命名空间</strong></p><p>（默认是会从nacos配置中心命名空间gulimall-gateway中DEFAULT_GROUP组中获取gulimall-gateway.properties配置）</p><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-gateway\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\n#spring.cloud.nacos.config.group=dev</pre><p><strong>7）启动“gulimall-gateway”</strong></p><p>启动报错：</p><pre>Description:\r\n\r\nFailed&nbsp;to&nbsp;configure&nbsp;a&nbsp;DataSource:&nbsp;&#39;url&#39;&nbsp;attribute&nbsp;is&nbsp;not&nbsp;specified&nbsp;and&nbsp;no&nbsp;embedded&nbsp;datasource&nbsp;could&nbsp;be&nbsp;configured.\r\n\r\nReason:&nbsp;Failed&nbsp;to&nbsp;determine&nbsp;a&nbsp;suitable&nbsp;driver&nbsp;class</pre><p>解决方法：在“com.bigdata.gulimall.gulimallgateway.GulimallGatewayApplication”中排除和数据源相关的配置（也可以在引入的gulimall-common中排除掉mybatis-plus-boot-starter依赖）</p><pre>@SpringBootApplication(exclude&nbsp;=&nbsp;{DataSourceAutoConfiguration.class})</pre><p>重新启动</p><p>访问：<a href=\"http://192.168.87.101:8848/nacos\">http://192.168.87.101:8848/nacos</a>，查看到该服务已经注册到了Nacos中</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585630254911658563025140.png\" alt=\"\"/></p><h4>[<em>6.1</em>] 案例</h4><p>现在想要实现针对于“<a href=\"http://localhost/hello?url=baidu%E2%80%9D%EF%BC%8C%E8%BD%AC%E5%8F%91%E5%88%B0%E2%80%9Chttps://www.baidu.com%E2%80%9D%EF%BC%8C%E9%92%88%E5%AF%B9%E4%BA%8E%E2%80%9Chttp://localhost/hello?url=qq%E2%80%9D%E7%9A%84%E8%AF%B7%E6%B1%82%EF%BC%8C%E8%BD%AC%E5%8F%91%E5%88%B0%E2%80%9Chttps://www.qq.com/%E2%80%9D\">http://localhost/hello?url=baidu”，转发到“https://www.baidu.com”，针对于“http://localhost/hello?url=qq”的请求，转发到“https://www.qq.com/”</a></p><p><strong>1）在nacos的gulimall-gateway命名空间添加“route.yml”配置集</strong></p><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;baidu_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;https://www.baidu.com\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Query=url,&nbsp;baidu\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;qq_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;https://www.qq.com/\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Query=url,&nbsp;qq</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16585638261571658563825859.png\" alt=\"\"/></p><p><strong>2）在项目的bootstrap.properties上<strong><strong>追加</strong></strong>：</strong></p><pre>#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev分组中获取mybatis.yml配置\r\nspring.cloud.nacos.config.extension-configs[0].data-id=route.yml</pre><p><strong>3）启动“gulimall-gateway”</strong></p><p><strong>4）测试</strong></p><p>访问：<a href=\"http://localhost/hello?url=baidu\">http://localhost/hello?url=baidu</a></p><p>访问：<a href=\"http://localhost/hello?url=qq\">http://localhost/hello?url=qq</a></p><h3>[<em>7</em>] 商品分类</h3><h4>[<em>7.1</em>] 创建API：递归树形结构数据获取</h4><ol class=\" list-paddingleft-2\"><li><p>打开<code>gulimall-pms</code>数据库，执行SQL，来源：</p><p><a href=\"https://github.com/18476305640/gulimall/blob/dev/%E6%96%87%E4%BB%B6%E4%BB%93%E5%82%A8/sql%E6%96%87%E4%BB%B6/data/pms_catelog.sql\">https://github.com/18476305640/gulimall/blob/dev/文件仓储/sql文件/data/pms_catelog.sql</a></p></li><li><p>我们配置nacos注册中心与nacos config的配置，因为我们在<code>gulimall-common</code>模块写了nacos config的配置，所以需要配置，否则启动时报错。</p><p>打开<code>gulimall-product</code> 模块的<code>application.properties</code> 配置文件：</p><p>追加：</p></li></ol><pre>#注册中心服务器地址\r\nspring.cloud.nacos.discovery.server-addr=192.168.87.101:8848</pre><pre>在`gulimall-product`&nbsp;主启动类中，加入注解：</pre><pre>@EnableDiscoveryClient&nbsp;//开启服务发现&nbsp;-&nbsp;nacos</pre><pre>创建`bootstrap.properties`</pre><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-product\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev</pre><pre>开始编写API（在gulimall-product模块）：\r\n\r\n1、controller/CategoryController.java</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;查出所有分类以及子分类，以树形结构组装起来\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/list/tree&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;list(@RequestParam&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;params){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;CategoryEntity&gt;&nbsp;entities&nbsp;=&nbsp;&nbsp;categoryService.listWithTree();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;data&quot;,&nbsp;entities);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>&gt;&nbsp;生成service层接口的抽象方法和service层impl的方法\r\n\r\n2、service/impl/CategoryServiceImpl.java</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;//菜单树\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;List&lt;CategoryEntity&gt;&nbsp;listWithTree()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;==&gt;&quot;+baseMapper);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//1、查出所有分类\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;CategoryEntity&gt;&nbsp;entities&nbsp;=&nbsp;baseMapper.selectList(null);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//2、组装父子的树形结构\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;CategoryEntity&gt;&nbsp;levelMenus&nbsp;&nbsp;=&nbsp;entities.stream().filter(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;categoryEntity&nbsp;-&gt;&nbsp;categoryEntity.getParentCid()&nbsp;==&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).map(item&nbsp;-&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.setChildren(getChildrens(item,&nbsp;entities));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;item;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).sorted(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(item1,&nbsp;item2)&nbsp;-&gt;&nbsp;&nbsp;Optional.ofNullable(item1.getSort()).orElse(0)&nbsp;-&nbsp;Optional.ofNullable(item2.getSort()).orElse(0)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).collect(Collectors.toList());\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;levelMenus;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//递归查找所有菜单的子菜单\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;List&lt;CategoryEntity&gt;&nbsp;getChildrens(CategoryEntity&nbsp;root,&nbsp;List&lt;CategoryEntity&gt;&nbsp;all)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;CategoryEntity&gt;&nbsp;collect&nbsp;=&nbsp;all.stream().filter(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item&nbsp;-&gt;&nbsp;item.getParentCid().longValue()&nbsp;==&nbsp;root.getCatId().longValue()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).map(item&nbsp;-&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.setChildren(getChildrens(item,&nbsp;all));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;item;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).sorted(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(item1,&nbsp;item2)&nbsp;-&gt;&nbsp;&nbsp;Optional.ofNullable(item1.getSort()).orElse(0)&nbsp;-&nbsp;Optional.ofNullable(item2.getSort()).orElse(0)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).collect(Collectors.toList());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;collect=&gt;&quot;+collect);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;collect;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>API接口编写完毕，测试：[http://localhost:10000/product/category/list/tree](http://localhost:10000/product/category/list/tree)\r\n\r\n（推荐json查看插件：SON&nbsp;Beautifier&nbsp;&amp;&nbsp;Editor）\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16598754029391659875402702.png)</pre><h4>[<em>7.2</em>] 将renren-fast模块接入gateway网关中</h4><ol class=\" list-paddingleft-2\"><li><p>想要接入gateway网关中，首先renren-fast得注册到nacos注册中心中，进行服务发现。</p><p><a href=\"https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E\">版本兼容&gt;&gt;</a></p><p>根据<code>gulimall-common</code> 中的<code>spring-cloud-alibaba-dependencies</code> 可知 <strong>Spring Cloud Alibaba</strong>的版本，从而可以知道要使用的springcloud，springboot的版本，我们就可以在修改模块的springcloud与springboot的版本</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599254130291659925412514.png\" alt=\"\"/></p><p>然后再修改<code>renren-fast</code> 首先renren-fast使用的springboot版本（看README.md文件的技术选型）不能超过我们<code>gulimall-common</code> 对应的springboot版本（2.2.5.RELEASE），如果renren-fast的版本高于（如果高很多）那就要考虑选择低一点版本的<code>renren-fast</code>了，如果最后选择的renren-fast版本的springboot是<code>2.1</code> 那我们可以修改为<code>gulimall-common</code> 对应的springboot版本（2.2.5.RELEASE）。</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599261925201659926192341.png\" alt=\"\"/></p><p>接着加入<code>gulimall-common</code></p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.zhuangjie.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;</pre><pre>在`renren-fast`主启动类上加入注解：</pre><pre>@EnableDiscoveryClient</pre><pre>配置nacos&nbsp;注册中心,&nbsp;在`renren-fast`\r\n\r\napplication.yml</pre><pre>spring:&nbsp;\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;renren-fast\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848</pre><pre>配置nacos&nbsp;config,&nbsp;加入配置文件`bootstrap.properties`</pre><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=renren-fast\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev</pre><pre>在nacos中创建一个命名空间`namespace`&nbsp;&nbsp;为&nbsp;renren-fast\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599266517531659926651432.png)\r\n\r\n然后启动&nbsp;`renren-fast`&nbsp;,&nbsp;启动成功后（如果失败，删掉.idea目录，然后关闭项目，再打开，重新加载pom.xml,再[配置模块一下JDK](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599267732991659926772820.png)），查看nacos&nbsp;web中是否有`renren-fast`这个服务\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599268442921659926843757.png)</pre><ol start=\"2\" class=\" list-paddingleft-2\"><li><p>在gateway网关中配置renren-fast</p><p>修改后台管理系统前端 （renren-fast-vue）的 <code>static/config/index.js</code>里的url</p></li></ol><pre>&nbsp;window.SITE_CONFIG[&#39;baseUrl&#39;]&nbsp;=&nbsp;&#39;http://localhost/api&#39;;\r\n//&nbsp;意思是说本vue项目中要请求的资源url都发给88/api，那么我们就让网关端口为88，然后匹配到/api请求即可，\r\n//&nbsp;网关可以通过过滤器处理url后指定给某个微服务\r\n//&nbsp;renren-fast服务已经注册到了nacos中</pre><pre>然后利用网关，将&nbsp;&nbsp;http://localhost/api/**&nbsp;转为&nbsp;http://localhost/renren-fast/**\r\n\r\n配置网关</pre><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;admin_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://renren-fast\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\\{segment}</pre><pre>访问&nbsp;&nbsp;[http://localhost:8001/#/login](http://localhost:8001/#/login)\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599305864151659930586176.png)\r\n\r\n出现了CORS跨域请求问题。[关于跨域&gt;&gt;](https://www.cnblogs.com/zhuangjie/p/16562919.html)</pre><ol start=\"3\" class=\" list-paddingleft-2\"><li><p>解决跨域请求</p><p>创建与主启动类同级的<code>config/GulimallCorsConfiguration.java</code></p></li></ol><pre>package&nbsp;com.zhuangjie.gulimall.gateway.config;\r\n\r\nimport&nbsp;org.springframework.context.annotation.Bean;\r\nimport&nbsp;org.springframework.context.annotation.Configuration;\r\nimport&nbsp;org.springframework.web.cors.CorsConfiguration;\r\nimport&nbsp;org.springframework.web.cors.reactive.CorsWebFilter;\r\nimport&nbsp;org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;\r\n\r\n@Configuration\r\npublic&nbsp;class&nbsp;GulimallCorsConfiguration&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Bean\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;CorsWebFilter&nbsp;corsWebFilter()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;基于url跨域，选择reactive包下的\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UrlBasedCorsConfigurationSource&nbsp;source=new&nbsp;UrlBasedCorsConfigurationSource();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;跨域配置信息\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CorsConfiguration&nbsp;corsConfiguration&nbsp;=&nbsp;new&nbsp;CorsConfiguration();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;允许跨域的头\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corsConfiguration.addAllowedHeader(&quot;*&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;允许跨域的请求方式\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corsConfiguration.addAllowedMethod(&quot;*&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;允许跨域的请求来源\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corsConfiguration.addAllowedOrigin(&quot;*&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;是否允许携带cookie跨域\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corsConfiguration.setAllowCredentials(true);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;任意url都要进行跨域配置\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source.registerCorsConfiguration(&quot;/**&quot;,corsConfiguration);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;CorsWebFilter(source);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><pre>发现状态码是200，经翻译：\r\n\r\n已拦截跨源请求：同源策略禁止读取位于&nbsp;[http://localhost:88/api/sys/login](http://localhost:88/api/sys/login)&nbsp;的远程资源。\r\n\r\n（原因：不允许有多个&nbsp;‘Access-Control-Allow-Origin’&nbsp;CORS&nbsp;头）\r\n\r\n多个头也是不可以的。\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599309808991659930980461.png)\r\n\r\n那为什么会有多个相同的头呢，那是因为`renren-fast`&nbsp;&nbsp;&nbsp;这个模块已经解决过跨域了，接入gateway网关后，解决跨域应统一放在gateway模块中。所以应注释掉`renren-fast`中的解决跨域代码：\r\n\r\nrenren-fast模块中`src/main/java/io/renren/config/CorsConfig.java`</pre><pre>package&nbsp;io.renren.config;\r\n\r\nimport&nbsp;org.springframework.context.annotation.Configuration;\r\nimport&nbsp;org.springframework.web.servlet.config.annotation.CorsRegistry;\r\nimport&nbsp;org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\n@Configuration\r\npublic&nbsp;class&nbsp;CorsConfig&nbsp;implements&nbsp;WebMvcConfigurer&nbsp;{\r\n\r\n//&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n//&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;addCorsMappings(CorsRegistry&nbsp;registry)&nbsp;{\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;registry.addMapping(&quot;/**&quot;)\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.allowedOrigins(&quot;*&quot;)\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.allowCredentials(true)\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.allowedMethods(&quot;GET&quot;,&nbsp;&quot;POST&quot;,&nbsp;&quot;PUT&quot;,&nbsp;&quot;DELETE&quot;,&nbsp;&quot;OPTIONS&quot;)\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.maxAge(3600);\r\n//&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><pre>再重新启动`renren-fast`&nbsp;,然后访问前端`renren-fast-vue`&nbsp;,登录：\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599322774471659932277075.png)</pre><h4>[<em>7.3</em>] 展示三级分类</h4><p>在前面，我们已经创建好了树形结构数据的分类数据API，启动<code>gulimall-product</code> ，访问<a href=\"http://localhost:10000/product/category/list/tree\">http://localhost:10000/product/category/list/tree</a> , 就可以读取到。但我们要放在页面中显示。</p><p><strong>前端准备工作：</strong></p><p>创建一个目录为<code>商品系统</code></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599420264951659942026071.png\" alt=\"\"/></p><p>新增一个菜单名为<code>分类维护</code> 放在&quot;商品系统&quot; 下</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599421743011659942173467.png\" alt=\"\"/></p><p>刷新页面，得到：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599423672931659942357685.png\" alt=\"\"/></p><p>创建菜单<code>分类维护</code>对应的.vue , 固定创建：<code>src\\views\\modules\\product\\category.vue</code> 文件：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;分类维护-内容显示\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><p>保存，然后再刷新页面：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599427982221659942797834.png\" alt=\"\"/></p><p>我们需要请求后端，获取数据来显示，修改<code>src\\views\\modules\\product\\category.vue</code> 文件：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;分类维护-内容显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&gt;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//看其它模块知道的怎么发送请求\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;}).then((data)&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><blockquote><p><code>&lt;el-tree&gt;</code>标签来自：<a href=\"https://element.eleme.cn/#/zh-CN/component/tree\">https://element.eleme.cn/#/zh-CN/component/tree</a></p></blockquote><p>重新刷新，查看分类维护菜单，控制台，请求出错：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599430013941659943000971.png\" alt=\"\"/></p><p>这是因为我们gateway网关的问题，当前我们路由配置如下：</p><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;admin_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://renren-fast\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\\{segment}</pre><p>请求会跑到<code>renren-fast</code> 模块中，那肯定是不对的，我们需要新增一个路由规则：</p><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;product_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://gulimall-product\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/product/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/$\\{segment}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;admin_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://renren-fast\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\\{segment}</pre><blockquote><p>准备要把<code>/api/product/**</code> 放在<code>/api/**</code> 前面，这是非常重要的，否则就路由到了<code>/api/**</code> 中了。</p></blockquote><p>确保，<code>gulimall-product</code> 模块已经配置注册中心中 和配置nacos配置中心。</p><p>1、</p><ul class=\" list-paddingleft-2\"><li><p>application.yml：在这里配置了注册中心</p></li></ul><pre>server:\r\n&nbsp;&nbsp;port:&nbsp;10000\r\nspring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333\r\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果下面不加&nbsp;?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&nbsp;写入数据库中中文乱码\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_pms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;driver-class-name:&nbsp;com.mysql.cj.jdbc.Driver\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#nacos&nbsp;注册中心\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;gulimall-product\r\n#&nbsp;MapperScan\r\n#&nbsp;sql映射文件位置\r\nmybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto</pre><p>2、</p><ul class=\" list-paddingleft-2\"><li><p>bootstrap.properties：在这里配置了配置中心</p></li></ul><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-product\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev</pre><p>3、在主启动类添加注解：（开启服务发现）</p><pre>@EnableDiscoveryClient&nbsp;//开启服务发现&nbsp;-&nbsp;nacos</pre><p>再次访问前面的<code>分类维护</code>菜单：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599443310551659944330650.png\" alt=\"\"/></p><p>修改前端 <code>src\\views\\modules\\product\\category.vue</code> 文件：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&gt;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;}).then(({data})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><p>刷新页面，就能显示分类数据了：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16599445932931659944592413.png\" alt=\"\"/></p><h4>[<em>7.4</em>] 三级分类的删除</h4><ol class=\" list-paddingleft-2\"><li><p>创建API接口</p><p>gulimall-product 模块的<code> CategoryController.java</code>中</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;删除\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/delete&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;delete(@RequestBody&nbsp;Long[]&nbsp;ids){\r\n&nbsp;&nbsp;&nbsp;&nbsp;categoryService.removeMenuByIds(Arrays.asList(ids));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>随后生成&nbsp;&nbsp;&nbsp;service接口方法removeMenuByIds&nbsp;，和创建service&nbsp;impl的实现方法。\r\n\r\n`CategoryServiceImpl.java`</pre><pre>&nbsp;@Override\r\npublic&nbsp;void&nbsp;removeMenuByIds(List&lt;Long&gt;&nbsp;ids)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;baseMapper.deleteBatchIds(ids);\r\n}</pre><pre>设置逻辑删除-mybatis-plus的逻辑删除：[官网说明&gt;&gt;](https://baomidou.com/pages/6b03c5)</pre><pre>mybatis-plus:\r\n&nbsp;&nbsp;mapper-locations:&nbsp;classpath:/mapper/**/*.xml\r\n&nbsp;&nbsp;global-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;db-config:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id-type:&nbsp;auto\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logic-delete-value:&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logic-not-delete-value:&nbsp;0</pre><pre>修改product.entity.CategoryEntity实体类，添加上@TableLogic，表明使用逻辑删除：</pre><pre>/**\r\n&nbsp;&nbsp;&nbsp;*&nbsp;是否显示[0-不显示，1显示]\r\n&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;@TableLogic(value&nbsp;=&nbsp;&quot;1&quot;,delval&nbsp;=&nbsp;&quot;0&quot;)\r\n&nbsp;&nbsp;private&nbsp;Integer&nbsp;showStatus;</pre><pre>开启debug模式：</pre><pre>logging:\r\n&nbsp;&nbsp;level:\r\n&nbsp;&nbsp;&nbsp;&nbsp;com.zhuangjie.gulimall:&nbsp;debug</pre><pre>然后请求&nbsp;删除接口：</pre><pre>###\r\nPOST&nbsp;http://localhost/api/product/category/delete&nbsp;HTTP/1.1\r\nContent-Type:&nbsp;application/json\r\n\r\n[1000]</pre><pre>查看控制台输出：</pre><pre>2022-08-09&nbsp;09:38:04.997&nbsp;DEBUG&nbsp;1780&nbsp;---&nbsp;[io-10000-exec-6]&nbsp;c.z.g.p.dao.CategoryDao.deleteBatchIds&nbsp;&nbsp;&nbsp;:&nbsp;==&gt;&nbsp;&nbsp;Preparing:&nbsp;UPDATE&nbsp;pms_category&nbsp;SET&nbsp;show_status=0&nbsp;WHERE&nbsp;cat_id&nbsp;IN&nbsp;(&nbsp;?&nbsp;)&nbsp;AND&nbsp;show_status=1&nbsp;\r\n2022-08-09&nbsp;09:38:05.018&nbsp;DEBUG&nbsp;1780&nbsp;---&nbsp;[io-10000-exec-6]&nbsp;c.z.g.p.dao.CategoryDao.deleteBatchIds&nbsp;&nbsp;&nbsp;:&nbsp;==&gt;&nbsp;Parameters:&nbsp;183(Long)\r\n2022-08-09&nbsp;09:38:05.025&nbsp;DEBUG&nbsp;1780&nbsp;---&nbsp;[io-10000-exec-6]&nbsp;c.z.g.p.dao.CategoryDao.deleteBatchIds&nbsp;&nbsp;&nbsp;:&nbsp;&lt;==&nbsp;&nbsp;&nbsp;&nbsp;Updates:&nbsp;1</pre><pre>发现删除操作，其实是update更新操作，且在数据库中，刚要删除的项的逻辑删除字段`showStatus`&nbsp;已修改为0（表示删除）</pre><ol start=\"2\" class=\" list-paddingleft-2\"><li><p>前台 <code>renren-fast-vue</code></p><p><code>src\\views\\modules\\product\\category.vue</code></p></li></ol><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-key=&quot;catId&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&nbsp;&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append()&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&quot;提示&quot;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&quot;确定&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&quot;取消&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&quot;warning&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><pre>1、是如何解决点击节点，自动展开的问题的？\r\n\r\n解：在&lt;el-tree&gt;&nbsp;标签中加入&nbsp;`:expand-on-click-node=&quot;false&quot;`\r\n\r\n2、如何让每个节点有一个多选框的？\r\n\r\n解：在&lt;el-tree&gt;&nbsp;标签中加入&nbsp;`show-checkbox`\r\n\r\n3、如何让节点有添加与删除的按钮\r\n\r\n解：在&lt;el-tree&gt;&nbsp;标签内填充插槽：</pre><pre>&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&lt;/span&gt;</pre><pre>4、是如何实现第1、2层显示添加，无子节点的显示删除？\r\n\r\n解：在Append的&lt;el-button&gt;内加入`v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&nbsp;&quot;`&nbsp;在Delete的&lt;el-button&gt;内加入`v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;`\r\n\r\n5、是如何实现删除后刷新，还是显示被删除的父节点？\r\n\r\n解：给&lt;el-tree&gt;标签添加属性`:default-expanded-keys=&quot;expandedKey&quot;&nbsp;`&nbsp;其中数据`expandedKey`在删除成功后更新为删除节点的父节点，删除后会默认展示该节点。</pre><pre>this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]</pre><h4>[<em>7.5</em>] 三级分类修改</h4><ol class=\" list-paddingleft-2\"><li><p>前台</p><p><code>src\\views\\modules\\product\\category.vue</code> ：</p></li></ol><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;&nbsp;node-key=&quot;catId&quot;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-dialog&nbsp;title=&quot;添加&quot;&nbsp;:visible.sync=&quot;dialogVisible&quot;&nbsp;width=&quot;30%&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;ref=&quot;form&quot;&nbsp;:model=&quot;category&quot;&nbsp;@submit.native.prevent=&quot;addCategory&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;dialogVisible&nbsp;=&nbsp;false&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;addCategory&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//添加弹框,默认不显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogVisible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&quot;&quot;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//绑定好添加的category的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.parentCid&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.catLevel&nbsp;=&nbsp;data.catLevel&nbsp;+&nbsp;1\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;addCategory()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/save&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&quot;提示&quot;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&quot;确定&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&quot;取消&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&quot;warning&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><pre>1、如何实现点击`Append`&nbsp;弹出输入框，输入分类名后，整理成一个完整的category对象呢？\r\n\r\n答：添加一个对话框</pre><pre>&lt;el-dialog&nbsp;title=&quot;添加&quot;&nbsp;:visible.sync=&quot;dialogVisible&quot;&nbsp;width=&quot;30%&quot;&gt;\r\n&nbsp;&nbsp;&lt;el-form&nbsp;ref=&quot;form&quot;&nbsp;:model=&quot;category&quot;&nbsp;@submit.native.prevent=&quot;addCategory&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;dialogVisible&nbsp;=&nbsp;false&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;addCategory&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&lt;/span&gt;\r\n&lt;/el-dialog&gt;</pre><pre>在data添加一个数据&nbsp;`category`&nbsp;这是发给后端添加的对象</pre><pre>data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&quot;&quot;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},</pre><pre>`&lt;el-dialog&gt;`&nbsp;标签下的`&lt;el-form&gt;`&nbsp;标签绑定到category对象，完成category.name的绑定。且当我们点`Append`&nbsp;时触发的函数`append(data)`函数中，将category.parentCid与category.catLevel绑定完成与更新默认展开的expandedKey。保证我们在按`确定`的时候category对象数据已整理完成，然后在点确定的`addCategory`函数中完成数据添加的请求操作，在添加完成的回调中，关闭对话弹窗与刷新数据。</pre><ol start=\"2\" class=\" list-paddingleft-2\"><li><p>后端API</p><p>后端已经有了，逆向代码生成的api， <code>/product/category/save</code></p></li></ol><h4>[<em>7.6</em>] 三级分类编辑</h4><ol class=\" list-paddingleft-2\"><li><p>前台代码<code>src\\views\\modules\\product\\category.vue</code> ：</p></li></ol><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;&nbsp;node-key=&quot;catId&quot;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;edit(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-dialog&nbsp;:title=&quot;dialogTitle==&#39;add&#39;?&#39;添加&#39;:&#39;编辑&#39;&nbsp;&quot;&nbsp;:visible.sync=&quot;dialogVisible&quot;&nbsp;width=&quot;30%&quot;&nbsp;:show-close=&quot;false&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;ref=&quot;form&quot;&nbsp;:model=&quot;category&quot;&nbsp;@submit.native.prevent=&quot;addCategory&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类图标&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.icon&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;计量单位&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.productUnit&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;unSumbit()&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;sumbitController()&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//添加弹框,默认不显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogVisible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&quot;&quot;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultCategory:&nbsp;{&nbsp;name:&nbsp;&quot;&quot;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogTitle:&nbsp;&#39;&#39;&nbsp;//add&nbsp;edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;};\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;unSumbit()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;unSumbit&nbsp;&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;this.defaultCategory\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;sumbitController()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dialogTitle&nbsp;==&nbsp;&#39;add&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if(this.dialogTitle&nbsp;==&nbsp;&#39;edit&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.editCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//绑定好添加的category的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.parentCid&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.catLevel&nbsp;=&nbsp;data.catLevel&nbsp;+&nbsp;1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//修改弹框标题\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;add&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;addCategory()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;category:&quot;,&nbsp;this.category);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/save&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;edit(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;edit&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.parentCid]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/category/info/${data.catId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//进行数据回显\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;data.category;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//打开对话弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;editCategory()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;编辑成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&quot;提示&quot;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&quot;确定&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&quot;取消&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&quot;warning&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n&lt;/style&gt;</pre><pre>书写解析：\r\n\r\n1、编辑与添加用的都是同一个对话框，怎么控制？\r\n\r\n&nbsp;&nbsp;我们需要加一个控制`dialogTitle`变量,当是add时添加，edit时编辑，且分别在点击Append与点击Edit时进行维护该数据。我们点击提交时，利用该`dialogTitle`变量分别导向不同的处理函数。\r\n\r\n2、编辑与添加用的都是同一个数据变量`category`，怎么控制不乱？\r\n\r\n&nbsp;&nbsp;我们需要在操作的前后进行数据合理化操作，如在点击Append时，就应该将category改变为一个默认值，为了方便我们可以定义一个`defaultCategory`data数据，直接`this.category&nbsp;=&nbsp;this.defaultCategory`即可。</pre><ol start=\"2\" class=\" list-paddingleft-2\"><li><p>后台代码：</p><p>需要的API：</p></li><ol class=\" list-paddingleft-2\" style=\"list-style-type: lower-alpha;\"><li><p>根据category的catId查询完整数据，已经生成，不用我们编写</p></li><li><p>传入category对象进行修改 &nbsp; ，已经生成，不用我们编写</p></li></ol></ol><h4>[<em>7.7</em>] 三级分类：修改顺序</h4><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660118302236%E5%8A%A8%E7%94%BB.apng\" alt=\"\"/></p><p>前台代码<code>src\\views\\modules\\product\\category.vue</code> ：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;drop-control&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;dropData.isDrop&nbsp;?&nbsp;&quot;可拖拽&quot;&nbsp;:&nbsp;&quot;不可拖拽&quot;&nbsp;}}：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-model=&quot;dropData.isDrop&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;active-color=&quot;#13ce66&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inactive-color=&quot;#909399&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;round&nbsp;v-show=&quot;dropData.isDrop&quot;&nbsp;size=&quot;mini&quot;&nbsp;:disabled=&quot;dropData.action.length&nbsp;==&nbsp;0&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;saveCategorys&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;点击保存&lt;/el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:data=&quot;data&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:props=&quot;defaultProps&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@node-click=&quot;handleNodeClick&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-key=&quot;catId&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:draggable=&quot;dropData.isDrop&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:allow-drop=&quot;isDrag&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@node-drop=&quot;droped&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;text&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=&quot;mini&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;edit(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;text&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=&quot;mini&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-dialog\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:title=&quot;dialogTitle&nbsp;==&nbsp;&#39;add&#39;&nbsp;?&nbsp;&#39;添加&#39;&nbsp;:&nbsp;&#39;编辑&#39;&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:visible.sync=&quot;dialogVisible&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width=&quot;30%&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:show-close=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref=&quot;form&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:model=&quot;category&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@submit.native.prevent=&quot;addCategory&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类图标&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.icon&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;计量单位&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.productUnit&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;unSumbit()&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;sumbitController()&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;添加弹框,默认不显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogVisible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&#39;&#39;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultCategory:&nbsp;{&nbsp;name:&nbsp;&#39;&#39;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogTitle:&nbsp;&#39;&#39;,&nbsp;//&nbsp;add&nbsp;edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dropData:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action:&nbsp;[],&nbsp;&nbsp;&nbsp;//&nbsp;保存拖拽的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isDrop:&nbsp;false&nbsp;//&nbsp;是否可拖拽\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;确保拖拽后的树深度&nbsp;&lt;=3\r\n&nbsp;&nbsp;&nbsp;&nbsp;isDrag&nbsp;(draggingNode,&nbsp;dropNode,&nbsp;type)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;默认展开,第一个值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(draggingNode.parent)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[&nbsp;draggingNode.parent.data.catId&nbsp;]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;Drag=&gt;&quot;,&nbsp;draggingNode,&nbsp;dropNode,&nbsp;type)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;draggingLevel&nbsp;=&nbsp;this.countNodeLevel(draggingNode)&nbsp;-&nbsp;draggingNode.level&nbsp;+&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;dropLevel&nbsp;=&nbsp;dropNode.level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;拖的node深度：&quot;,&nbsp;draggingLevel,&nbsp;dropLevel)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(type&nbsp;===&nbsp;&#39;inner&#39;&nbsp;&amp;&amp;&nbsp;draggingLevel&nbsp;+&nbsp;dropLevel&nbsp;&lt;=&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((type&nbsp;===&nbsp;&#39;prev&#39;&nbsp;||&nbsp;type&nbsp;===&nbsp;&#39;next&#39;)&nbsp;&amp;&amp;&nbsp;draggingLevel&nbsp;+&nbsp;dropNode.parent.level&nbsp;&lt;=&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;拖拽成功放置后的回调\r\n&nbsp;&nbsp;&nbsp;&nbsp;droped&nbsp;(draggingNode,&nbsp;dropNode,&nbsp;type)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;计算出要修改的，把要保存的数据，push到全局数组中\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;let&nbsp;parseChildren&nbsp;=&nbsp;draggingNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(draggingNode,&nbsp;dropNode,&nbsp;type)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;parent&nbsp;=&nbsp;null&nbsp;//&nbsp;父节点\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这里存放本次成功拖拽要修改的category数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;updateCategorys&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取父节点,&nbsp;最上面有个root节点，是数据根的父节点\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(type&nbsp;===&nbsp;&#39;inner&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent&nbsp;=&nbsp;dropNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent&nbsp;=&nbsp;dropNode.parent\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;默认展开,第二个值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey.push(parent.data.catId)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取所有子孙节点要修改的category数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;parent.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【1】如果是拖拽的节点，它的sort,parentCid,level都将改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(parent.childNodes[i].data.catId&nbsp;===&nbsp;draggingNode.data.catId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push({&nbsp;catId:&nbsp;parent.childNodes[i].data.catId,&nbsp;sort:&nbsp;i,&nbsp;parentCid:&nbsp;(parent.data.catId&nbsp;===&nbsp;undefined&nbsp;?&nbsp;0&nbsp;:&nbsp;parent.data.catId),&nbsp;catLevel:&nbsp;parent.level&nbsp;+&nbsp;1&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【2】&nbsp;拖拽节点的子孙节点的level将改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push(...this.collectChildrenUpdateData(parent.childNodes[i]))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【3】如果是拖拽节点的上下节点，sort会改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push({catId:&nbsp;parent.childNodes[i].data.catId,&nbsp;sort:&nbsp;i})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;将本次收集要修改的category数据push到全局容器中\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dropData.action.push(...updateCategorys)\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;droped函数使用，用于收集子节点的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;collectChildrenUpdateData&nbsp;(rootNode)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;收集拖拽节点的子孙节点category子集对象-容器\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;collectNode&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;递归获取\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;rootNode.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collectNode.push({&nbsp;catId:&nbsp;rootNode.childNodes[i].data.catId,&nbsp;catLevel:&nbsp;rootNode.level&nbsp;+&nbsp;1&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collectNode.push(...this.collectChildrenUpdateData(rootNode.childNodes[i]))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;collectNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;保存拖拽的顺序修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;saveCategorys&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update/sort&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.dropData.action,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清空要保存的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dropData.action&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;查看指定节点的深度\r\n&nbsp;&nbsp;&nbsp;&nbsp;countNodeLevel&nbsp;(node)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;maxLevel&nbsp;=&nbsp;node.level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.childNodes.length&nbsp;&gt;&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;node.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.childNodes[i].level&nbsp;&gt;&nbsp;maxLevel)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLevel&nbsp;=&nbsp;node.childNodes[i].level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;childLevel&nbsp;=&nbsp;this.countNodeLevel(node.childNodes[i])\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(childLevel&nbsp;&gt;&nbsp;maxLevel)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLevel&nbsp;=&nbsp;childLevel\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;maxLevel\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick&nbsp;()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;unSumbit&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;unSumbit&nbsp;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;this.defaultCategory\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;sumbitController&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dialogTitle&nbsp;===&nbsp;&#39;add&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(this.dialogTitle&nbsp;===&nbsp;&#39;edit&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.editCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append&nbsp;(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;绑定好添加的category的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.parentCid&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.catLevel&nbsp;=&nbsp;data.catLevel&nbsp;+&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改弹框标题\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;add&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;打开输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;addCategory&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;category:&#39;,&nbsp;this.category)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/save&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;edit&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.parentCid]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/category/info/${data.catId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;进行数据回显\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;data.category\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;打开对话弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;editCategory&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;编辑成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove&nbsp;(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&#39;提示&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n.drop-control&nbsp;{\r\n&nbsp;&nbsp;display:&nbsp;flex;\r\n&nbsp;&nbsp;align-items:&nbsp;center;\r\n&nbsp;&nbsp;height:&nbsp;40px;\r\n}\r\n&lt;/style&gt;</pre><p>1、怎么收集要改变的category对象？</p><p>解：当放置成功后，会触发<code> @node-drop=&quot;droped&quot;</code> ，接收的函数droped会收到三个参数<code>draggingNode, dropNode, type</code> &nbsp; 依次是被拖拽节点对应的 Node、结束拖拽时最后进入的节点（父节点或兄弟节点）、被拖拽节点的放置位置（before、after、inner）。有这三个参数，我们就可以收集到要修改的数据了，</p><p>第一，收集拖拽成功后的兄弟节点，它们的sort可能改变了</p><p>第二，收集拖拽的节点，它的parentCid、sort、level改变了</p><p>第三，收集手提节点的子孙节点，它们的level改变了</p><p>2、收集好一次拖拽后的数据，怎么实现多批次保存？</p><p>将收集好的数据都push到一个新数组中，当点击保存时，再一起发请求修改。</p><p><strong>后台代码：</strong></p><p><code>gulimall-product</code>模块 CategoryController.java</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;批量修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/update/sort&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;updateSort(@RequestBody&nbsp;CategoryEntity[]&nbsp;categorys){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;后端正在批量修改中&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;categoryService.updateBatchById(Arrays.asList(categorys));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><h4>[<em>7.8</em>] 三级分类：批量删除</h4><p>前台代码<code>src\\views\\modules\\product\\category.vue</code> ：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;drop-control&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;dropData.isDrop&nbsp;?&nbsp;&quot;可拖拽&quot;&nbsp;:&nbsp;&quot;不可拖拽&quot;&nbsp;}}：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-model=&quot;dropData.isDrop&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;active-color=&quot;#13ce66&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inactive-color=&quot;#909399&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;round&nbsp;v-show=&quot;dropData.isDrop&quot;&nbsp;size=&quot;mini&quot;&nbsp;:disabled=&quot;dropData.action.length&nbsp;==&nbsp;0&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;saveCategorys&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;点击保存&lt;/el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:#c0c4cc&quot;&gt;&amp;nbsp;&amp;nbsp;|&amp;nbsp;&amp;nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;danger&quot;&nbsp;round&nbsp;&nbsp;size=&quot;mini&quot;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;deleteCategorys&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:disabled=&quot;isChecked&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;批量删除&lt;/el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:data=&quot;data&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:props=&quot;defaultProps&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@node-click=&quot;handleNodeClick&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show-checkbox\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:expand-on-click-node=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-key=&quot;catId&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:draggable=&quot;dropData.isDrop&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:allow-drop=&quot;isDrag&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@node-drop=&quot;droped&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref=&quot;categoryTree&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;custom-tree-node&quot;&nbsp;slot-scope=&quot;{&nbsp;node,&nbsp;data&nbsp;}&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;node.label&nbsp;}}&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;text&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-if=&quot;node.level&nbsp;&lt;=&nbsp;2&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=&quot;mini&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;append(data)&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;mini&quot;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;edit(data)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;text&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-if=&quot;node.data.children.length&nbsp;==&nbsp;0&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=&quot;mini&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@click=&quot;()&nbsp;=&gt;&nbsp;remove(node,&nbsp;data)&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-dialog\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:title=&quot;dialogTitle&nbsp;==&nbsp;&#39;add&#39;&nbsp;?&nbsp;&#39;添加&#39;&nbsp;:&nbsp;&#39;编辑&#39;&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:visible.sync=&quot;dialogVisible&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width=&quot;30%&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:show-close=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref=&quot;form&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:model=&quot;category&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@submit.native.prevent=&quot;addCategory&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类名称&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.name&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;分类图标&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.icon&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;计量单位&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;category.productUnit&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;unSumbit()&quot;&gt;取&nbsp;消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;sumbitController()&quot;&gt;确&nbsp;定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;添加弹框,默认不显示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogVisible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;category:&nbsp;{&nbsp;name:&nbsp;&#39;&#39;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultCategory:&nbsp;{&nbsp;name:&nbsp;&#39;&#39;,&nbsp;parentCid:&nbsp;0,&nbsp;catLevel:&nbsp;0,&nbsp;showStatus:&nbsp;1,&nbsp;sort:&nbsp;0,&nbsp;icon:&nbsp;&#39;&#39;,&nbsp;productUnit:&nbsp;&#39;&#39;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogTitle:&nbsp;&#39;&#39;,&nbsp;//&nbsp;add&nbsp;edit\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dropData:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action:&nbsp;[],&nbsp;&nbsp;&nbsp;//&nbsp;保存拖拽的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isDrop:&nbsp;false&nbsp;//&nbsp;是否可拖拽\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isChecked:&nbsp;true\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;deleteCategorys&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;checkedData&nbsp;=&nbsp;this.$refs.categoryTree.getCheckedNodes()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;catIds&nbsp;=&nbsp;Array.from(checkedData,&nbsp;data&nbsp;=&gt;&nbsp;data.catId)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;catNames&nbsp;=&nbsp;Array.from(checkedData,&nbsp;data&nbsp;=&gt;&nbsp;data.name)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(catIds,&nbsp;catNames)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${catNames}】这些分类?`,&nbsp;&#39;批量删除&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(catIds,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;确保拖拽后的树深度&nbsp;&lt;=3\r\n&nbsp;&nbsp;&nbsp;&nbsp;isDrag&nbsp;(draggingNode,&nbsp;dropNode,&nbsp;type)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;默认展开,第一个值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(draggingNode.parent)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[&nbsp;draggingNode.parent.data.catId&nbsp;]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;Drag=&gt;&quot;,&nbsp;draggingNode,&nbsp;dropNode,&nbsp;type)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;draggingLevel&nbsp;=&nbsp;this.countNodeLevel(draggingNode)&nbsp;-&nbsp;draggingNode.level&nbsp;+&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;dropLevel&nbsp;=&nbsp;dropNode.level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;拖的node深度：&quot;,&nbsp;draggingLevel,&nbsp;dropLevel)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(type&nbsp;===&nbsp;&#39;inner&#39;&nbsp;&amp;&amp;&nbsp;draggingLevel&nbsp;+&nbsp;dropLevel&nbsp;&lt;=&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((type&nbsp;===&nbsp;&#39;prev&#39;&nbsp;||&nbsp;type&nbsp;===&nbsp;&#39;next&#39;)&nbsp;&amp;&amp;&nbsp;draggingLevel&nbsp;+&nbsp;dropNode.parent.level&nbsp;&lt;=&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;拖拽成功放置后的回调\r\n&nbsp;&nbsp;&nbsp;&nbsp;droped&nbsp;(draggingNode,&nbsp;dropNode,&nbsp;type)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;计算出要修改的，把要保存的数据，push到全局数组中\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;let&nbsp;parseChildren&nbsp;=&nbsp;draggingNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(draggingNode,&nbsp;dropNode,&nbsp;type)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;parent&nbsp;=&nbsp;null&nbsp;//&nbsp;父节点\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这里存放本次成功拖拽要修改的category数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;updateCategorys&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取父节点,&nbsp;最上面有个root节点，是数据根的父节点\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(type&nbsp;===&nbsp;&#39;inner&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent&nbsp;=&nbsp;dropNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent&nbsp;=&nbsp;dropNode.parent\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;默认展开,第二个值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey.push(parent.data.catId)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取所有子孙节点要修改的category数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;parent.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【1】如果是拖拽的节点，它的sort,parentCid,level都将改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(parent.childNodes[i].data.catId&nbsp;===&nbsp;draggingNode.data.catId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push({&nbsp;catId:&nbsp;parent.childNodes[i].data.catId,&nbsp;sort:&nbsp;i,&nbsp;parentCid:&nbsp;(parent.data.catId&nbsp;===&nbsp;undefined&nbsp;?&nbsp;0&nbsp;:&nbsp;parent.data.catId),&nbsp;catLevel:&nbsp;parent.level&nbsp;+&nbsp;1&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【2】&nbsp;拖拽节点的子孙节点的level将改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push(...this.collectChildrenUpdateData(parent.childNodes[i]))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;【3】如果是拖拽节点的上下节点，sort会改变，收集成一个一个category子集对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCategorys.push({catId:&nbsp;parent.childNodes[i].data.catId,&nbsp;sort:&nbsp;i})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;将本次收集要修改的category数据push到全局容器中\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dropData.action.push(...updateCategorys)\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;droped函数使用，用于收集子节点的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;collectChildrenUpdateData&nbsp;(rootNode)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;收集拖拽节点的子孙节点category子集对象-容器\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;collectNode&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;递归获取\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;rootNode.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collectNode.push({&nbsp;catId:&nbsp;rootNode.childNodes[i].data.catId,&nbsp;catLevel:&nbsp;rootNode.level&nbsp;+&nbsp;1&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collectNode.push(...this.collectChildrenUpdateData(rootNode.childNodes[i]))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;collectNode\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;保存拖拽的顺序修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;saveCategorys&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update/sort&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.dropData.action,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清空要保存的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dropData.action&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;查看指定节点的深度\r\n&nbsp;&nbsp;&nbsp;&nbsp;countNodeLevel&nbsp;(node)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;maxLevel&nbsp;=&nbsp;node.level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.childNodes.length&nbsp;&gt;&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;node.childNodes.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.childNodes[i].level&nbsp;&gt;&nbsp;maxLevel)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLevel&nbsp;=&nbsp;node.childNodes[i].level\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;childLevel&nbsp;=&nbsp;this.countNodeLevel(node.childNodes[i])\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(childLevel&nbsp;&gt;&nbsp;maxLevel)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLevel&nbsp;=&nbsp;childLevel\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;maxLevel\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick&nbsp;()&nbsp;{&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;unSumbit&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;unSumbit&nbsp;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;this.defaultCategory\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;sumbitController&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dialogTitle&nbsp;===&nbsp;&#39;add&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(this.dialogTitle&nbsp;===&nbsp;&#39;edit&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.editCategory()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;append&nbsp;(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;绑定好添加的category的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.parentCid&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category.catLevel&nbsp;=&nbsp;data.catLevel&nbsp;+&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改弹框标题\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;add&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;打开输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;addCategory&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;category:&#39;,&nbsp;this.category)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/save&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;保存成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;(data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogTitle&nbsp;=&nbsp;&#39;edit&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改默认展开\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[data.parentCid]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/category/info/${data.catId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;进行数据回显\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;data.category\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;打开对话弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;editCategory&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/update&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(this.category,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;编辑成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;关闭输入弹框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dialogVisible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除输入框\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.category&nbsp;=&nbsp;{&nbsp;...this.defaultCategory&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;remove&nbsp;(node,&nbsp;data)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(node,&nbsp;data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ids&nbsp;=&nbsp;[data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`是否删除【${data.name}】当前菜单?`,&nbsp;&#39;提示&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1000,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expandedKey&nbsp;=&nbsp;[node.parent.data.catId]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch(()&nbsp;=&gt;&nbsp;{&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;mounted&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;维护一个变量，让批量删除按键是否可用\r\n&nbsp;&nbsp;&nbsp;&nbsp;setInterval(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.isChecked&nbsp;=&nbsp;this.$refs.categoryTree.getCheckedNodes().length&nbsp;===&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;300)\r\n&nbsp;&nbsp;}\r\n\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n.drop-control&nbsp;{\r\n&nbsp;&nbsp;display:&nbsp;flex;\r\n&nbsp;&nbsp;align-items:&nbsp;center;\r\n&nbsp;&nbsp;height:&nbsp;40px;\r\n}\r\n&lt;/style&gt;</pre><p>1、如何获取选中分类的id呢？</p><p>使用<code>&lt;el-tree&gt;</code> 组件的内置方法 <code>getCheckedNodes()</code>即点击批量删除后：</p><pre>//&nbsp;获取选中的节点\r\nlet&nbsp;checkedData&nbsp;=&nbsp;this.$refs.categoryTree.getCheckedNodes()\r\n//&nbsp;获取里面的id形成一个数组\r\nlet&nbsp;catIds&nbsp;=&nbsp;Array.from(checkedData,&nbsp;data&nbsp;=&gt;&nbsp;data.catId)</pre><p>获取到这些category的catId就可以批量删除了。</p><p><strong>后端API</strong>：已经逆向生成了</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;删除\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/delete&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;delete(@RequestBody&nbsp;Long[]&nbsp;ids){\r\n&nbsp;&nbsp;&nbsp;&nbsp;categoryService.removeMenuByIds(Arrays.asList(ids));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><h3>[<em>8</em>] 品牌管理</h3><h4>[<em>8.1</em>] 前端代码生成与优化</h4><p>1、在后端模块的<code>renren-generator</code> 模块，修改配置：</p><p>application.properties：配置数据库名为<code>gulimall_pms</code></p><pre>#&nbsp;mysql\r\nspring:\r\n&nbsp;&nbsp;datasource:\r\n&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;com.alibaba.druid.pool.DruidDataSource\r\n&nbsp;&nbsp;&nbsp;&nbsp;#MySQL配置\r\n&nbsp;&nbsp;&nbsp;&nbsp;driverClassName:&nbsp;com.mysql.cj.jdbc.Driver\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;jdbc:mysql://192.168.87.101:3306/gulimall_pms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n&nbsp;&nbsp;&nbsp;&nbsp;username:&nbsp;root\r\n&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;3333</pre><p>generator.properties：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601827533441660182752834.png\" alt=\"\"/></p><p>启动<code>renren-generator</code> 服务（是80端口，冲突需要修改）：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601829370261660182936503.png\" alt=\"\"/></p><p>得到下面这两个前端页面文件：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601830230241660183022722.png\" alt=\"\"/></p><p>打开<code>renren-fast-vue</code> 后台管理页面：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601831390201660183138340.png\" alt=\"\"/></p><p>得到：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601832081761660183208023.png\" alt=\"\"/></p><p>将上面逆向生成的两个文件：<code>brand.vue</code> 与<code>brand-add-or-update.vue</code> 放在<code>renren-fast-vue</code> 前端代码的<code>src\\views\\modules\\product</code> 下：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601833240221660183323389.png\" alt=\"\"/></p><p>代码优化：</p><p>brand.vue</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;mod-config&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;:inline=&quot;true&quot;&nbsp;:model=&quot;dataForm&quot;&nbsp;@keyup.enter.native=&quot;getDataList()&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.key&quot;&nbsp;placeholder=&quot;参数名&quot;&nbsp;clearable&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;getDataList()&quot;&gt;查询&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;pms:brand:save&#39;)&quot;&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;addOrUpdateHandle()&quot;&gt;新增&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;pms:brand:delete&#39;)&quot;&nbsp;type=&quot;danger&quot;&nbsp;@click=&quot;deleteHandle()&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:disabled=&quot;dataListSelections.length&nbsp;&lt;=&nbsp;0&quot;&gt;批量删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table&nbsp;:data=&quot;dataList&quot;&nbsp;border&nbsp;v-loading=&quot;dataListLoading&quot;&nbsp;@selection-change=&quot;selectionChangeHandle&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;width:&nbsp;100%;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;type=&quot;selection&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;50&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;brandId&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌id&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;name&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌名&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;logo&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌logo地址&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;descript&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;介绍&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;showStatus&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;显示状态&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;scope.row.showStatus&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&nbsp;@change=&quot;statusChanged(scope.row)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;firstLetter&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;检索首字母&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;sort&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;排序&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;fixed=&quot;right&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;150&quot;&nbsp;label=&quot;操作&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;addOrUpdateHandle(scope.row.brandId)&quot;&gt;修改&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;deleteHandle(scope.row.brandId)&quot;&gt;删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-pagination&nbsp;@size-change=&quot;sizeChangeHandle&quot;&nbsp;@current-change=&quot;currentChangeHandle&quot;&nbsp;:current-page=&quot;pageIndex&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:page-sizes=&quot;[10,&nbsp;20,&nbsp;50,&nbsp;100]&quot;&nbsp;:page-size=&quot;pageSize&quot;&nbsp;:total=&quot;totalPage&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layout=&quot;total,&nbsp;sizes,&nbsp;prev,&nbsp;pager,&nbsp;next,&nbsp;jumper&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-pagination&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;弹窗,&nbsp;新增&nbsp;/&nbsp;修改&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;add-or-update&nbsp;v-if=&quot;addOrUpdateVisible&quot;&nbsp;ref=&quot;addOrUpdate&quot;&nbsp;@refreshDataList=&quot;getDataList&quot;&gt;&lt;/add-or-update&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nimport&nbsp;AddOrUpdate&nbsp;from&nbsp;&#39;./brand-add-or-update&#39;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataForm:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;&#39;&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataList:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageIndex:&nbsp;1,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageSize:&nbsp;10,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;totalPage:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListLoading:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListSelections:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateVisible:&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;components:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;AddOrUpdate\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;activated&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;statusChanged&nbsp;(rowData)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/brand/update`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(rowData)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;状态修改成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;refreshDataList&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取数据列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;getDataList&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/brand/list&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;page&#39;:&nbsp;this.pageIndex,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;limit&#39;:&nbsp;this.pageSize,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;key&#39;:&nbsp;this.dataForm.key\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;data.page.list\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;data.page.totalCount\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;每页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;sizeChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageSize&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;当前页\r\n&nbsp;&nbsp;&nbsp;&nbsp;currentChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;多选\r\n&nbsp;&nbsp;&nbsp;&nbsp;selectionChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListSelections&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;新增&nbsp;/&nbsp;修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addOrUpdateVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs.addOrUpdate.init(id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;删除\r\n&nbsp;&nbsp;&nbsp;&nbsp;deleteHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ids&nbsp;=&nbsp;id&nbsp;?&nbsp;[id]&nbsp;:&nbsp;this.dataListSelections.map(item&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;item.brandId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`确定对[id=${ids.join(&#39;,&#39;)}]进行[${id&nbsp;?&nbsp;&#39;删除&#39;&nbsp;:&nbsp;&#39;批量删除&#39;}]操作?`,&nbsp;&#39;提示&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/brand/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;</pre><p>brand-add-or-update.vue：</p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;el-dialog&nbsp;:title=&quot;!dataForm.brandId&nbsp;?&nbsp;&#39;新增&#39;&nbsp;:&nbsp;&#39;修改&#39;&quot;&nbsp;:close-on-click-modal=&quot;false&quot;&nbsp;:visible.sync=&quot;visible&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;:model=&quot;dataForm&quot;&nbsp;:rules=&quot;dataRule&quot;&nbsp;ref=&quot;dataForm&quot;&nbsp;@keyup.enter.native=&quot;dataFormSubmit()&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label-width=&quot;140px&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;品牌名&quot;&nbsp;prop=&quot;name&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.name&quot;&nbsp;placeholder=&quot;品牌名&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;品牌logo地址&quot;&nbsp;prop=&quot;logo&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.logo&quot;&nbsp;placeholder=&quot;品牌logo地址&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;介绍&quot;&nbsp;prop=&quot;descript&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.descript&quot;&nbsp;placeholder=&quot;介绍&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;显示状态&quot;&nbsp;prop=&quot;showStatus&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.showStatus&quot;&nbsp;placeholder=&quot;显示状态[0-不显示；1-显示]&quot;&gt;&lt;/el-input&gt;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;dataForm.showStatus&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;检索首字母&quot;&nbsp;prop=&quot;firstLetter&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.firstLetter&quot;&nbsp;placeholder=&quot;检索首字母&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;排序&quot;&nbsp;prop=&quot;sort&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.sort&quot;&nbsp;placeholder=&quot;排序&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;visible&nbsp;=&nbsp;false&quot;&gt;取消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;dataFormSubmit()&quot;&gt;确定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataForm:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brandId:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logo:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;descript:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showStatus:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstLetter:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort:&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataRule:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;品牌名不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logo:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;品牌logo地址不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;descript:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;介绍不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showStatus:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;显示状态不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstLetter:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;检索首字母不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;排序不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;init&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.brandId&nbsp;=&nbsp;id&nbsp;||&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].resetFields()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dataForm.brandId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/brand/info/${this.dataForm.brandId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.name&nbsp;=&nbsp;data.brand.name\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.logo&nbsp;=&nbsp;data.brand.logo\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.descript&nbsp;=&nbsp;data.brand.descript\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.showStatus&nbsp;=&nbsp;data.brand.showStatus\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.firstLetter&nbsp;=&nbsp;data.brand.firstLetter\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.sort&nbsp;=&nbsp;data.brand.sort\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;表单提交\r\n&nbsp;&nbsp;&nbsp;&nbsp;dataFormSubmit&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].validate((valid)&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(valid)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/brand/${!this.dataForm.brandId&nbsp;?&nbsp;&#39;save&#39;&nbsp;:&nbsp;&#39;update&#39;}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;brandId&#39;:&nbsp;this.dataForm.brandId&nbsp;||&nbsp;undefined,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;name&#39;:&nbsp;this.dataForm.name,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;logo&#39;:&nbsp;this.dataForm.logo,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;descript&#39;:&nbsp;this.dataForm.descript,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;showStatus&#39;:&nbsp;this.dataForm.showStatus,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;firstLetter&#39;:&nbsp;this.dataForm.firstLetter,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;sort&#39;:&nbsp;this.dataForm.sort\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;refreshDataList&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;</pre><p>1、打开后台管理的品牌管理，刚开始时，加载不出来数据，是为什么？</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601838071471660183806750.png\" alt=\"\"/></p><p>解：生成的代码的请求路径不对，修改前：<code>/pms/brand/info/...</code> &nbsp;修改后 <code>/product/brand/info/...</code> ，一共需要修改四个地方，修改后，就好了。</p><p>2、怎么解决显示的问题？</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601840322261660184032062.png\" alt=\"\"/></p><p>解：调整宽度，与字的数量，下面是：<code>src\\views\\modules\\product\\brand-add-or-update.vue</code></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601841390211660184138141.png\" alt=\"\"/></p><p>3、点击修改时，怎么解决，发送的请求中的<code>showStatus</code> 属性是字符串（后端是数值类型）？</p><p>操作<code>src\\views\\modules\\product\\brand-add-or-update.vue</code> 文件，使用parseInt()进行转为数值类型。</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601850010211660185000163.png\" alt=\"\"/></p><p>4、怎么将表格显示的“显示状态”列，变为开关？</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601850680201660185067289.png\" alt=\"\"/></p><p>想要在列中将自定义的东西，要使用插槽（这里使用的是作用域插槽）。</p><p>通过查看element ui 的示例代码，可以知道</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601852920251660185291833.png\" alt=\"\"/></p><p>在文件：<code>src\\views\\modules\\product\\brand.vue</code></p><p>可以在<code>&lt;el-table-column&gt;</code>标签内加<code>template</code>就可以自定义内容：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;showStatus&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;显示状态&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;scope.row.showStatus&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601866195661660186619169.png\" alt=\"\"/></p><p>当状态改变时，我们可以发送请求修改数据：</p><p>修改上面所说的代码：</p><pre>&lt;el-switch&nbsp;v-model=&quot;scope.row.showStatus&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&nbsp;@change=&quot;statusChanged(scope.row)&quot;&gt;\r\n&lt;/el-switch&gt;</pre><p>开关改变时，将触发<code>statusChanged</code> 函数：</p><pre>statusChanged&nbsp;(rowData)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/brand/update&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(rowData,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;状态修改成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},</pre><p>5、怎么修改修改或新增表单中的showStatus列也变为开关？</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;介绍&quot;&nbsp;prop=&quot;descript&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.descript&quot;&nbsp;placeholder=&quot;介绍&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;显示状态&quot;&nbsp;prop=&quot;showStatus&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;dataForm.showStatus&quot;&nbsp;:active-value=&quot;1&quot;&nbsp;:inactive-value=&quot;0&quot;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;</pre><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601866660261660186665314.png\" alt=\"\"/></p><p>这样就完成替代了输入框，且功能一样。</p><p>6、怎么修复，新增时，500状态或提交的数据 sort是字符串？</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601870662091660187066056.png\" alt=\"\"/></p><p>在<code>brand-add-or-update.vue</code> 文件中修改请求的sort为数值。</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601869580261660186957221.png\" alt=\"\"/></p><h4>[<em>8.2</em>] 品牌logo上传：阿里 OSS准备工作</h4><p>创建一个容器——Bucket，推荐一个项目一个Bucket</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660202538240%E5%8A%A8%E7%94%BB.apng\" alt=\"\"/></p><p>创建一个子账号，因为要使用用于编程子账号的的<code>accessKeyId</code> 、<code>bucketName</code></p><p>演示动画：</p><p><a href=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660207011480%E5%8A%A8%E7%94%BB.apng\">https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660207011480动画.apng</a></p><p>获取到子用户的 <code>accessKeyId</code> 、<code>bucketName</code> 后，我们就可以进行测试上传了：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--阿里云OSS&nbsp;sdk--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;3.10.2&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;</pre><p>java测试代码：</p><pre>@Test\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;ossTest()&nbsp;throws&nbsp;FileNotFoundException&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;bucket&nbsp;的概览里\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;endpoint&nbsp;=&nbsp;&quot;https://oss-cn-shanghai.aliyuncs.com&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;accessKeyId&nbsp;=&nbsp;&quot;LTAI5tAyUdDxcCYZvSj8iVzh&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;accessKeySecret&nbsp;=&nbsp;&quot;MlcubNQqBXWxdAloToEIeyab9Hgexa&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;填写Bucket名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;bucketName&nbsp;=&nbsp;&quot;gulimall-zhuangjie-resource&quot;;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;要上传的文件路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;filePath=&nbsp;&quot;D:\\\\system\\\\图片\\\\IMG_0029.JPG&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;保存在bucket上的“文件名”&nbsp;或“路径/文件名”\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;objectName&nbsp;=&nbsp;&quot;2022-8-11/IMG_0029.JPG&quot;;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;创建OSSClient实例。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSS&nbsp;ossClient&nbsp;=&nbsp;new&nbsp;OSSClientBuilder().build(endpoint,&nbsp;accessKeyId,&nbsp;accessKeySecret);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;inputStream&nbsp;=&nbsp;new&nbsp;FileInputStream(filePath);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;创建PutObject请求。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ossClient.putObject(bucketName,&nbsp;objectName,&nbsp;inputStream);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;OSS上传文件失败：&quot;+e.getMessage());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;finally&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ossClient&nbsp;!=&nbsp;null)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ossClient.shutdown();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>上面对应的官网文档位置：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602076220221660207621825.png\" alt=\"\"/></p><h4>[<em>8.3</em>] 品牌logo上传： OSS正式集成到项目</h4><p>创建一个模块，用于集成所有第三方服务——<code>gulimall-third-party</code></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602089988071660208998556.png\" alt=\"\"/></p><ol class=\" list-paddingleft-2\"><li><p>依赖：</p><p>1、将下面，放在<code>dependencyManagement &gt; dependencies</code> 标签下, 因为在添加oss依赖时不用写版本了，进行了版本控制</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;2.2.0.RELEASE&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;type&gt;pom&lt;/type&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;scope&gt;import&lt;/scope&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;</pre><pre>2、添加&nbsp;Oss的依赖（1中进行了版本控制，这里就不用写版本号）</pre><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-cloud-starter-alicloud-oss&lt;/artifactId&gt;\r\n&lt;/dependency&gt;</pre><pre>3、添加依赖</pre><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.zhuangjie.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&lt;/dependency&gt;</pre><pre>4、排除`gulimall-common`&nbsp;模块中的mybatis-plus自动配置或排除掉依赖，如果模块不配置相关的东西（数据库信息），启动时会报错。</pre><pre>@SpringBootApplication(exclude&nbsp;=&nbsp;{DataSourceAutoConfiguration.class})\r\npublic&nbsp;class&nbsp;GulimallThirdPartyApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(GulimallThirdPartyApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><pre>或</pre><pre>&lt;dependency&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.atguigu.gulimall&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;gulimall-common&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;exclusions&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;exclusion&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;com.baomidou&lt;/groupId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/exclusion&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/exclusions&gt;\r\n&lt;/dependency&gt;</pre><ol start=\"2\" class=\" list-paddingleft-2\"><li><p>配置</p><p>普通配置 &amp; 配置nacos注册中心</p><p>application.yml：</p></li></ol><pre>server:\r\n&nbsp;&nbsp;port:&nbsp;30000\r\nspring:\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;gulimall-third-party\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848</pre><pre>bootstrap.properties：配置nacos配置中心</pre><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-third-party\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev</pre><ol start=\"3\" class=\" list-paddingleft-2\"><li><p>配置开启注册中心</p><p><code>gulimall-third-party</code> 主启动类：加<code>@EnableDiscoveryClient</code> 注解</p></li></ol><pre>@EnableDiscoveryClient\r\n@SpringBootApplication(exclude&nbsp;=&nbsp;{DataSourceAutoConfiguration.class})\r\npublic&nbsp;class&nbsp;GulimallThirdPartyApplication&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(GulimallThirdPartyApplication.class,&nbsp;args);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><ol start=\"4\" class=\" list-paddingleft-2\"><li><p>开始集成阿里OSS</p><p>application.yml：加入OSS配置信息</p></li></ol><pre>server:\r\n&nbsp;&nbsp;port:&nbsp;30000\r\nspring:\r\n&nbsp;&nbsp;application:\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;gulimall-third-party\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;nacos:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-addr:&nbsp;192.168.87.101:8848\r\n&nbsp;&nbsp;&nbsp;&nbsp;alicloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#使用的是子用户的access-key、secret-key\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;access-key:&nbsp;LTAI5tAyUdDxcCYZvSj8iVzh\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secret-key:&nbsp;MlcubNQqBXWxdAloToEIeyab9Hgexa\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oss:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#区域用的是上海\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endpoint:&nbsp;oss-cn-shanghai.aliyuncs.com\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#默认没有这个属性，我们自己写的，是Bucket\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bucket:&nbsp;gulimall-zhuangjie-resource</pre><ol start=\"5\" class=\" list-paddingleft-2\"><li><p>配置接口</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602170629331660217062688.png\" alt=\"\"/></p><p>所以我们需要编写一个接口，返回给客户端授权的policy，开始编写：</p><p>在<code>gulimall-third-party</code> 模块创建：gulimall-third-party/src/main/java/com/zhuangjie/gulimall/thirdparty/controller/OssController.java 文件：</p></li></ol><pre>package&nbsp;com.zhuangjie.gulimall.thirdparty.controller;\r\n\r\nimport&nbsp;com.alibaba.fastjson.JSONObject;\r\nimport&nbsp;com.aliyun.oss.OSSClient;\r\nimport&nbsp;com.aliyun.oss.common.utils.BinaryUtil;\r\nimport&nbsp;com.aliyun.oss.model.MatchMode;\r\nimport&nbsp;com.aliyun.oss.model.PolicyConditions;\r\nimport&nbsp;org.springframework.beans.factory.annotation.Value;\r\nimport&nbsp;org.springframework.web.bind.annotation.RequestMapping;\r\nimport&nbsp;org.springframework.web.bind.annotation.RestController;\r\n\r\nimport&nbsp;java.text.SimpleDateFormat;\r\nimport&nbsp;java.util.Date;\r\nimport&nbsp;java.util.LinkedHashMap;\r\nimport&nbsp;java.util.Map;\r\n@RestController\r\n@RequestMapping(&quot;/third-party&quot;)\r\npublic&nbsp;class&nbsp;OssController&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${spring.cloud.alicloud.access-key}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;accessId;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${spring.cloud.alicloud.secret-key}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;accessKey;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${spring.cloud.alicloud.oss.endpoint}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;endpoint;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Value(&quot;${spring.cloud.alicloud.oss.bucket}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;bucket;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/oss/policy&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Map&lt;String,&nbsp;String&gt;&nbsp;policy()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;host&nbsp;=&nbsp;&quot;https://&quot;+bucket+&quot;.&quot;+endpoint;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;prefix_dir&nbsp;=&nbsp;new&nbsp;SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(new&nbsp;Date(System.currentTimeMillis()));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;dir&nbsp;=&nbsp;prefix_dir+&quot;/&quot;;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSSClient&nbsp;client&nbsp;=&nbsp;new&nbsp;OSSClient(endpoint,&nbsp;accessId,&nbsp;accessKey);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&lt;String,&nbsp;String&gt;&nbsp;respMap&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;expireTime&nbsp;=&nbsp;30;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;expireEndTime&nbsp;=&nbsp;System.currentTimeMillis()&nbsp;+&nbsp;expireTime&nbsp;*&nbsp;1000;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;expiration&nbsp;=&nbsp;new&nbsp;Date(expireEndTime);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PolicyConditions&nbsp;policyConds&nbsp;=&nbsp;new&nbsp;PolicyConditions();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;policyConds.addConditionItem(PolicyConditions.COND_CONTENT_LENGTH_RANGE,&nbsp;0,&nbsp;1048576000);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;policyConds.addConditionItem(MatchMode.StartWith,&nbsp;PolicyConditions.COND_KEY,&nbsp;dir);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;postPolicy&nbsp;=&nbsp;client.generatePostPolicy(expiration,&nbsp;policyConds);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;byte[]&nbsp;binaryData&nbsp;=&nbsp;postPolicy.getBytes(&quot;utf-8&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;encodedPolicy&nbsp;=&nbsp;BinaryUtil.toBase64String(binaryData);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;postSignature&nbsp;=&nbsp;client.calculatePostSignature(postPolicy);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap&nbsp;=&nbsp;new&nbsp;LinkedHashMap&lt;String,&nbsp;String&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;accessid&quot;,&nbsp;accessId);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;policy&quot;,&nbsp;encodedPolicy);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;signature&quot;,&nbsp;postSignature);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;dir&quot;,&nbsp;dir);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;host&quot;,&nbsp;host);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;expire&quot;,&nbsp;String.valueOf(expireEndTime&nbsp;/&nbsp;1000));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;respMap.put(&quot;expire&quot;,&nbsp;formatISO8601Date(expiration));\r\n\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSONObject&nbsp;jasonCallback&nbsp;=&nbsp;new&nbsp;JSONObject();\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jasonCallback.put(&quot;callbackUrl&quot;,&nbsp;callbackUrl);\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jasonCallback.put(&quot;callbackBody&quot;,\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;filename=${object}&amp;size=${size}&amp;mimeType=${mimeType}&amp;height=${imageInfo.height}&amp;width=${imageInfo.width}&quot;);\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jasonCallback.put(&quot;callbackBodyType&quot;,&nbsp;&quot;application/x-www-form-urlencoded&quot;);\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;base64CallbackBody&nbsp;=&nbsp;BinaryUtil.toBase64String(jasonCallback.toString().getBytes());\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respMap.put(&quot;callback&quot;,&nbsp;base64CallbackBody);\r\n\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Assert.fail(e.getMessage());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(e.getMessage());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;respMap;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><pre>如何得知的这些？\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602172992411660217293045.png)\r\n\r\n点击&nbsp;Java→&nbsp;然后滚动查看：`应用服务器核心代码解析`</pre><ol start=\"6\" class=\" list-paddingleft-2\"><li><p>给gateway网关配置路由到<code>gulimall-third-party</code></p><p><a href=\"http://localhost/api/third-party/oss/policy\">http://localhost/api/third-party/oss/policy</a></p><p>路由到→</p><p><a href=\"http://localhost:30000/third-party/oss/policy\">http://localhost:30000/third-party/oss/policy</a></p><p>gateway网关的路由配置：新增的配置的是<code>thirdparty_route</code> （第二个），注意顺序！！</p></li></ol><pre>spring:\r\n&nbsp;&nbsp;cloud:\r\n&nbsp;&nbsp;&nbsp;&nbsp;gateway:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;product_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://gulimall-product\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/product/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/$\\{segment}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;thirdparty_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://gulimall-third-party\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/third-party/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/$\\{segment}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;admin_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://renren-fast\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;#&nbsp;什么情况下路由给它\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\\{segment}</pre><ol start=\"7\" class=\" list-paddingleft-2\"><li><p>前台图片上传</p><p><a href=\"https://github.com/18476305640/fileBox/raw/master/%E6%9D%82%E9%A1%B9/upload.zip\">https://github.com/18476305640/fileBox/raw/master/杂项/upload.zip</a></p><p>下载前端图片上传组件文件, 将目录放在<code>components</code>目录：</p><p>multUpload.vue是多文件上传组件</p><p>singleUpload.vue 是单文件上传组件</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602298886211660229888093.png\" alt=\"\"/></p><p>在<code>brand-add-or-update.vue</code> ：在这里我们使用单文件上传组件</p></li></ol><pre>\r\n&nbsp;&lt;el-form-item&nbsp;label=&quot;品牌logo地址&quot;&nbsp;prop=&quot;logo&quot;&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;【3】使用组件--&gt;\r\n&nbsp;&nbsp;&lt;single-upload&nbsp;v-model=&quot;dataForm.logo&quot;&gt;&lt;/single-upload&gt;\r\n&lt;/el-form-item&gt;\r\n\r\n\r\nimport&nbsp;SingleUpload&nbsp;from&nbsp;&#39;@/components/upload/singleUpload&#39;&nbsp;//【1】导入组件\r\n...\r\n&nbsp;&nbsp;components:&nbsp;{&nbsp;SingleUpload&nbsp;},&nbsp;//【2】注册组件\r\n...</pre><pre>在页面上，就有了：\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602301454351660230145330.png)\r\n\r\n`singleUpload.vue`需要修改的地方：\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602303165221660230315649.png)\r\n\r\n想要图片不被CORS，需要在阿里云OSS上配置：\r\n\r\n&nbsp;&nbsp;动画演示：[https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660230750897动画.apng](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1660230750897动画.apng)\r\n\r\n这里要显示为图片，还要这样优化：\r\n\r\n![](https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602316509761660231650572.png)\r\n\r\n`brand.vue`&nbsp;:</pre><pre>&lt;el-table-column&nbsp;prop=&quot;logo&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌logo地址&quot;&gt;\r\n&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;:src=&quot;scope.row.logo.indexOf(&#39;http&#39;)&nbsp;&gt;=&nbsp;0&nbsp;?&nbsp;scope.row.logo&nbsp;:&nbsp;defaultLogo&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;width:&nbsp;60px;&nbsp;height:&nbsp;60px&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&lt;/template&gt;\r\n&lt;/el-table-column&gt;</pre><h4>[<em>8.4</em>] 品牌管理：分页功能</h4><p>存在的问题：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16613085156001661308515014.png\" alt=\"\"/></p><ol class=\" list-paddingleft-2\"><li><p>使用mybatis-plus分页插件</p><p><code>com.zhuangjie.gulimall.product.config.MyBatisPlusConfig.java</code></p></li></ol><pre>@Configuration\r\n@MapperScan(&quot;com.zhuangjie.gulimall.product.dao&quot;)\r\npublic&nbsp;class&nbsp;MyBatisPlusConfig&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*分页插件&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Bean\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;PaginationInterceptor&nbsp;paginationInterceptor()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;PaginationInterceptor();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><pre>然后重新启动product模块，分页效果就有了。接下来是搜索</pre><ol start=\"2\" class=\" list-paddingleft-2\"><li><p>使用前端传入的key进行完善查询</p><p>前台点击“查询”后，会发送一个请求：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16613087348811661308734698.png\" alt=\"\"/></p><p>当前后端是没有使用到这个key参数来查询的，直接来到service层：</p><p><code>com.zhuangjie.gulimall.product.service.impl.BrandServiceImpl.java</code></p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;PageUtils&nbsp;queryPage(Map&lt;String,&nbsp;Object&gt;&nbsp;params)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;参数：&quot;+params);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;key&nbsp;=&nbsp;(String)&nbsp;params.get(&quot;key&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QueryWrapper&lt;BrandEntity&gt;&nbsp;queryWrapper&nbsp;=&nbsp;new&nbsp;QueryWrapper&lt;&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;queryWrapper.eq(&quot;brand_id&quot;,key).or().like(&quot;name&quot;,key);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPage&lt;BrandEntity&gt;&nbsp;page&nbsp;=&nbsp;this.page(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;Query&lt;BrandEntity&gt;().getPage(params),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;queryWrapper\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;PageUtils(page);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>然后品牌管理列表搜索就可以了~</pre><h4>[<em>8.5</em>] 表单校验：前端</h4><p><code>src\\views\\modules\\product\\brand-add-or-update.vue</code></p><pre>...\r\n\r\n\r\ndataRule:&nbsp;{\r\n&nbsp;&nbsp;name:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;品牌名不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;logo:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;品牌logo地址不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;descript:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;介绍不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;showStatus:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;显示状态[0-不显示；1-显示]不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;firstLetter:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validator&nbsp;(rule,&nbsp;value,&nbsp;callback)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;===&nbsp;&#39;&#39;&nbsp;||&nbsp;!/^[a-zA-Z]$/.test(value))&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback(new&nbsp;Error(&#39;请输入一个英文字母作为首检索字母&#39;))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;],\r\n&nbsp;&nbsp;sort:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validator&nbsp;(rule,&nbsp;value,&nbsp;callback)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;!==&nbsp;&#39;&#39;&nbsp;&amp;&amp;&nbsp;parseInt(value)&nbsp;+&nbsp;&#39;&#39;&nbsp;===&nbsp;value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback(new&nbsp;Error(&#39;请输入一个整数&#39;))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;]\r\n}\r\n\r\n\r\n\r\n....</pre><p><code>validator (rule, value, callback) {} </code>函数就是我们的自定义效验器，当不满足时</p><p><code> callback(new Error(&#39;请输入一个整数&#39;))</code></p><p>当满足时，直接</p><p><code> callback()</code></p><h4>[<em>8.6</em>] 表单数据检验：后端-JSR 303</h4><p>后端使用<code>JSR 303</code> 进行数据校验</p><ol class=\" list-paddingleft-2\"><li><p>Entity 中</p><p>①使用内置检验规则：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602724525801660272452292.png\" alt=\"\"/></p><p>示例：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602723282491660272328066.png\" alt=\"\"/></p><p>②自定义校验：使用@Pattern注解</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602719854661660271985048.png\" alt=\"\"/></p></li><li><p>在Controller</p><p>在前面加<code>@Valid</code> ，还可以在后面再加<code>BindingResult result</code> （作用时，自定义错误信息，如把信息简化放在R对象中）</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;保存\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/save&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;save(@Valid&nbsp;@RequestBody&nbsp;BrandEntity&nbsp;brand,&nbsp;BindingResult&nbsp;result){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(result.hasErrors())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashMap&lt;String,&nbsp;String&gt;&nbsp;map&nbsp;=&nbsp;new&nbsp;HashMap&lt;&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.getFieldErrors().forEach(item&nbsp;-&gt;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;field&nbsp;=&nbsp;item.getField();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;message&nbsp;=&nbsp;item.getDefaultMessage();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map.put(field,message);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.error(400,&quot;提交的数据不合法&quot;).put(&quot;data&quot;,map);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;brandService.save(brand);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><ol start=\"3\" class=\" list-paddingleft-2\"><li><p>测试(以下logo、firstLetter不合法)</p></li></ol><pre>###\r\nPOST&nbsp;http://localhost/api/product/brand/save&nbsp;HTTP/1.1\r\nContent-Type:&nbsp;application/json\r\n\r\n{&quot;brandId&quot;:1235,&quot;name&quot;:&quot;小庄&quot;,&quot;logo&quot;:&quot;abchttps://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601832081761660183208023.png&quot;,&quot;descript&quot;:&quot;&quot;,&quot;showStatus&quot;:1,&quot;firstLetter&quot;:&quot;1&quot;,&quot;sort&quot;:1}</pre><pre>响应：</pre><pre>HTTP/1.1&nbsp;200&nbsp;OK\r\ntransfer-encoding:&nbsp;chunked\r\nVary:&nbsp;Origin,&nbsp;Access-Control-Request-Method,&nbsp;Access-Control-Request-Headers\r\nContent-Type:&nbsp;application/json\r\nDate:&nbsp;Fri,&nbsp;12&nbsp;Aug&nbsp;2022&nbsp;02:51:30&nbsp;GMT\r\nconnection:&nbsp;close\r\n\r\n{\r\n&nbsp;&nbsp;&quot;msg&quot;:&nbsp;&quot;提交的数据不合法&quot;,\r\n&nbsp;&nbsp;&quot;code&quot;:&nbsp;400,\r\n&nbsp;&nbsp;&quot;data&quot;:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;logo&quot;:&nbsp;&quot;logo必须是一个url地址&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;firstLetter&quot;:&nbsp;&quot;检索首字母只有一个字母&quot;\r\n&nbsp;&nbsp;}\r\n}</pre><h4>[<em>8.7</em>] 表单数据检验：后端-统一异常处理</h4><p>使用统一异常处理使统一数据校验的收集返回到前端</p><p>在<code>gulimall-common</code> 模块创建文件：<code>com.zhuangjie.common.exception.BizCodeEnum.java</code></p><p>(作用是，统一管理错误码与信息)</p><p>HTTP/1.1 200 OK</p><p>transfer-encoding: chunked</p><p>Vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers</p><p>Content-Type: application/json</p><p>Date: Fri, 12 Aug 2022 02:51:30 GMT</p><p>connection: close</p><p>{</p><p>&quot;msg&quot;: &quot;提交的数据不合法&quot;,</p><p>&quot;code&quot;: 400,</p><p>&quot;data&quot;: {</p><pre>&quot;logo&quot;:&nbsp;&quot;logo必须是一个url地址&quot;,\r\n\r\n&quot;firstLetter&quot;:&nbsp;&quot;检索首字母只有一个字母&quot;</pre><p>}</p><p>}</p><p>HTTP/1.1 200 OK</p><p>transfer-encoding: chunked</p><p>Vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers</p><p>Content-Type: application/json</p><p>Date: Fri, 12 Aug 2022 02:51:30 GMT</p><p>connection: close</p><p>{</p><p>&quot;msg&quot;: &quot;提交的数据不合法&quot;,</p><p>&quot;code&quot;: 400,</p><p>&quot;data&quot;: {</p><pre>&quot;logo&quot;:&nbsp;&quot;logo必须是一个url地址&quot;,\r\n\r\n&quot;firstLetter&quot;:&nbsp;&quot;检索首字母只有一个字母&quot;</pre><p>}</p><p>}</p><pre>package&nbsp;com.zhuangjie.common.exception;\r\n/***\r\n&nbsp;*&nbsp;错误码和错误信息定义类\r\n&nbsp;*&nbsp;1.&nbsp;错误码定义规则为5为数字\r\n&nbsp;*&nbsp;2.&nbsp;前两位表示业务场景，最后三位表示错误码。例如：100001。10:通用&nbsp;001:系统未知异常\r\n&nbsp;*&nbsp;3.&nbsp;维护错误码后需要维护错误描述，将他们定义为枚举形式\r\n&nbsp;*&nbsp;错误码列表：\r\n&nbsp;*&nbsp;&nbsp;10:&nbsp;通用\r\n&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;001：参数格式校验\r\n&nbsp;*&nbsp;&nbsp;11:&nbsp;商品\r\n&nbsp;*&nbsp;&nbsp;12:&nbsp;订单\r\n&nbsp;*&nbsp;&nbsp;13:&nbsp;购物车\r\n&nbsp;*&nbsp;&nbsp;14:&nbsp;物流\r\n&nbsp;*&nbsp;@author&nbsp;ZSY\r\n&nbsp;*/\r\npublic&nbsp;enum&nbsp;BizCodeEnum&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;系统未知异常\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;UNKNOWN_EXCEPTION(10000,&nbsp;&quot;系统未知异常&quot;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;参数校验错误\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;VALID_EXCEPTION(10001,&nbsp;&quot;参数格式校验失败&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;int&nbsp;code;\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;String&nbsp;message;\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BizCodeEnum(int&nbsp;code,String&nbsp;message)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.code&nbsp;=&nbsp;code;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.message&nbsp;=&nbsp;message;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;getCode()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this.code;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getMessage()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this.message;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p>在<code>gulimall-product</code>模块创建：<code>com.zhuangjie.gulimall.product.exception.MallExceptionControllerAdvice.java</code></p><p>统一处理了，数据校验失败的异常，对检验的异常的字段进行了列举。封装到data中。和全部异常统一处理。</p><p>怎么知道是什么异常，输出 e.getClass() 就可以知道，然后就可以单独处理</p><pre>package&nbsp;com.zhuangjie.gulimall.product.exception;\r\n\r\nimport&nbsp;com.zhuangjie.common.exception.BizCodeEnum;\r\nimport&nbsp;com.zhuangjie.common.utils.R;\r\nimport&nbsp;lombok.extern.slf4j.Slf4j;\r\nimport&nbsp;org.springframework.web.bind.MethodArgumentNotValidException;\r\nimport&nbsp;org.springframework.web.bind.annotation.ExceptionHandler;\r\nimport&nbsp;org.springframework.web.bind.annotation.RestControllerAdvice;\r\n\r\nimport&nbsp;java.util.HashMap;\r\n@Slf4j\r\n@RestControllerAdvice(basePackages&nbsp;=&nbsp;&quot;com.zhuangjie.gulimall.product.controller&quot;)\r\npublic&nbsp;class&nbsp;MallExceptionControllerAdvice&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;@ExceptionHandler(MethodArgumentNotValidException.class)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;handleValidException(MethodArgumentNotValidException&nbsp;e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;数据校验出现问题{}，异常类型：{}&quot;,e.getMessage(),e.getClass());&nbsp;//记录\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashMap&lt;String,&nbsp;String&gt;&nbsp;errMap&nbsp;=&nbsp;new&nbsp;HashMap&lt;&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.getBindingResult().getFieldErrors().forEach(item-&gt;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;field&nbsp;=&nbsp;item.getField();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;message&nbsp;=&nbsp;item.getDefaultMessage();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errMap.put(field,message);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;统一异常处理&quot;+e.getClass());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.error(BizCodeEnum.VALID_EXCEPTION.getCode(),BizCodeEnum.VALID_EXCEPTION.getMessage()).put(&quot;data&quot;,errMap);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;@ExceptionHandler(Exception.class)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;allException(Exception&nbsp;e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&quot;出现问题{}，异常类型：{}&quot;,e.getMessage(),e.getClass());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.error(BizCodeEnum.UNKNOWN_EXCEPTION.getCode(),BizCodeEnum.UNKNOWN_EXCEPTION.getMessage());\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><h4>[<em>8.8</em>] 表单数据检验：后端-分组校验</h4><p>为什么需要分组校验？</p><p>新增时，id是不用传的，而更新时就必须要传，所以我们要进行分组。</p><ol class=\" list-paddingleft-2\"><li><p>创建分组</p><p>在<code>gulimall-product</code> 模块的<code>com.zhuangjie.gulimall.product.valid</code> 文件夹下创建两个接口：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602924732631660292472982.png\" alt=\"\"/></p><p>里面没有任何内容！</p></li><li><p>将分组应用到Entity</p><p>在<code>gulimall-product</code>模块中的entity &gt; BrandEntity.java</p><p>对<code>brandId</code> 字段作如何处理，多加一个<code>groups</code> ,表示在什么组下起作用</p></li></ol><pre>&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;*&nbsp;品牌id\r\n&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;@Null(message&nbsp;=&nbsp;&quot;新增时，不需要携带id&quot;,groups&nbsp;=&nbsp;AddGroup.class)\r\n&nbsp;&nbsp;@NotNull(message&nbsp;=&nbsp;&quot;更新时，必须携带id&quot;,groups&nbsp;=&nbsp;UpdateGroup.class)\r\n&nbsp;&nbsp;@TableId\r\n&nbsp;&nbsp;private&nbsp;Long&nbsp;brandId;</pre><ol start=\"3\" class=\" list-paddingleft-2\"><li><p>将分组应用到Controller</p><p>BrandController.java：由之前 的<code>@Valid</code>变为<code>@Validated({XXXGroup.class})</code> ,表示使用哪个分组规则进行校验。</p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;保存\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/save&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;save(@Validated({AddGroup.class})&nbsp;@RequestBody&nbsp;BrandEntity&nbsp;brand){\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;brandService.save(brand);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/update&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;update(@Validated({UpdateGroup.class})&nbsp;@RequestBody&nbsp;BrandEntity&nbsp;brand){\r\n&nbsp;&nbsp;&nbsp;&nbsp;brandService.updateById(brand);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok();\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>/**</p><ul class=\" list-paddingleft-2\"><li><p>保存</p></li></ul><p>*/</p><p>@RequestMapping(&quot;/save&quot;)</p><p>public R save(@Validated({AddGroup.class}) @RequestBody BrandEntity brand){</p><p>brandService.save(brand);</p><p>return R.ok();</p><p>}</p><p>/**</p><ul class=\" list-paddingleft-2\"><li><p>修改</p></li></ul><p>*/</p><p>@RequestMapping(&quot;/update&quot;)</p><p>public R update(@Validated({UpdateGroup.class}) @RequestBody BrandEntity brand){</p><p>brandService.updateById(brand);</p><p>return R.ok();</p><p>}</p><ol class=\" list-paddingleft-2\"><li><p>测试</p><p>比如我们在更新的时候不加brandId：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16602927754401660292775324.png\" alt=\"\"/></p></li></ol><h4>[<em>8.9</em>] 表单数据检验：后端-自定义校验注解与校验器</h4><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603027607891660302760382.png\" alt=\"\"/></p><p>ListValue.java：自定义的注解与@URL那些是同级的</p><pre>package&nbsp;com.zhuangjie.gulimall.product.valid.examine;\r\n\r\nimport&nbsp;javax.validation.Constraint;\r\nimport&nbsp;javax.validation.Payload;\r\nimport&nbsp;java.lang.annotation.Documented;\r\nimport&nbsp;java.lang.annotation.Retention;\r\nimport&nbsp;java.lang.annotation.Target;\r\n\r\nimport&nbsp;static&nbsp;java.lang.annotation.ElementType.*;\r\nimport&nbsp;static&nbsp;java.lang.annotation.ElementType.TYPE_USE;\r\nimport&nbsp;static&nbsp;java.lang.annotation.RetentionPolicy.RUNTIME;\r\n\r\n@Documented\r\n@Constraint(validatedBy&nbsp;=&nbsp;{&nbsp;ListValueConstraintValidator.class&nbsp;})\r\n@Target({&nbsp;METHOD,&nbsp;FIELD,&nbsp;ANNOTATION_TYPE,&nbsp;CONSTRUCTOR,&nbsp;PARAMETER,&nbsp;TYPE_USE&nbsp;})\r\n@Retention(RUNTIME)\r\npublic&nbsp;@interface&nbsp;ListValue&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;message()&nbsp;default&nbsp;&quot;必须是指定的一些值&quot;;&nbsp;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;Class&lt;?&gt;[]&nbsp;groups()&nbsp;default&nbsp;{&nbsp;};\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;Class&lt;?&nbsp;extends&nbsp;Payload&gt;[]&nbsp;payload()&nbsp;default&nbsp;{&nbsp;};\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;int[]&nbsp;values()&nbsp;default&nbsp;{&nbsp;};\r\n}</pre><p>ListValueConstraintValidator.java: 自定义的校验器与上面的自定义注解ListValue对应！可以举一反三，创建新的自定义校验注解与校验器。</p><pre>package&nbsp;com.zhuangjie.gulimall.product.valid.examine;\r\n\r\nimport&nbsp;javax.validation.ConstraintValidator;\r\nimport&nbsp;javax.validation.ConstraintValidatorContext;\r\nimport&nbsp;java.util.HashSet;\r\nimport&nbsp;java.util.Set;\r\n\r\n/**\r\n&nbsp;*&nbsp;@author&nbsp;ZSY\r\n&nbsp;*/\r\npublic&nbsp;class&nbsp;ListValueConstraintValidator&nbsp;implements&nbsp;ConstraintValidator&lt;ListValue,&nbsp;Integer&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;Set&lt;Integer&gt;&nbsp;set&nbsp;=&nbsp;new&nbsp;HashSet&lt;&gt;();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;初始化方法\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;参数：自定义注解的详细信息\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;initialize(ListValue&nbsp;constraintAnnotation)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int[]&nbsp;values&nbsp;=&nbsp;constraintAnnotation.values();&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;val&nbsp;:&nbsp;values)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set.add(val);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;判断是否校验成功\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;value&nbsp;&nbsp;&nbsp;需要校验的值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;context\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;isValid(Integer&nbsp;value,&nbsp;ConstraintValidatorContext&nbsp;context)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;set.contains(value);&nbsp;//set是在使用时放在注解上的&nbsp;value才是要校验的值\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p>使用：使用与内置的注解别无二致</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603033647161660303364249.png\" alt=\"\"/></p><p>测试：里面对象的showStatus属性值为3，会出问题。</p><pre>###\r\nPOST&nbsp;http://localhost/api/product/brand/save&nbsp;HTTP/1.1\r\nContent-Type:&nbsp;application/json\r\n\r\n{&quot;name&quot;:&quot;小庄&quot;,&quot;logo&quot;:&quot;https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16601832081761660183208023.png&quot;,&quot;descript&quot;:&quot;&quot;,&quot;showStatus&quot;:3,&quot;firstLetter&quot;:&quot;A&quot;,&quot;sort&quot;:0}</pre><p>响应</p><pre>HTTP/1.1&nbsp;200&nbsp;OK\r\ntransfer-encoding:&nbsp;chunked\r\nVary:&nbsp;Origin,&nbsp;Access-Control-Request-Method,&nbsp;Access-Control-Request-Headers\r\nContent-Type:&nbsp;application/json\r\nDate:&nbsp;Fri,&nbsp;12&nbsp;Aug&nbsp;2022&nbsp;11:27:30&nbsp;GMT\r\nconnection:&nbsp;close\r\n\r\n{\r\n&nbsp;&nbsp;&quot;msg&quot;:&nbsp;&quot;参数格式校验失败&quot;,\r\n&nbsp;&nbsp;&quot;code&quot;:&nbsp;10001,\r\n&nbsp;&nbsp;&quot;data&quot;:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;showStatus&quot;:&nbsp;&quot;必须是指定的一些值&quot;\r\n&nbsp;&nbsp;}\r\n}</pre><h4>[<em>8.10</em>] 品牌管理：品牌关联分类</h4><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/202208241926%E5%8A%A8%E7%94%BB.apng\" alt=\"\"/></p><p><code>src\\views\\modules\\product\\brand.vue</code></p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;mod-config&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;:inline=&quot;true&quot;&nbsp;:model=&quot;dataForm&quot;&nbsp;@keyup.enter.native=&quot;getDataList()&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.key&quot;&nbsp;placeholder=&quot;参数名&quot;&nbsp;clearable&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;getDataList()&quot;&gt;查询&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;pms:brand:save&#39;)&quot;&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;addOrUpdateHandle()&quot;&gt;新增&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;pms:brand:delete&#39;)&quot;&nbsp;type=&quot;danger&quot;&nbsp;@click=&quot;deleteHandle()&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:disabled=&quot;dataListSelections.length&nbsp;&lt;=&nbsp;0&quot;&gt;批量删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table&nbsp;:data=&quot;dataList&quot;&nbsp;border&nbsp;v-loading=&quot;dataListLoading&quot;&nbsp;@selection-change=&quot;selectionChangeHandle&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;width:&nbsp;100%;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;type=&quot;selection&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;50&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;brandId&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌id&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;name&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌名&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;logo&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;品牌logo地址&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;:src=&quot;scope.row.logo.indexOf(&#39;http&#39;)&nbsp;&gt;=&nbsp;0&nbsp;?&nbsp;scope.row.logo&nbsp;:&nbsp;defaultLogo&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;width:&nbsp;60px;&nbsp;height:&nbsp;60px&quot;&nbsp;/&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;descript&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;介绍&quot;&nbsp;width=&quot;170px&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;showStatus&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;显示状态&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;scope.row.showStatus&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&nbsp;@change=&quot;statusChanged(scope.row)&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;firstLetter&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;检索首字母&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;sort&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;排序&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;fixed=&quot;right&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;170&quot;&nbsp;label=&quot;操作&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;openRelation(scope.row.brandId)&quot;&gt;关联分类&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;addOrUpdateHandle(scope.row.brandId)&quot;&gt;修改&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;deleteHandle(scope.row.brandId)&quot;&gt;删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-pagination&nbsp;@size-change=&quot;sizeChangeHandle&quot;&nbsp;@current-change=&quot;currentChangeHandle&quot;&nbsp;:current-page=&quot;pageIndex&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:page-sizes=&quot;[10,&nbsp;20,&nbsp;50,&nbsp;100]&quot;&nbsp;:page-size=&quot;pageSize&quot;&nbsp;:total=&quot;totalPage&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layout=&quot;total,&nbsp;sizes,&nbsp;prev,&nbsp;pager,&nbsp;next,&nbsp;jumper&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-pagination&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;弹窗,&nbsp;新增&nbsp;/&nbsp;修改&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;add-or-update&nbsp;v-if=&quot;addOrUpdateVisible&quot;&nbsp;ref=&quot;addOrUpdate&quot;&nbsp;@refreshDataList=&quot;getDataList&quot;&gt;&lt;/add-or-update&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-dialog&nbsp;title=&quot;品牌关联分类&quot;&nbsp;:visible.sync=&quot;relationDialog&quot;&nbsp;width=&quot;40%&quot;&nbsp;:before-close=&quot;null&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-cascader&nbsp;v-model=&quot;relationCategoryPathIds&quot;&nbsp;:options=&quot;cascaderData&quot;&nbsp;:props=&quot;cascaderProps&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@change=&quot;cascaderChangeEven&quot;&nbsp;placeholder=&quot;添加分类&quot;&nbsp;:filterable=&quot;true&quot;&gt;&lt;/el-cascader&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table&nbsp;:data=&quot;currentBrandRelationCategorys&quot;&nbsp;border&nbsp;style=&quot;width:&nbsp;100%;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;id&quot;&nbsp;label=&quot;#&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;brandName&quot;&nbsp;label=&quot;品牌名&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;categoryName&quot;&nbsp;label=&quot;分类名&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;fixed=&quot;right&quot;&nbsp;label=&quot;操作&quot;&nbsp;width=&quot;120&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click.native.prevent=&quot;deleteRelation(scope)&quot;&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;移除\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;relationDialog&nbsp;=&nbsp;false&quot;&gt;关&nbsp;闭&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nimport&nbsp;AddOrUpdate&nbsp;from&nbsp;&#39;./brand-add-or-update&#39;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentBrandId:&nbsp;null,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cascaderProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;&#39;catId&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cascaderData:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentBrandRelationCategorys:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataForm:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;&#39;&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;relationCategoryPathIds:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataList:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageIndex:&nbsp;1,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageSize:&nbsp;10,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;totalPage:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListLoading:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListSelections:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateVisible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultLogo:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;relationDialog:&nbsp;false\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;components:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;AddOrUpdate\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;activated&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;deleteRelation&nbsp;(scope)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(scope.row)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`删除“${scope.row.brandName}”（品牌）-&gt;“${scope.row.categoryName}”（分类）关联,&nbsp;是否继续？`,&nbsp;&#39;提示&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/categorybrandrelation/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[scope.row.id]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;关联删除成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getBrandRelationCategorys()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;cascaderChangeEven&nbsp;(catelogPathIds)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;categoryId&nbsp;=&nbsp;catelogPathIds[catelogPathIds.length&nbsp;-&nbsp;1]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;brandId&nbsp;=&nbsp;this.currentBrandId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除选择记录\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.relationCategoryPathIds&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;this.currentBrandRelationCategorys.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;item&nbsp;=&nbsp;this.currentBrandRelationCategorys[i]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(item.categoryId&nbsp;===&nbsp;categoryId,&nbsp;item.brandId&nbsp;===&nbsp;brandId)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(item.categoryId&nbsp;===&nbsp;categoryId&nbsp;&amp;&amp;&nbsp;item.brandId&nbsp;===&nbsp;brandId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(&#39;已关联&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/categorybrandrelation/save&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;{&nbsp;&#39;brandId&#39;:&nbsp;brandId,&nbsp;&#39;categoryId&#39;:&nbsp;categoryId&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;关联分类成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getBrandRelationCategorys()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;getBrandRelationCategorys&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;请求当前品牌关联的分类\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/categorybrandrelation/list?brandId=${this.currentBrandId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.currentBrandRelationCategorys&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;openRelation&nbsp;(brandId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.currentBrandId&nbsp;=&nbsp;brandId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.relationDialog&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getBrandRelationCategorys()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;statusChanged&nbsp;(rowData)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/brand/update&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(rowData,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;状态修改成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取数据列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;getDataList&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/brand/list&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;page&#39;:&nbsp;this.pageIndex,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;limit&#39;:&nbsp;this.pageSize,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;key&#39;:&nbsp;this.dataForm.key\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;data.page.list\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;data.page.totalCount\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;每页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;sizeChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageSize&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;当前页\r\n&nbsp;&nbsp;&nbsp;&nbsp;currentChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;多选\r\n&nbsp;&nbsp;&nbsp;&nbsp;selectionChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListSelections&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;新增&nbsp;/&nbsp;修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addOrUpdateVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs.addOrUpdate.init(id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;删除\r\n&nbsp;&nbsp;&nbsp;&nbsp;deleteHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ids&nbsp;=&nbsp;id&nbsp;?&nbsp;[id]&nbsp;:&nbsp;this.dataListSelections.map(item&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;item.brandId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(`确定对[id=${ids.join(&#39;,&#39;)}]进行[${id&nbsp;?&nbsp;&#39;删除&#39;&nbsp;:&nbsp;&#39;批量删除&#39;}]操作?`,&nbsp;&#39;提示&#39;,&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/brand/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;使用递归，清除长度为0的children属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;clearNullChildrenArray&nbsp;(childArr)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;childArr.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(childArr[i].children&nbsp;==&nbsp;null&nbsp;||&nbsp;childArr[i].children.length&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;childArr[i].children\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearNullChildrenArray(childArr[i].children)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;开始递归\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(data.data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearNullChildrenArray(data.data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.cascaderData&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;</pre><p>需要用到的后端API，在上面代码中有了，主要思想：</p><p><code>pms_category_brand_relation</code> 是品牌与分类的关联表、</p><p>获取当前品牌所关联的分类列表、</p><p>将当前品牌与选择的分类进行关联、</p><p>在修改品牌信息时，需要维护<code>pms_category_brand_relation</code> 表的<code>brand_name</code>字段（事务）、</p><p>在修改三级分类信息时，需要维护<code>pms_category_brand_relation</code> 表的<code>category_name</code> 字段（事务）</p><h3>[<em>9</em>] 属性分类</h3><h4>[<em>9.1</em>] 属性分类：SPU与SKU的说明</h4><p><code>SPU</code> ：商品自身固定的属性</p><pre>Standard&nbsp;Product&nbsp;Unit&nbsp;标准化产品单元：是商品信息聚合的最小单位，是一组可复用、易检索的标准化信息的集合，该集合描述了一个产品的特性。</pre><p>SPU: Standard Product Unit（标准产品单位）</p><pre>-&nbsp;SPU&nbsp;是商品信息聚合的最小单位，是一组可复用、易检索的标准化信息的集合，该集合描述了一个产品的特性。&nbsp;&nbsp;\r\n-&nbsp;通俗点讲，属性值、特性相同的商品就可以称为一个&nbsp;SPU。&nbsp;&nbsp;\r\n-&nbsp;例如：iPhone&nbsp;12就是一个&nbsp;SPU，与商家，与颜色、款式、套餐都无关。</pre><p><code>SKU</code> :能决定库存的基本单位</p><pre>Stock&nbsp;Keeping&nbsp;Unit&nbsp;库存量单位：即库存进出计量的基本单元，可以是以件、盒等为单位。SKU这是对于大型连锁超市&nbsp;DC&nbsp;(配送中心)物流管理的一个必要的方法。现在已经被引申为产品统一编号的简称，每种产品均对应有唯一的SKU号。</pre><p>SKU: Stock Keeping Unit(库存量单位)</p><pre>-&nbsp;SKU&nbsp;即库存进出计量的单位，&nbsp;可以是以件、盒、托盘等为单位。&nbsp;&nbsp;\r\n-&nbsp;SKU&nbsp;是物理上不可分割的最小存货单元。在使用时要根据不同业态，不同管理模式来处理。&nbsp;&nbsp;在服装、鞋类商品中使用最多最普遍。</pre><p>例如： iPhone 12 的颜色(深空灰等)，存储容量(64GB 256GB)。</p><blockquote><p>举例说明：</p></blockquote><pre>iPhoneX&nbsp;是&nbsp;SPU、MI8&nbsp;是&nbsp;SPU</pre><p>iPhoneX 64G 黑曜石是 SKU<br/>MI8 8+64G 黑色是 SKU</p><p>基础属性【规格参数】与销售属性<br/>每个分类下的商品共享规格参数与销售属性。知识有些商品不一定要用这个分类下全部的属性。</p><ul class=\" list-paddingleft-2\"><li><p>属性是以三级分类组织起来的；</p></li><li><p>规格参数中有些是可以提供检索的；</p></li><li><p>规格参数也是基本属性，他们具有自己的分组；</p></li><li><p>属性的分组也是以三级分类组织起来的；</p></li><li><p>属性名是确定的，但是值是每一个商品不同决定的；</p></li></ul><p>商品的基础属性是SPU的特性，商品的销售属性是SKU的特性。</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603152996891660315299288.png\" alt=\"\"/></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603153096251660315309540.png\" alt=\"\"/></p><h4>[<em>9.2</em>] 属性分类：前端页面</h4><ol class=\" list-paddingleft-2\"><li><p>之前我们都需要在后端管理创建目录/菜单 那些的，为了不麻烦，我们直接执行sql，修改数据。</p><p><a href=\"https://github.com/18476305640/gulimall/blob/dev/%E6%96%87%E4%BB%B6%E4%BB%93%E5%82%A8/sql%E6%96%87%E4%BB%B6/data/sys_menus.sql\">https://github.com/18476305640/gulimall/blob/dev/文件仓储/sql文件/data/sys_menus.sql</a></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603156122651660315612037.png\" alt=\"\"/></p><p>在上面的数据库中执行sql，然后就有了</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603156556491660315655560.png\" alt=\"\"/></p><p>现在我们要生成数据vue组件，即要使用<code>renren-generator</code>模块生成前端的代码：</p><p><a href=\"https://github.com/18476305640/fileBox/raw/master/%E6%9D%82%E9%A1%B9/renren_5.zip\">https://github.com/18476305640/fileBox/raw/master/杂项/renren_5.zip</a></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603160227511660316022386.png\" alt=\"\"/></p><p>得到这两个文件后，放在<code>src\\views\\modules\\product</code> 目录下：在<code>attgroup.vue</code> 组件的左边添加三级分类：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16603161435001660316143386.png\" alt=\"\"/></p><p>那首先我们需要封装左边的组件category.vue，然后在<code>attgroup.vue</code>组成上注册category组件，然后放在<code>attgroup.vue</code>上：</p><p>创建组件：</p><p><code>src\\views\\modules\\common\\category.vue</code> ：没有之前三级分类的一些内容，只显示分类树即可。</p></li></ol><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tree&nbsp;:data=&quot;data&quot;&nbsp;:props=&quot;defaultProps&quot;&nbsp;@node-click=&quot;handleNodeClick&quot;&nbsp;:expand-on-click-node=&quot;false&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-key=&quot;catId&quot;&nbsp;:default-expanded-keys=&quot;expandedKey&quot;&nbsp;ref=&quot;categoryTree&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tree&gt;\r\n\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expandedKey:&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getMenus()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;getMenus&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(&quot;数据收到了&quot;,&nbsp;data.data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick&nbsp;(data,&nbsp;node,&nbsp;vc)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(data,&nbsp;node,&nbsp;vc)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;tree-node-click&#39;,&nbsp;data,&nbsp;node,&nbsp;vc)\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;style&gt;\r\n.drop-control&nbsp;{\r\n&nbsp;&nbsp;display:&nbsp;flex;\r\n&nbsp;&nbsp;align-items:&nbsp;center;\r\n&nbsp;&nbsp;height:&nbsp;40px;\r\n}\r\n&lt;/style&gt;</pre><pre>然后通过子传父，即当树的节点点击后，在触发的函数中，向父组件发送事件</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;handleNodeClick&nbsp;(data,&nbsp;node,&nbsp;vc)&nbsp;{&nbsp;//子节点点击触发的函数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(data,&nbsp;node,&nbsp;vc)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;tree-node-click&#39;,&nbsp;data,&nbsp;node,&nbsp;vc)\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><h4>[<em>9.3</em>] 属性分类：后端查询接口与前端整合</h4><p>完成效果：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1661180030746%E5%8A%A8%E7%94%BB.apng\" alt=\"\"/></p><p>需要到的请求：</p><pre>###\r\nGET&nbsp;http://localhost/api/product/attrgroup/list/0?page=1&amp;limit=3&amp;key=小王&nbsp;HTTP/1.1&nbsp;\r\nContent-Type:&nbsp;application/json</pre><p>后端需要实现：需要查询catelogId（当catelogId为0时，查询全部tatelogId的产品属性），key可以查询是否等于<code>attr_group_id</code> 或来模糊查询<code>attr_group_name</code></p><pre>select&nbsp;*&nbsp;from&nbsp;pms_attr_group&nbsp;where&nbsp;catelog_id=?&nbsp;and&nbsp;(attr_group_id=key&nbsp;or&nbsp;attr_group_name&nbsp;like&nbsp;%key%)</pre><ol class=\" list-paddingleft-2\"><li><p>后端接口编写：</p><p><code>com.zhuangjie.gulimall.product.controller.AttrGroupController.java</code></p></li></ol><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/list/{catelogId}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;list(@RequestParam&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;params,&nbsp;@PathVariable(&quot;catelogId&quot;)&nbsp;Long&nbsp;catelogId){\r\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PageUtils&nbsp;page&nbsp;=&nbsp;attrGroupService.queryPage(params);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PageUtils&nbsp;page&nbsp;=&nbsp;attrGroupService.queryPage(params,catelogId);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;page&quot;,&nbsp;page);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><pre>&nbsp;&nbsp;`com.zhuangjie.gulimall.product.service.AttrGroupService.java`</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;PageUtils&nbsp;queryPage(Map&lt;String,&nbsp;Object&gt;&nbsp;params,&nbsp;Long&nbsp;catelogId);</pre><pre>&nbsp;&nbsp;`com.zhuangjie.gulimall.product.service.impl.AttrGroupServiceImpl.java`</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;PageUtils&nbsp;queryPage(Map&lt;String,&nbsp;Object&gt;&nbsp;params,&nbsp;Long&nbsp;catelogId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;key&nbsp;=&nbsp;(String)&nbsp;params.get(&quot;key&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;select&nbsp;*&nbsp;from&nbsp;pms_attr_group&nbsp;where&nbsp;catelog_id=?&nbsp;and&nbsp;(attr_group_id=key&nbsp;or&nbsp;attr_group_name&nbsp;like&nbsp;%key%)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QueryWrapper&lt;AttrGroupEntity&gt;&nbsp;queryWrapper&nbsp;=&nbsp;new&nbsp;QueryWrapper&lt;&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;queryWrapper.eq(catelogId!=0,&quot;catelog_id&quot;,catelogId).and(qw-&gt;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qw.eq(&quot;attr_group_id&quot;,key).or().like(&quot;attr_group_name&quot;,key);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPage&lt;AttrGroupEntity&gt;&nbsp;page&nbsp;=&nbsp;&nbsp;this.page(new&nbsp;Query&lt;AttrGroupEntity&gt;().getPage(params),&nbsp;queryWrapper);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;PageUtils(page);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><ol start=\"2\" class=\" list-paddingleft-2\"><li><p>前端接入</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16611809988861661180998576.png\" alt=\"\"/></p><p><code>src\\views\\modules\\product\\attrgroup.vue</code></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16611812179861661181217831.png\" alt=\"\"/></p></li></ol><h4>[<em>9.4</em>] 属性分类：完善修改功能</h4><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16612356727091661235672294.png\" alt=\"\"/></p><p>完善的目标如上，<code>所属分类id</code> 由原来的值修改改为级联的方式，可搜索/选择修改。</p><p><code>src\\views\\modules\\product\\attrgroup-add-or-update.vue</code></p><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;el-dialog&nbsp;:title=&quot;!dataForm.attrGroupId&nbsp;?&nbsp;&#39;新增&#39;&nbsp;:&nbsp;&#39;修改&#39;&quot;&nbsp;:close-on-click-modal=&quot;false&quot;&nbsp;:visible.sync=&quot;visible&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@closed=&quot;dialogClosedEven&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;:model=&quot;dataForm&quot;&nbsp;:rules=&quot;dataRule&quot;&nbsp;ref=&quot;dataForm&quot;&nbsp;@keyup.enter.native=&quot;dataFormSubmit()&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label-width=&quot;100px&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;组名&quot;&nbsp;prop=&quot;attrGroupName&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.attrGroupName&quot;&nbsp;placeholder=&quot;组名&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;排序&quot;&nbsp;prop=&quot;sort&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.sort&quot;&nbsp;placeholder=&quot;排序&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;描述&quot;&nbsp;prop=&quot;descript&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.descript&quot;&nbsp;placeholder=&quot;描述&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;组图标&quot;&nbsp;prop=&quot;icon&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.icon&quot;&nbsp;placeholder=&quot;组图标&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;所属分类id&quot;&nbsp;prop=&quot;catelogId&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.catelogId&quot;&nbsp;placeholder=&quot;所属分类id&quot;&gt;&lt;/el-input&gt;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;v-model=&quot;dataForm.catelogId&quot;&nbsp;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-cascader&nbsp;v-model=&quot;dataForm.catelogPathIds&quot;&nbsp;:options=&quot;cascaderData&quot;&nbsp;:props=&quot;cascaderProps&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@change=&quot;cascaderChangeEven&quot;&nbsp;placeholder=&quot;试试搜索：手机&quot;&nbsp;:filterable=&quot;true&quot;&gt;&lt;/el-cascader&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;visible&nbsp;=&nbsp;false&quot;&gt;取消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;dataFormSubmit()&quot;&gt;确定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cascaderProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;&#39;catId&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cascaderData:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataForm:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrGroupId:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrGroupName:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;descript:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;icon:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catelogId:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catelogPathIds:&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataRule:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrGroupName:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;组名不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;排序不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;descript:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;描述不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;icon:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;组图标不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catelogId:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;所属分类id不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;cascaderChangeEven&nbsp;(even)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogId&nbsp;=&nbsp;even[even.length&nbsp;-&nbsp;1]\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;dialogClosedEven&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogPathIds&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;init&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrGroupId&nbsp;=&nbsp;id&nbsp;||&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].resetFields()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dataForm.attrGroupId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/attrgroup/info/${this.dataForm.attrGroupId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrGroupName&nbsp;=&nbsp;data.attrGroup.attrGroupName\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.sort&nbsp;=&nbsp;data.attrGroup.sort\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.descript&nbsp;=&nbsp;data.attrGroup.descript\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.icon&nbsp;=&nbsp;data.attrGroup.icon\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogId&nbsp;=&nbsp;data.attrGroup.catelogId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogPathIds&nbsp;=&nbsp;data.attrGroup.catelogPath\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;表单提交\r\n&nbsp;&nbsp;&nbsp;&nbsp;dataFormSubmit&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].validate((valid)&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(valid)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/attrgroup/${!this.dataForm.attrGroupId&nbsp;?&nbsp;&#39;save&#39;&nbsp;:&nbsp;&#39;update&#39;}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;attrGroupId&#39;:&nbsp;this.dataForm.attrGroupId&nbsp;||&nbsp;undefined,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;attrGroupName&#39;:&nbsp;this.dataForm.attrGroupName,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;sort&#39;:&nbsp;this.dataForm.sort,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;descript&#39;:&nbsp;this.dataForm.descript,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;icon&#39;:&nbsp;this.dataForm.icon,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;catelogId&#39;:&nbsp;this.dataForm.catelogPathIds[this.dataForm.catelogPathIds.length&nbsp;-&nbsp;1]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;refreshDataList&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;created&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;使用递归，清除长度为0的children属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;clearNullChildrenArray&nbsp;(childArr)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;childArr.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(childArr[i].children&nbsp;==&nbsp;null&nbsp;||&nbsp;childArr[i].children.length&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;childArr[i].children\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearNullChildrenArray(childArr[i].children)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;开始递归\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(data.data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearNullChildrenArray(data.data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.cascaderData&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;</pre><p>1、如何实现将值修改改为<code>Cascader 级联选择器</code> 的方式？</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;所属分类id&quot;&nbsp;prop=&quot;catelogId&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.catelogId&quot;&nbsp;placeholder=&quot;所属分类id&quot;&gt;&lt;/el-input&gt;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-cascader&nbsp;v-model=&quot;dataForm.catelogPathIds&quot;&nbsp;:options=&quot;cascaderData&quot;&nbsp;:props=&quot;cascaderProps&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@change=&quot;cascaderChangeEven&quot;&nbsp;placeholder=&quot;试试搜索：手机&quot;&nbsp;:filterable=&quot;true&quot;&gt;&lt;/el-cascader&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;</pre><p>需要用到<code>&lt;el-cascader&gt;</code> 来替换<code>&lt;el-input&gt;</code>, 先不要写<code> v-model=&quot;dataForm.catelogPathIds&quot;</code> 这个，先请求三级菜单数据作为<code>cascaderData</code>：</p><pre>//&nbsp;生命周期方法\r\ncreated&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;使用递归，清除长度为0的children属性，不然级联显示将有问题\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;clearNullChildrenArray&nbsp;(childArr)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;childArr.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(childArr[i].children&nbsp;==&nbsp;null&nbsp;||&nbsp;childArr[i].children.length&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;childArr[i].children\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearNullChildrenArray(childArr[i].children)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;开始递归\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(data.data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearNullChildrenArray(data.data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;将值放在&nbsp;cascaderData&nbsp;&nbsp;中\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.cascaderData&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;}</pre><p><code>cascaderProps</code> 为配置对象：(表示<code>catId</code>为 代表该项的的值，<code>name</code>表示级联项显示的值)</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cascaderProps:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;&#39;catId&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</pre><p>属性：<code>v-model=&quot;dataForm.catelogPathIds&quot;</code></p><p><code>catelogPathIds</code> 的值是在数据回显时，后端多加一个属性，因为<code>catelogPathIds</code> 的值是一个数组，表示的是 路径上的id ,如果要显示的是category的id为3的属性分组，则扩展的属性为 [1,2,3]赋给<code>catelogPathIds</code></p><p>后端API：在根据attrGroupId查询属性分组时，会返回该属性分组对应的categoryId及路径的id，最终形成一个数组。</p><p><code>com.zhuangjie.gulimall.product.controller.AttrGroupController.java</code></p><pre>\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/info/{attrGroupId}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;info(@PathVariable(&quot;attrGroupId&quot;)&nbsp;Long&nbsp;attrGroupId){\r\n&nbsp;&nbsp;&nbsp;&nbsp;AttrGroupEntity&nbsp;attrGroup&nbsp;=&nbsp;attrGroupService.getById(attrGroupId);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Long[]&nbsp;pathIds&nbsp;=&nbsp;new&nbsp;Long[3];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pathIds[2]&nbsp;&nbsp;=&nbsp;attrGroup.getCatelogId();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;1;&nbsp;i&nbsp;&gt;=&nbsp;0;&nbsp;i--)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pathIds[i]&nbsp;=&nbsp;categoryService.getById(pathIds[i+1]).getParentCid();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrGroup.setCatelogPath(pathIds);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;attrGroup&quot;,&nbsp;attrGroup);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p><code>com.zhuangjie.gulimall.product.entity.AttrGroupEntity.java</code>: 添加属性catelogPath，并添加属性@TableField(exist = false)表示，在表中该字段不存在。</p><pre>/**\r\n&nbsp;*&nbsp;属性分组\r\n&nbsp;*&nbsp;\r\n&nbsp;*&nbsp;@author&nbsp;zhuangjie\r\n&nbsp;*&nbsp;@email&nbsp;2119299531@qq.com\r\n&nbsp;*&nbsp;@date&nbsp;2022-07-21&nbsp;20:01:13\r\n&nbsp;*/\r\n@Data\r\n@TableName(&quot;pms_attr_group&quot;)\r\npublic&nbsp;class&nbsp;AttrGroupEntity&nbsp;implements&nbsp;Serializable&nbsp;{\r\n&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;long&nbsp;serialVersionUID&nbsp;=&nbsp;1L;\r\n\r\n....\r\n\r\n&nbsp;&nbsp;@TableField(exist&nbsp;=&nbsp;false)\r\n&nbsp;&nbsp;private&nbsp;Long[]&nbsp;catelogPath;\r\n\r\n}</pre><p>前端：前端请求后的操作</p><pre>init&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrGroupId&nbsp;=&nbsp;id&nbsp;||&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].resetFields()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dataForm.attrGroupId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/attrgroup/info/${this.dataForm.attrGroupId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrGroupName&nbsp;=&nbsp;data.attrGroup.attrGroupName\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.sort&nbsp;=&nbsp;data.attrGroup.sort\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.descript&nbsp;=&nbsp;data.attrGroup.descript\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.icon&nbsp;=&nbsp;data.attrGroup.icon\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogId&nbsp;=&nbsp;data.attrGroup.catelogId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogPathIds&nbsp;=&nbsp;data.attrGroup.catelogPath\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},</pre><p>当表单提交时：</p><pre>//&nbsp;表单提交\r\n&nbsp;&nbsp;&nbsp;&nbsp;dataFormSubmit&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].validate((valid)&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(valid)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/attrgroup/${!this.dataForm.attrGroupId&nbsp;?&nbsp;&#39;save&#39;&nbsp;:&nbsp;&#39;update&#39;}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;attrGroupId&#39;:&nbsp;this.dataForm.attrGroupId&nbsp;||&nbsp;undefined,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;attrGroupName&#39;:&nbsp;this.dataForm.attrGroupName,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;sort&#39;:&nbsp;this.dataForm.sort,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;descript&#39;:&nbsp;this.dataForm.descript,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;icon&#39;:&nbsp;this.dataForm.icon,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;catelogId&#39;:&nbsp;this.dataForm.catelogPathIds[this.dataForm.catelogPathIds.length&nbsp;-&nbsp;1]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;refreshDataList&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><h3>[<em>10</em>] 规格属性与销售属性</h3><p><strong>前台：</strong></p><p><code>src\\views\\modules\\common</code> 目录下：</p><ul class=\" list-paddingleft-2\"><li><p>category-cascader.vue</p></li></ul><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;!--&nbsp;\r\n使用说明：\r\n1）、引入category-cascader.vue\r\n2）、语法：&lt;category-cascader&nbsp;:catelogPath.sync=&quot;catelogPath&quot;&gt;&lt;/category-cascader&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;解释：\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catelogPath：指定的值是cascader初始化需要显示的值，应该和父组件的catelogPath绑定;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于有sync修饰符，所以cascader路径变化以后自动会修改父的catelogPath，这是结合子组件this.$emit(&quot;update:catelogPath&quot;,v);做的\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;\r\n&nbsp;&nbsp;&lt;div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-cascader&nbsp;filterable&nbsp;clearable&nbsp;placeholder=&quot;试试搜索：手机&quot;&nbsp;v-model=&quot;paths&quot;&nbsp;:options=&quot;categorys&quot;&nbsp;:props=&quot;setting&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-cascader&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\n//&nbsp;这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;//&nbsp;import引入的组件需要注入到对象中才能使用\r\n&nbsp;&nbsp;components:&nbsp;{},\r\n&nbsp;&nbsp;//&nbsp;接受父组件传来的值\r\n&nbsp;&nbsp;props:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;catelogPath:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Array,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这里存放数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setting:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;&#39;catId&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;&#39;name&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;&#39;children&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;categorys:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paths:&nbsp;this.catelogPath\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;watch:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;catelogPath&nbsp;(v)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.paths&nbsp;=&nbsp;this.catelogPath\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;paths&nbsp;(v)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;update:catelogPath&#39;,&nbsp;v)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;还可以使用pubsub-js进行传值\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;this.PubSub.publish(&#39;catPath&#39;,&nbsp;v)\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;//&nbsp;方法集合\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;getCategorys&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/category/list/tree&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;使用递归，清除长度为0的children属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;clearNullChildrenArray&nbsp;(childArr)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;childArr.length;&nbsp;i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(childArr[i].children&nbsp;==&nbsp;null&nbsp;||&nbsp;childArr[i].children.length&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;childArr[i].children\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearNullChildrenArray(childArr[i].children)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;开始递归\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearNullChildrenArray(data.data)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.categorys&nbsp;=&nbsp;data.data\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;//&nbsp;生命周期&nbsp;-&nbsp;创建完成（可以访问当前this实例）\r\n&nbsp;&nbsp;created&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getCategorys()\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n&lt;style&nbsp;scoped&gt;\r\n&lt;/style&gt;</pre><p><code>src\\views\\modules\\product</code> 目录下：</p><ul class=\" list-paddingleft-2\"><li><p>attr-add-or-update.vue</p></li></ul><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;el-dialog&nbsp;:title=&quot;!dataForm.id&nbsp;?&nbsp;&#39;新增&#39;&nbsp;:&nbsp;&#39;修改&#39;&quot;&nbsp;:close-on-click-modal=&quot;false&quot;&nbsp;:visible.sync=&quot;visible&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@closed=&quot;dialogClose&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;:model=&quot;dataForm&quot;&nbsp;:rules=&quot;dataRule&quot;&nbsp;ref=&quot;dataForm&quot;&nbsp;label-width=&quot;120px&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@keyup.enter.native=&quot;dataFormSubmit()&quot;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;属性名&quot;&nbsp;prop=&quot;attrName&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.attrName&quot;&nbsp;placeholder=&quot;属性名&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;属性类型&quot;&nbsp;prop=&quot;attrType&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-select&nbsp;v-model=&quot;dataForm.attrType&quot;&nbsp;placeholder=&quot;请选择&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-option&nbsp;label=&quot;规格参数&quot;&nbsp;:value=&quot;1&quot;&gt;&lt;/el-option&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-option&nbsp;label=&quot;销售属性&quot;&nbsp;:value=&quot;0&quot;&gt;&lt;/el-option&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-select&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;值类型&quot;&nbsp;prop=&quot;valueType&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;dataForm.valueType&quot;&nbsp;active-text=&quot;允许多个值&quot;&nbsp;inactive-text=&quot;只能单个值&quot;&nbsp;active-color=&quot;#13ce66&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:inactive-value=&quot;0&quot;&nbsp;:active-value=&quot;1&quot;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;可选值&quot;&nbsp;prop=&quot;valueSelect&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.valueSelect&quot;&gt;&lt;/el-input&gt;&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-select&nbsp;v-model=&quot;dataForm.valueSelect&quot;&nbsp;multiple&nbsp;filterable&nbsp;allow-create&nbsp;placeholder=&quot;请输入内容&quot;&gt;&lt;/el-select&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;属性图标&quot;&nbsp;prop=&quot;icon&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.icon&quot;&nbsp;placeholder=&quot;属性图标&quot;&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;所属分类&quot;&nbsp;prop=&quot;catelogId&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;category-cascader&nbsp;:catelogPath.sync=&quot;catelogPath&quot;&gt;&lt;/category-cascader&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;所属分组&quot;&nbsp;prop=&quot;attrGroupId&quot;&nbsp;v-if=&quot;type&nbsp;==&nbsp;1&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-select&nbsp;ref=&quot;groupSelect&quot;&nbsp;v-model=&quot;dataForm.attrGroupId&quot;&nbsp;placeholder=&quot;请选择&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-option&nbsp;v-for=&quot;item&nbsp;in&nbsp;attrGroups&quot;&nbsp;:key=&quot;item.attrGroupId&quot;&nbsp;:label=&quot;item.attrGroupName&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:value=&quot;item.attrGroupId&quot;&gt;&lt;/el-option&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-select&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;可检索&quot;&nbsp;prop=&quot;searchType&quot;&nbsp;v-if=&quot;type&nbsp;==&nbsp;1&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;dataForm.searchType&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;快速展示&quot;&nbsp;prop=&quot;showDesc&quot;&nbsp;v-if=&quot;type&nbsp;==&nbsp;1&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;dataForm.showDesc&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&nbsp;label=&quot;启用状态&quot;&nbsp;prop=&quot;enable&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-switch&nbsp;v-model=&quot;dataForm.enable&quot;&nbsp;active-color=&quot;#13ce66&quot;&nbsp;inactive-color=&quot;#ff4949&quot;&nbsp;:active-value=&quot;1&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inactive-value=&quot;0&quot;&gt;&lt;/el-switch&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;slot=&quot;footer&quot;&nbsp;class=&quot;dialog-footer&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;visible&nbsp;=&nbsp;false&quot;&gt;取消&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;dataFormSubmit()&quot;&gt;确定&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;\r\n&nbsp;&nbsp;&lt;/el-dialog&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\nimport&nbsp;CategoryCascader&nbsp;from&nbsp;&#39;../common/category-cascader&#39;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visible:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataForm:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrId:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrName:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchType:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valueType:&nbsp;1,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;icon:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valueSelect:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrType:&nbsp;1,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;1,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catelogId:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrGroupId:&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showDesc:&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catelogPath:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrGroups:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataRule:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrName:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;属性名不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchType:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:&nbsp;true,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;是否需要检索不能为空&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valueType:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:&nbsp;true,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;值类型不能为空&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;icon:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;required:&nbsp;true,&nbsp;message:&nbsp;&#39;属性图标不能为空&#39;,&nbsp;trigger:&nbsp;&#39;blur&#39;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrType:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:&nbsp;true,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;属性类型不能为空&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:&nbsp;true,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;启用状态不能为空&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catelogId:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:&nbsp;true,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;需要选择正确的三级分类数据&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showDesc:&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:&nbsp;true,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;快速展示不能为空&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;&#39;blur&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;props:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Number,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;watch:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;catelogPath&nbsp;(path)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;监听到路径变化需要查出这个三级分类的分组信息\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;路径变了&#39;,&nbsp;path)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.attrGroups&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrGroupId&nbsp;=&nbsp;&#39;&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogId&nbsp;=&nbsp;path[path.length&nbsp;-&nbsp;1]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(path&nbsp;&amp;&amp;&nbsp;path.length&nbsp;===&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`/product/attrgroup/list/${path[path.length&nbsp;-&nbsp;1]}`\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams({&nbsp;page:&nbsp;1,&nbsp;limit:&nbsp;10000000&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(data.page.list)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.attrGroups&nbsp;=&nbsp;data.page.list\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(path.length&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogId&nbsp;=&nbsp;&#39;&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(&#39;请选择正确的分类&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogId&nbsp;=&nbsp;&#39;&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;components:&nbsp;{&nbsp;CategoryCascader&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;init&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrId&nbsp;=&nbsp;id&nbsp;||&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrType&nbsp;=&nbsp;this.type\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].resetFields()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this.dataForm.attrId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`/product/attr/info/${this.dataForm.attrId}`\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrName&nbsp;=&nbsp;data.attrVo.attrName\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.searchType&nbsp;=&nbsp;data.attrVo.searchType\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.valueType&nbsp;=&nbsp;data.attrVo.valueType\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.icon&nbsp;=&nbsp;data.attrVo.icon\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.valueSelect&nbsp;=&nbsp;data.attrVo.valueSelect.split(&#39;;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrType&nbsp;=&nbsp;data.attrVo.attrType\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.enable&nbsp;=&nbsp;data.attrVo.enable\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.catelogId&nbsp;=&nbsp;data.attrVo.catelogId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.showDesc&nbsp;=&nbsp;data.attrVo.showDesc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.catelogPath&nbsp;=&nbsp;data.attrVo.catelogIdPath&nbsp;!=&nbsp;null&nbsp;?&nbsp;data.attrVo.catelogIdPath&nbsp;:&nbsp;[]\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataForm.attrGroupId&nbsp;=&nbsp;data.attrVo.attrGroupId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;表单提交\r\n&nbsp;&nbsp;&nbsp;&nbsp;dataFormSubmit&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs[&#39;dataForm&#39;].validate(valid&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(valid)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`/product/attr/${!this.dataForm.attrId&nbsp;?&nbsp;&#39;save&#39;&nbsp;:&nbsp;&#39;update&#39;}`\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrId:&nbsp;this.dataForm.attrId&nbsp;||&nbsp;undefined,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrName:&nbsp;this.dataForm.attrName,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchType:&nbsp;this.dataForm.searchType,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valueType:&nbsp;this.dataForm.valueType,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;icon:&nbsp;this.dataForm.icon,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valueSelect:&nbsp;this.dataForm.valueSelect.join(&#39;;&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrType:&nbsp;this.dataForm.attrType,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enable:&nbsp;this.dataForm.enable,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catelogId:&nbsp;this.dataForm.catelogId,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrGroupId:&nbsp;this.dataForm.attrGroupId,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showDesc:&nbsp;this.dataForm.showDesc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.visible&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$emit(&#39;refreshDataList&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;dialogClose\r\n&nbsp;&nbsp;&nbsp;&nbsp;dialogClose&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.catelogPath&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;</pre><ul class=\" list-paddingleft-2\"><li><p>baseattr.vue</p></li></ul><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;el-row&nbsp;:gutter=&quot;20&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-col&nbsp;:span=&quot;6&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;category&nbsp;@tree-node-click=&quot;treenodeclick&quot;&gt;&lt;/category&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-col&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-col&nbsp;:span=&quot;18&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;mod-config&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;:inline=&quot;true&quot;&nbsp;:model=&quot;dataForm&quot;&nbsp;@keyup.enter.native=&quot;getDataList()&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.key&quot;&nbsp;placeholder=&quot;参数名&quot;&nbsp;clearable&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;getDataList()&quot;&gt;查询&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;success&quot;&nbsp;@click=&quot;getAllDataList()&quot;&gt;查询全部&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;product:attr:save&#39;)&quot;&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;addOrUpdateHandle()&quot;&gt;新增&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;product:attr:delete&#39;)&quot;&nbsp;type=&quot;danger&quot;&nbsp;@click=&quot;deleteHandle()&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:disabled=&quot;dataListSelections.length&nbsp;&lt;=&nbsp;0&quot;&gt;批量删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table&nbsp;:data=&quot;dataList&quot;&nbsp;border&nbsp;v-loading=&quot;dataListLoading&quot;&nbsp;@selection-change=&quot;selectionChangeHandle&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;width:&nbsp;100%;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;type=&quot;selection&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;50&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;attrId&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;id&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;attrName&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;属性名&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;v-if=&quot;attrtype&nbsp;==&nbsp;1&quot;&nbsp;prop=&quot;searchType&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;可检索&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-success&quot;&nbsp;v-if=&quot;scope.row.searchType&nbsp;==&nbsp;1&quot;&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-error&quot;&nbsp;v-else&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;valueType&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;值类型&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tag&nbsp;type=&quot;success&quot;&nbsp;v-if=&quot;scope.row.valueType&nbsp;==&nbsp;0&quot;&gt;单选&lt;/el-tag&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tag&nbsp;v-else&gt;多选&lt;/el-tag&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;icon&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;图标&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;valueSelect&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;可选值&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tooltip&nbsp;placement=&quot;top&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;slot=&quot;content&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;v-for=&quot;(i,&nbsp;index)&nbsp;in&nbsp;scope.row.valueSelect.split(&#39;;&#39;)&quot;&nbsp;:key=&quot;index&quot;&gt;{{&nbsp;i&nbsp;}}&lt;br&nbsp;/&gt;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tag&gt;{{&nbsp;scope.row.valueSelect.split(&quot;;&quot;)[0]&nbsp;+&nbsp;&quot;&nbsp;...&quot;&nbsp;}}&lt;/el-tag&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tooltip&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;enable&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;启用&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-success&quot;&nbsp;v-if=&quot;scope.row.enable&nbsp;==&nbsp;1&quot;&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-error&quot;&nbsp;v-else&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;catelogName&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;所属分类&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;v-if=&quot;attrtype&nbsp;==&nbsp;1&quot;&nbsp;prop=&quot;attrGroupName&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;所属分组&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;v-if=&quot;attrtype&nbsp;==&nbsp;1&quot;&nbsp;prop=&quot;showDesc&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;快速展示&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-success&quot;&nbsp;v-if=&quot;scope.row.showDesc&nbsp;==&nbsp;1&quot;&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-error&quot;&nbsp;v-else&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;fixed=&quot;right&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;150&quot;&nbsp;label=&quot;操作&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;addOrUpdateHandle(scope.row.attrId)&quot;&gt;修改&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;deleteHandle(scope.row.attrId)&quot;&gt;删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-pagination&nbsp;@size-change=&quot;sizeChangeHandle&quot;&nbsp;@current-change=&quot;currentChangeHandle&quot;&nbsp;:current-page=&quot;pageIndex&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:page-sizes=&quot;[10,&nbsp;20,&nbsp;50,&nbsp;100]&quot;&nbsp;:page-size=&quot;pageSize&quot;&nbsp;:total=&quot;totalPage&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layout=&quot;total,&nbsp;sizes,&nbsp;prev,&nbsp;pager,&nbsp;next,&nbsp;jumper&quot;&gt;&lt;/el-pagination&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;弹窗,&nbsp;新增&nbsp;/&nbsp;修改&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;add-or-update&nbsp;:type=&quot;attrtype&quot;&nbsp;v-if=&quot;addOrUpdateVisible&quot;&nbsp;ref=&quot;addOrUpdate&quot;&nbsp;@refreshDataList=&quot;getDataList&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/add-or-update&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-col&gt;\r\n&nbsp;&nbsp;&lt;/el-row&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\n//&nbsp;这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\r\nimport&nbsp;Category&nbsp;from&nbsp;&#39;../common/category&#39;\r\nimport&nbsp;AddOrUpdate&nbsp;from&nbsp;&#39;./attr-add-or-update&#39;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;//&nbsp;import引入的组件需要注入到对象中才能使用\r\n&nbsp;&nbsp;components:&nbsp;{&nbsp;Category,&nbsp;AddOrUpdate&nbsp;},\r\n&nbsp;&nbsp;props:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;attrtype:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Number,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catId:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;1,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataForm:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;&#39;&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataList:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageIndex:&nbsp;1,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageSize:&nbsp;10,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;totalPage:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListLoading:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListSelections:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateVisible:&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;activated&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;感知树节点被点击\r\n&nbsp;&nbsp;&nbsp;&nbsp;treenodeclick&nbsp;(data,&nbsp;node,&nbsp;component)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.level&nbsp;===&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.catId&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()&nbsp;//&nbsp;重新查询\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;getAllDataList&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.catId&nbsp;=&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取数据列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;getDataList&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;type&nbsp;=&nbsp;this.attrtype&nbsp;===&nbsp;0&nbsp;?&nbsp;&#39;sale&#39;&nbsp;:&nbsp;&#39;base&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;根据三级分类id、key、分页信息查找属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/attr/${type}/list/${this.catId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page:&nbsp;this.pageIndex,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;limit:&nbsp;this.pageSize,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;this.dataForm.key\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;data.page.list\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;data.page.totalCount\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;每页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;sizeChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageSize&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;当前页\r\n&nbsp;&nbsp;&nbsp;&nbsp;currentChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;多选\r\n&nbsp;&nbsp;&nbsp;&nbsp;selectionChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListSelections&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;新增&nbsp;/&nbsp;修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addOrUpdateVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs.addOrUpdate.init(id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;删除\r\n&nbsp;&nbsp;&nbsp;&nbsp;deleteHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ids&nbsp;=&nbsp;id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;[id]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;this.dataListSelections.map(item&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;item.attrId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`确定对[id=${ids.join(&#39;,&#39;)}]进行[${id&nbsp;?&nbsp;&#39;删除&#39;&nbsp;:&nbsp;&#39;批量删除&#39;}]操作?`,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;提示&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/attr/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n&lt;style&nbsp;scoped&gt;\r\n&lt;/style&gt;</pre><ul class=\" list-paddingleft-2\"><li><p>saleattr.vue：与baseattr.vue只有几点的差异，就属性类型，销售属性0，规格属性1</p></li></ul><pre>&lt;template&gt;\r\n&nbsp;&nbsp;&lt;el-row&nbsp;:gutter=&quot;20&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-col&nbsp;:span=&quot;6&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;category&nbsp;@tree-node-click=&quot;treenodeclick&quot;&gt;&lt;/category&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-col&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-col&nbsp;:span=&quot;18&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;mod-config&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form&nbsp;:inline=&quot;true&quot;&nbsp;:model=&quot;dataForm&quot;&nbsp;@keyup.enter.native=&quot;getDataList()&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-input&nbsp;v-model=&quot;dataForm.key&quot;&nbsp;placeholder=&quot;参数名&quot;&nbsp;clearable&gt;&lt;/el-input&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;@click=&quot;getDataList()&quot;&gt;查询&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;success&quot;&nbsp;@click=&quot;getAllDataList()&quot;&gt;查询全部&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;product:attr:save&#39;)&quot;&nbsp;type=&quot;primary&quot;&nbsp;@click=&quot;addOrUpdateHandle()&quot;&gt;新增&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;v-if=&quot;isAuth(&#39;product:attr:delete&#39;)&quot;&nbsp;type=&quot;danger&quot;&nbsp;@click=&quot;deleteHandle()&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:disabled=&quot;dataListSelections.length&nbsp;&lt;=&nbsp;0&quot;&gt;批量删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form-item&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-form&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table&nbsp;:data=&quot;dataList&quot;&nbsp;border&nbsp;v-loading=&quot;dataListLoading&quot;&nbsp;@selection-change=&quot;selectionChangeHandle&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;width:&nbsp;100%;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;type=&quot;selection&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;50&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;attrId&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;id&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;attrName&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;属性名&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;v-if=&quot;attrtype&nbsp;==&nbsp;1&quot;&nbsp;prop=&quot;searchType&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;可检索&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-success&quot;&nbsp;v-if=&quot;scope.row.searchType&nbsp;==&nbsp;1&quot;&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-error&quot;&nbsp;v-else&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;valueType&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;值类型&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tag&nbsp;type=&quot;success&quot;&nbsp;v-if=&quot;scope.row.valueType&nbsp;==&nbsp;0&quot;&gt;单选&lt;/el-tag&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tag&nbsp;v-else&gt;多选&lt;/el-tag&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;icon&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;图标&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;valueSelect&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;可选值&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tooltip&nbsp;placement=&quot;top&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;slot=&quot;content&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;v-for=&quot;(i,&nbsp;index)&nbsp;in&nbsp;scope.row.valueSelect.split(&#39;;&#39;)&quot;&nbsp;:key=&quot;index&quot;&gt;{{&nbsp;i&nbsp;}}&lt;br&nbsp;/&gt;&lt;/span&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tag&gt;{{&nbsp;scope.row.valueSelect.split(&quot;;&quot;)[0]&nbsp;+&nbsp;&quot;&nbsp;...&quot;&nbsp;}}&lt;/el-tag&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tooltip&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;enable&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;启用&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-success&quot;&nbsp;v-if=&quot;scope.row.enable&nbsp;==&nbsp;1&quot;&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-error&quot;&nbsp;v-else&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop=&quot;catelogName&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;所属分类&quot;&gt;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;v-if=&quot;attrtype&nbsp;==&nbsp;1&quot;&nbsp;prop=&quot;attrGroupName&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;所属分组&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;v-if=&quot;attrtype&nbsp;==&nbsp;1&quot;&nbsp;prop=&quot;showDesc&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;label=&quot;快速展示&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-success&quot;&nbsp;v-if=&quot;scope.row.showDesc&nbsp;==&nbsp;1&quot;&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&nbsp;class=&quot;el-icon-error&quot;&nbsp;v-else&gt;&lt;/i&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;fixed=&quot;right&quot;&nbsp;header-align=&quot;center&quot;&nbsp;align=&quot;center&quot;&nbsp;width=&quot;150&quot;&nbsp;label=&quot;操作&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;template&nbsp;slot-scope=&quot;scope&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;addOrUpdateHandle(scope.row.attrId)&quot;&gt;修改&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-button&nbsp;type=&quot;text&quot;&nbsp;size=&quot;small&quot;&nbsp;@click=&quot;deleteHandle(scope.row.attrId)&quot;&gt;删除&lt;/el-button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-pagination&nbsp;@size-change=&quot;sizeChangeHandle&quot;&nbsp;@current-change=&quot;currentChangeHandle&quot;&nbsp;:current-page=&quot;pageIndex&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:page-sizes=&quot;[10,&nbsp;20,&nbsp;50,&nbsp;100]&quot;&nbsp;:page-size=&quot;pageSize&quot;&nbsp;:total=&quot;totalPage&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layout=&quot;total,&nbsp;sizes,&nbsp;prev,&nbsp;pager,&nbsp;next,&nbsp;jumper&quot;&gt;&lt;/el-pagination&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;弹窗,&nbsp;新增&nbsp;/&nbsp;修改&nbsp;--&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;add-or-update&nbsp;:type=&quot;attrtype&quot;&nbsp;v-if=&quot;addOrUpdateVisible&quot;&nbsp;ref=&quot;addOrUpdate&quot;&nbsp;@refreshDataList=&quot;getDataList&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/add-or-update&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-col&gt;\r\n&nbsp;&nbsp;&lt;/el-row&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script&gt;\r\n//&nbsp;这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\r\nimport&nbsp;Category&nbsp;from&nbsp;&#39;../common/category&#39;\r\nimport&nbsp;AddOrUpdate&nbsp;from&nbsp;&#39;./attr-add-or-update&#39;\r\nexport&nbsp;default&nbsp;{\r\n&nbsp;&nbsp;//&nbsp;import引入的组件需要注入到对象中才能使用\r\n&nbsp;&nbsp;components:&nbsp;{&nbsp;Category,&nbsp;AddOrUpdate&nbsp;},\r\n&nbsp;&nbsp;props:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;attrtype:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Number,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;data&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catId:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataForm:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;&#39;&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataList:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageIndex:&nbsp;1,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageSize:&nbsp;10,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;totalPage:&nbsp;0,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListLoading:&nbsp;false,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataListSelections:&nbsp;[],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateVisible:&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;activated&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;},\r\n&nbsp;&nbsp;methods:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;感知树节点被点击\r\n&nbsp;&nbsp;&nbsp;&nbsp;treenodeclick&nbsp;(data,&nbsp;node,&nbsp;component)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(node.level&nbsp;===&nbsp;3)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.catId&nbsp;=&nbsp;data.catId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()&nbsp;//&nbsp;重新查询\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;getAllDataList&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.catId&nbsp;=&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;获取数据列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;getDataList&nbsp;()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;type&nbsp;=&nbsp;this.attrtype&nbsp;===&nbsp;0&nbsp;?&nbsp;&#39;sale&#39;&nbsp;:&nbsp;&#39;base&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;根据三级分类id、key、分页信息查找属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(`/product/attr/${type}/list/${this.catId}`),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;get&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page:&nbsp;this.pageIndex,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;limit:&nbsp;this.pageSize,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;this.dataForm.key\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;data.page.list\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;data.page.totalCount\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataList&nbsp;=&nbsp;[]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.totalPage&nbsp;=&nbsp;0\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListLoading&nbsp;=&nbsp;false\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;每页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;sizeChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageSize&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;当前页\r\n&nbsp;&nbsp;&nbsp;&nbsp;currentChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pageIndex&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;多选\r\n&nbsp;&nbsp;&nbsp;&nbsp;selectionChangeHandle&nbsp;(val)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.dataListSelections&nbsp;=&nbsp;val\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;新增&nbsp;/&nbsp;修改\r\n&nbsp;&nbsp;&nbsp;&nbsp;addOrUpdateHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.addOrUpdateVisible&nbsp;=&nbsp;true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$nextTick(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$refs.addOrUpdate.init(id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;删除\r\n&nbsp;&nbsp;&nbsp;&nbsp;deleteHandle&nbsp;(id)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ids&nbsp;=&nbsp;id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;[id]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;this.dataListSelections.map(item&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;item.attrId\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$confirm(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`确定对[id=${ids.join(&#39;,&#39;)}]进行[${id&nbsp;?&nbsp;&#39;删除&#39;&nbsp;:&nbsp;&#39;批量删除&#39;}]操作?`,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;提示&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmButtonText:&nbsp;&#39;确定&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelButtonText:&nbsp;&#39;取消&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;warning&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).then(()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$http({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;this.$http.adornUrl(&#39;/product/attr/delete&#39;),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&#39;post&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;this.$http.adornData(ids,&nbsp;false)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).then(({&nbsp;data&nbsp;})&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data&nbsp;&amp;&amp;&nbsp;data.code&nbsp;===&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;&#39;操作成功&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&#39;success&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration:&nbsp;1500,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClose:&nbsp;()&nbsp;=&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getDataList()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.$message.error(data.msg)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;}\r\n}\r\n&lt;/script&gt;\r\n&lt;style&nbsp;scoped&gt;\r\n&lt;/style&gt;</pre><p><strong>后台：主要接口</strong></p><p>1）前台需要用到的api如下，用于列表显示：</p><pre>/product/attr/${type}/list/${this.catId}</pre><p>规格属性类型值为1，销售属性类型值为2，根据类型的不同和catId进行查询，还需要根据额外的数据：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;this.$http.adornParams({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page:&nbsp;this.pageIndex,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;limit:&nbsp;this.pageSize,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;this.dataForm.key\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</pre><p>进行分页查询，后端实现：</p><p>controller</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;查询规格属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/base/list/{categoryId}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;baseList(@RequestParam&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;params,&nbsp;@PathVariable(&quot;categoryId&quot;)&nbsp;Long&nbsp;categoryId&nbsp;){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;根据三级分类id、key、分页信息查找属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PageUtils&nbsp;page&nbsp;=&nbsp;attrService.queryAttr(categoryId,&nbsp;AttrEnum.BASE_ATTR.getType(),params);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;page&quot;,&nbsp;page);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;查询销售属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/sale/list/{categoryId}&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;saleList(@RequestParam&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;params,&nbsp;@PathVariable(&quot;categoryId&quot;)&nbsp;Long&nbsp;categoryId&nbsp;){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;根据三级分类id、key、分页信息查找属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PageUtils&nbsp;page&nbsp;=&nbsp;attrService.queryAttr(categoryId,&nbsp;AttrEnum.SALE_ATTR.getType(),params);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;page&quot;,&nbsp;page);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>service:</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;PageUtils&nbsp;queryAttr(Long&nbsp;categoryId,&nbsp;Integer&nbsp;type,&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;params)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;根据三级分类id、key、分页信息查找属性\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;key&nbsp;=&nbsp;(String)params.get(&quot;key&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Long&nbsp;page&nbsp;=&nbsp;Long.parseLong(params.get(&quot;page&quot;).toString());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Long&nbsp;limit&nbsp;=&nbsp;Long.parseLong(params.get(&quot;limit&quot;).toString());\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Page&lt;AttrEntity&gt;&nbsp;attrEntityPage&nbsp;=&nbsp;new&nbsp;Page&lt;&gt;(page,limit);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Page&lt;AttrVo&gt;&nbsp;attrVoPage&nbsp;=&nbsp;baseMapper.queryAttrByCategoryIdAndKey(attrEntityPage,&nbsp;categoryId,type,&nbsp;key);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;PageUtils(attrVoPage);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>dao:</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;resultMap&nbsp;id=&quot;attrVoMap&quot;&nbsp;type=&quot;AttrVo&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&nbsp;property=&quot;catelogName&quot;&nbsp;column=&quot;name&quot;&gt;&lt;/result&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/resultMap&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;queryAttrByCategoryIdAndKey&quot;&nbsp;resultMap=&quot;attrVoMap&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;pms_attr&nbsp;attr\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left&nbsp;join&nbsp;pms_attr_attrgroup_relation&nbsp;relation&nbsp;on&nbsp;attr.attr_id&nbsp;=&nbsp;relation.attr_id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left&nbsp;join&nbsp;pms_attr_group&nbsp;attr_group&nbsp;on&nbsp;relation.attr_group_id&nbsp;=&nbsp;attr_group.attr_group_id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LEFT&nbsp;JOIN&nbsp;pms_category&nbsp;category&nbsp;on&nbsp;category.cat_id&nbsp;=&nbsp;attr.catelog_id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;where&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;type&nbsp;!=&nbsp;null&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attr.attr_type&nbsp;=&nbsp;#{type}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;categoryId&nbsp;!=&nbsp;null&nbsp;and&nbsp;categoryId&nbsp;!=&nbsp;0&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;attr.catelog_id&nbsp;=&nbsp;#{categoryId}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;key&nbsp;!=&nbsp;null&nbsp;and&nbsp;key&nbsp;!=&nbsp;&#39;&#39;&nbsp;&quot;&nbsp;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;(attr.attr_id&nbsp;=&nbsp;#{key}&nbsp;or&nbsp;&nbsp;attr.attr_name&nbsp;like&nbsp;concat(&#39;%&#39;,#{key},&#39;%&#39;))\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/where&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h2>[<em>11</em>] &nbsp;新增商品</h2><h3>[<em>11.1</em>] 新增商品：使用会员服务</h3><p>会员服务<code>gulimall-member</code> 在启动前需要配置nacos、nacos config 配置信息：</p><p>bootstrap.yml：nacos config配置</p><pre>#&nbsp;nacos配置中心的服务器地址\r\nspring.cloud.nacos.config.server-addr=192.168.87.101:8848\r\n#&nbsp;命名空间，确定了从nacos&nbsp;config中的哪个命名空间中获取配置\r\nspring.cloud.nacos.config.namespace=gulimall-member\r\n#&nbsp;#&nbsp;从远程的&nbsp;gulimall-coupon命名空间的dev（由下面这行决定）分组中获取应用名.properties配置（注意远程的配置内容需要是properties格式的）\r\nspring.cloud.nacos.config.group=dev</pre><p>启动该服务，打开nacos，配置网关的路由信息：(注意不要放在最后)</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;id:&nbsp;member_route\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri:&nbsp;lb://gulimall-member\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predicates:&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Path=/api/member/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filters:\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RewritePath=/api/(?&lt;segment&gt;.*),/$\\{segment}</pre><p>重新启动网关服务<code>gulimall-gateway</code> !</p><h3>[<em>11.2</em>]新增商品：全部前台页面的拷贝</h3><p><a href=\"https://github.com/18476305640/fileBox/raw/master/%E6%9D%82%E9%A1%B9/%E5%89%8D%E7%AB%AF%E7%BB%84%E4%BB%B6.zip\">https://github.com/18476305640/fileBox/raw/master/杂项/前端组件.zip</a></p><p>1）我将 <code>upload</code> 的multUpdate.vue文件放在 <code>src\\components\\upload</code>目录，启动后报错<code>To install it, you can run: npm install --save @/components/upload/multiUpload</code> 我修改了<code>src\\views\\modules\\product\\spuadd.vue</code></p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16615931848381661593184270.png\" alt=\"\"/></p><p>2）如果遇到提示 ”PubSub “未定义错误，则需要安装 pubsub-js，具体步骤：</p><p>（1）安装 pubsub-js：<br/>npm install --save pubsub-js<br/>（2）在 main.js 中引入<br/>//导入<br/>import PubSub from ‘pubsub-js’<br/>//挂载全局<br/>Vue.prototype.PubSub = PubSub</p><p>后启动成功！</p><p>新增了三项用户等级：（后端接口逆向生成了）</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16615883108791661588310747.png\" alt=\"\"/></p><h3>[<em>11.3</em>] 新增商品的后端API</h3><p>API：<a href=\"http://localhost/api/product/categorybrandrelation/brands/list?catId=354\">http://localhost/api/product/categorybrandrelation/brands/list?catId=354</a></p><p>描述：根据分类id，获取关联的所有品牌信息</p><p><code>com.zhuangjie.gulimall.product.controller.CategoryBrandRelationController</code></p><pre>&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/brands/list&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;brandsList(@RequestParam(value&nbsp;=&nbsp;&quot;catId&quot;,required&nbsp;=&nbsp;true)&nbsp;Long&nbsp;catId){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;BrandEntity&gt;&nbsp;brands&nbsp;=&nbsp;&nbsp;categoryBrandRelationService.getRelationBrandsByCategoryId(catId);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;data&quot;,&nbsp;brands);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>service：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Autowired\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;CategoryBrandRelationService&nbsp;categoryBrandRelationService;\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Autowired\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BrandService&nbsp;brandService;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;List&lt;BrandEntity&gt;&nbsp;getRelationBrandsByCategoryId(Long&nbsp;catId)&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;CategoryBrandRelationEntity&gt;&nbsp;list&nbsp;=&nbsp;categoryBrandRelationService.list(new&nbsp;QueryWrapper&lt;CategoryBrandRelationEntity&gt;().eq(&quot;category_id&quot;,catId));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;BrandEntity&gt;&nbsp;brandEntities&nbsp;=&nbsp;list.stream().map(item&nbsp;-&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BrandEntity&nbsp;brandEntity&nbsp;=&nbsp;brandService.getById(item.getBrandId());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;brandEntity;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).collect(Collectors.toList());\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;brandEntities;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>(前台品牌选择如果显示异常：请看<code>src\\views\\modules\\common\\brand-select.vue</code>)</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16615935922621661593591933.png\" alt=\"\"/></p><p>在添加商品时，用到多文件上传，需要用到<code>src\\components\\upload\\multiUpload.vue</code> 文件，然后修改一些信息，从之前的单文件上传组件上获取信息）</p><p>API：<code>product/attrgroup/{catelogId}/withattr</code></p><p>描述：根据分类id，获取下面的全部属性分组及其属性（放在对应分组对象下）</p><p>作用：在添加商品时，在跳到设置商品的规格属性与销售属性时，就需要调用了</p><p>Controller：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(&quot;/{catelogId}/withattr&quot;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;R&nbsp;attrGroupWithAttr(@PathVariable(&quot;catelogId&quot;)&nbsp;Long&nbsp;catelogId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;AttrGroupVo&gt;&nbsp;attrGroupVos&nbsp;=&nbsp;&nbsp;attrGroupService.queryAttrGroupWithAttrByCatelogId(catelogId);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;R.ok().put(&quot;data&quot;,attrGroupVos);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>Service：</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;@Override\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;List&lt;AttrGroupVo&gt;&nbsp;queryAttrGroupWithAttrByCatelogId(Long&nbsp;catelogId)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QueryWrapper&lt;AttrGroupEntity&gt;&nbsp;queryWrapper&nbsp;=&nbsp;new&nbsp;QueryWrapper&lt;&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;queryWrapper.eq(&quot;catelog_id&quot;,&nbsp;catelogId);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;AttrGroupEntity&gt;&nbsp;attrGroupEntities&nbsp;=&nbsp;baseMapper.selectList(queryWrapper);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;AttrGroupVo&gt;&nbsp;attrGroupVos&nbsp;=&nbsp;attrGroupEntities.stream().map(item&nbsp;-&gt;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Long&nbsp;attrGroupId&nbsp;=&nbsp;item.getAttrGroupId();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AttrGroupVo&nbsp;attrGroupVo&nbsp;=&nbsp;new&nbsp;AttrGroupVo();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BeanUtils.copyProperties(item,&nbsp;attrGroupVo);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;AttrEntity&gt;&nbsp;attrs&nbsp;=&nbsp;baseMapper.queryAttrsByAttrgroupId(attrGroupId);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attrGroupVo.setAttrs(attrs);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;attrGroupVo;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).collect(Collectors.toList());\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;attrGroupVos;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p>Dao接口：AttrGroupDao.java</p><pre>&nbsp;List&lt;AttrEntity&gt;&nbsp;queryAttrsByAttrgroupId(@Param(&quot;attrGroupId&quot;)&nbsp;Long&nbsp;attrGroupId);</pre><p>AttrGroupDao.xml</p><pre>&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id=&quot;queryAttrsByAttrgroupId&quot;&nbsp;resultType=&quot;com.zhuangjie.gulimall.product.entity.AttrEntity&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pms_attr&nbsp;attr\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LEFT&nbsp;JOIN&nbsp;pms_attr_attrgroup_relation&nbsp;relation&nbsp;ON&nbsp;attr.attr_id&nbsp;=&nbsp;relation.attr_id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;relation.attr_group_id&nbsp;=&nbsp;#{attrGroupId}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;</pre><h3>[<em>11.2</em>] 添加商品</h3><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/1661697977999%E5%8A%A8%E7%94%BB.apng\" alt=\"\"/></p><p>点击“保存商品信息”后取消，再到控制台，可以看到：</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16616982856571661698285451.png\" alt=\"\"/></p><p>复制粘贴在：<a href=\"https://www.json.cn/\">https://www.json.cn/</a>下，下载生成的Java实体代码</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16616984796551661698479447.png\" alt=\"\"/></p><p>放在项目的</p><p><img src=\"https://fastly.jsdelivr.net/gh/18476305640/typora@master/image/16616985476501661698547248.png\" alt=\"\"/></p><p><br/></p>','2022-08-30 23:34:28',1,NULL,'2022-08-30',-1,0),(286,1,'湖南娄底女司机撞人拖行一公里','<p><video class=\"edui-upload-video  vjs-default-skin   video-js\" controls=\"\" preload=\"load\" width=\"420\" height=\"280\" src=\"/fileUpload/video/20220907/1662513672631071992.mp4\" data-setup=\"{}\"><source src=\"/fileUpload/video/20220907/1662513672631071992.mp4\" type=\"video/mp4\"/></video></p>','2022-09-07 09:21:25',NULL,NULL,'2022-09-07',1,0),(287,1,'草原上的卓玛壁纸','<p><img src=\"/fileUpload/image/20220908/1662641965919078985.jpg\" title=\"1662641965919078985.jpg\" alt=\"草原上的卓玛壁纸.jpg\"/></p>','2022-09-07 18:49:06',1,0,'2022-09-08',1,0);

/*Table structure for table `log_read` */

DROP TABLE IF EXISTS `log_read`;

CREATE TABLE `log_read` (
  `log_read_id` int(11) NOT NULL,
  `log_id` int(11) NOT NULL,
  `up_id` int(11) NOT NULL,
  `create_date` datetime DEFAULT NULL,
  PRIMARY KEY (`log_read_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `log_read` */

/*Table structure for table `point_log` */

DROP TABLE IF EXISTS `point_log`;

CREATE TABLE `point_log` (
  `up_id` int(11) DEFAULT NULL,
  `log_id` int(11) DEFAULT NULL,
  `point_date` datetime NOT NULL,
  `point_type` int(11) DEFAULT NULL,
  KEY `up_id` (`up_id`),
  KEY `log_id` (`log_id`),
  CONSTRAINT `point_log_ibfk_1` FOREIGN KEY (`up_id`) REFERENCES `up` (`up_id`),
  CONSTRAINT `point_log_ibfk_2` FOREIGN KEY (`log_id`) REFERENCES `log` (`log_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `point_log` */

insert  into `point_log`(`up_id`,`log_id`,`point_date`,`point_type`) values (122,281,'2022-09-01 22:03:45',1),(122,280,'2022-09-01 22:07:10',0),(123,281,'2022-09-02 00:15:37',1),(123,275,'2022-09-02 00:11:16',1),(1,281,'2022-09-07 15:24:36',0),(1,280,'2022-09-07 08:06:20',-1),(123,280,'2022-09-02 20:44:58',1),(1,287,'2022-09-08 15:05:48',1),(1,278,'2022-09-07 19:58:49',1),(123,278,'2022-09-07 21:55:40',1);

/*Table structure for table `report` */

DROP TABLE IF EXISTS `report`;

CREATE TABLE `report` (
  `log_id` int(11) NOT NULL,
  `report_upid` int(11) NOT NULL,
  `report_content` text,
  `report_start` int(11) NOT NULL DEFAULT '-1',
  `report_id` int(11) NOT NULL AUTO_INCREMENT,
  `report_date` datetime NOT NULL,
  PRIMARY KEY (`report_id`),
  KEY `log_id` (`log_id`),
  KEY `report_upid` (`report_upid`),
  CONSTRAINT `report_ibfk_1` FOREIGN KEY (`log_id`) REFERENCES `log` (`log_id`),
  CONSTRAINT `report_ibfk_2` FOREIGN KEY (`report_upid`) REFERENCES `up` (`up_id`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8;

/*Data for the table `report` */

insert  into `report`(`log_id`,`report_upid`,`report_content`,`report_start`,`report_id`,`report_date`) values (260,1,'测试举报！',-1,19,'2021-01-18 14:32:10'),(277,1,'11',-1,24,'2022-08-28 18:13:11');

/*Table structure for table `up` */

DROP TABLE IF EXISTS `up`;

CREATE TABLE `up` (
  `up_id` int(11) NOT NULL AUTO_INCREMENT,
  `up_pname` char(25) NOT NULL,
  `up_ptext` varchar(70) DEFAULT NULL,
  `up_name` char(25) NOT NULL,
  `up_password` char(25) NOT NULL,
  `up_cdate` date NOT NULL,
  `up_headImg` varchar(100) DEFAULT NULL,
  `up_power` int(20) NOT NULL,
  PRIMARY KEY (`up_id`)
) ENGINE=InnoDB AUTO_INCREMENT=125 DEFAULT CHARSET=utf8 COMMENT='博主表';

/*Data for the table `up` */

insert  into `up`(`up_id`,`up_pname`,`up_ptext`,`up_name`,`up_password`,`up_cdate`,`up_headImg`,`up_power`) values (1,'猿记官方账号','创新是血液','admin','zjazn','2021-01-05','/fileUpload/upHeadImg/C3DEA4585B9B462C93B458D0CF9C5D72.jpg',1000),(2,'全栈的小庄','热爱才是动力','root','root','2021-01-08','/img/k9.jpg',100),(13,'猿主','创新无止境，且不自傲','18476305640','zjazn','2021-01-13','/img/upHeadImg/EF34872E0BFD48668C540CA0A62EE277.jpg',0),(14,'我很污~','我很污~','10086','10086','2021-01-15','/img/upHeadImg/16014BAED003456FBD850FB26991A07C.jpg',-1),(15,'小庄z','iii','188','zjazn','2021-01-22',NULL,100),(16,'小庄z','iii','188','zjazn','2021-01-22',NULL,100),(121,'1','iii','188','zjazn','2021-01-22',NULL,100),(122,'','','110','zjazn','2022-09-01',NULL,0),(123,'用户1662041761331','','18318180911','zjazn','2022-09-01',NULL,0),(124,'用户1662082451072','','13413601002','zjazn','2022-09-02','\\fileUpload\\upHeadImg\\F3B1B3CB340747D187A852D577DEE9A4.JPG',0);

/* Trigger structure for table `log` */

DELIMITER $$

/*!50003 DROP TRIGGER*//*!50032 IF EXISTS */ /*!50003 `logIfDel` */$$

/*!50003 CREATE */ /*!50017 DEFINER = 'root'@'localhost' */ /*!50003 TRIGGER `logIfDel` BEFORE DELETE ON `log` FOR EACH ROW BEGIN
	delete from comment where log_id=old.log_id;
	DELETE FROM point_log WHERE log_id=old.log_id;
	delete from report where log_id=old.log_id;
    END */$$


DELIMITER ;

/* Trigger structure for table `up` */

DELIMITER $$

/*!50003 DROP TRIGGER*//*!50032 IF EXISTS */ /*!50003 `upIfDel` */$$

/*!50003 CREATE */ /*!50017 DEFINER = 'root'@'%' */ /*!50003 TRIGGER `upIfDel` BEFORE DELETE ON `up` FOR EACH ROW BEGIN
	delete from log where up_id=old.up_id;
    END */$$


DELIMITER ;

/* Function  structure for function  `regexp_replace` */

/*!50003 DROP FUNCTION IF EXISTS `regexp_replace` */;
DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`%` FUNCTION `regexp_replace`(string_a VARCHAR(21845),pattern VARCHAR(1000),string_b VARCHAR(1000)) RETURNS varchar(1000) CHARSET utf8
    DETERMINISTIC
BEGIN  
 DECLARE string_c VARCHAR(1000);  
 DECLARE nub VARCHAR(1);  
 DECLARE i INT;  
 SET i =1;  
 SET string_c ='';  
 IF string_a REGEXP pattern THEN  
    loop_label: LOOP  
      IF i>CHAR_LENGTH(string_a) THEN  
        LEAVE loop_label;  
 END IF;
 SET nub = SUBSTRING(string_a,i,1);  
 IF NOT nub REGEXP pattern THEN  
 SET string_c = CONCAT(string_c,nub);  
      ELSE  
        SET string_c = CONCAT(string_c,string_b);  
      END IF;  
      SET i=i+1;  
    END LOOP;  
  ELSE
    SET string_c = string_a;  
  END IF;  
  RETURN string_c;  
END */$$
DELIMITER ;

/*Table structure for table `log_pooint_count` */

DROP TABLE IF EXISTS `log_pooint_count`;

/*!50001 DROP VIEW IF EXISTS `log_pooint_count` */;
/*!50001 DROP TABLE IF EXISTS `log_pooint_count` */;

/*!50001 CREATE TABLE  `log_pooint_count`(
 `log_id` int(11) ,
 `log_title` varchar(100) ,
 `up` bigint(21) ,
 `down` bigint(21) 
)*/;

/*View structure for view log_pooint_count */

/*!50001 DROP TABLE IF EXISTS `log_pooint_count` */;
/*!50001 DROP VIEW IF EXISTS `log_pooint_count` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `log_pooint_count` AS select `tt1`.`log_id` AS `log_id`,`tt1`.`log_title` AS `log_title`,ifnull(`tt1`.`up`,0) AS `up`,ifnull(`tt2`.`down`,0) AS `down` from (((select `t1`.`log_id` AS `log_id`,`t1`.`log_title` AS `log_title`,count(0) AS `up` from (`uplog`.`log` `t1` left join `uplog`.`point_log` `t2` on((`t1`.`log_id` = `t2`.`log_id`))) where (`t2`.`point_type` = 1) group by `t1`.`log_id`)) `tt1` left join (select `t1`.`log_id` AS `log_id`,`t1`.`log_title` AS `log_title`,count(0) AS `down` from (`uplog`.`log` `t1` left join `uplog`.`point_log` `t2` on((`t1`.`log_id` = `t2`.`log_id`))) where (`t2`.`point_type` = -(1)) group by `t1`.`log_id`) `tt2` on((`tt1`.`log_id` = `tt2`.`log_id`))) order by `tt1`.`up` desc */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
